/*! For license information please see main.js.LICENSE.txt */
window.AncillaryLib=(()=>{var t={78:(t,e,n)=>{var r,i;!function(){var o={version:"3.5.17"},a=[].slice,s=function(t){return a.call(t)},l=this.document;function u(t){return t&&(t.ownerDocument||t.document||t).documentElement}function c(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(l)try{s(l.documentElement.childNodes)[0].nodeType}catch(t){s=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),l)try{l.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var h=this.Element.prototype,p=h.setAttribute,f=h.setAttributeNS,d=this.CSSStyleDeclaration.prototype,_=d.setProperty;h.setAttribute=function(t,e){p.call(this,t,e+"")},h.setAttributeNS=function(t,e,n){f.call(this,t,e,n+"")},d.setProperty=function(t,e,n){_.call(this,t,e+"",n)}}function g(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function y(t){return null===t?NaN:+t}function m(t){return!isNaN(t)}function v(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}o.ascending=g,o.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},o.min=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},o.max=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},o.extent=function(t,e){var n,r,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=t[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t[o])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++o<a;)if(null!=(r=e.call(t,t[o],o))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e.call(t,t[o],o))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},o.sum=function(t,e){var n,r=0,i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)m(n=+t[o])&&(r+=n);else for(;++o<i;)m(n=+e.call(t,t[o],o))&&(r+=n);return r},o.mean=function(t,e){var n,r=0,i=t.length,o=-1,a=i;if(1===arguments.length)for(;++o<i;)m(n=y(t[o]))?r+=n:--a;else for(;++o<i;)m(n=y(e.call(t,t[o],o)))?r+=n:--a;if(a)return r/a},o.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],o=n-r;return o?i+o*(t[r]-i):i},o.median=function(t,e){var n,r=[],i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)m(n=y(t[a]))&&r.push(n);else for(;++a<i;)m(n=y(e.call(t,t[a],a)))&&r.push(n);if(r.length)return o.quantile(r.sort(g),.5)},o.variance=function(t,e){var n,r,i=t.length,o=0,a=0,s=-1,l=0;if(1===arguments.length)for(;++s<i;)m(n=y(t[s]))&&(a+=(r=n-o)*(n-(o+=r/++l)));else for(;++s<i;)m(n=y(e.call(t,t[s],s)))&&(a+=(r=n-o)*(n-(o+=r/++l)));if(l>1)return a/(l-1)},o.deviation=function(){var t=o.variance.apply(this,arguments);return t?Math.sqrt(t):t};var x=v(g);function b(t){return t.length}o.bisectLeft=x.left,o.bisect=o.bisectRight=x.right,o.bisector=function(t){return v(1===t.length?function(e,n){return g(t(e),n)}:t)},o.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,o<2&&(e=0));for(var r,i,o=n-e;o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},o.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},o.pairs=function(t){for(var e=0,n=t.length-1,r=t[0],i=new Array(n<0?0:n);e<n;)i[e]=[r,r=t[++e]];return i},o.transpose=function(t){if(!(i=t.length))return[];for(var e=-1,n=o.min(t,b),r=new Array(n);++e<n;)for(var i,a=-1,s=r[e]=new Array(i);++a<i;)s[a]=t[a][e];return r},o.zip=function(){return o.transpose(arguments)},o.keys=function(t){var e=[];for(var n in t)e.push(n);return e},o.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},o.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},o.merge=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n};var E=Math.abs;function w(t){for(var e=1;t*e%1;)e*=10;return e}function A(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function M(){this._=Object.create(null)}function C(t){return"__proto__"==(t+="")||"\0"===t[0]?"\0"+t:t}function S(t){return"\0"===(t+="")[0]?t.slice(1):t}function k(t){return C(t)in this._}function T(t){return(t=C(t))in this._&&delete this._[t]}function D(){var t=[];for(var e in this._)t.push(S(e));return t}function L(){var t=0;for(var e in this._)++t;return t}function P(){for(var t in this._)return!1;return!0}function N(){this._=Object.create(null)}function I(t){return t}function R(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function U(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=O.length;n<r;++n){var i=O[n]+e;if(i in t)return i}}o.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var r,i=[],o=w(E(n)),a=-1;if(t*=o,e*=o,(n*=o)<0)for(;(r=t+n*++a)>e;)i.push(r/o);else for(;(r=t+n*++a)<e;)i.push(r/o);return i},o.map=function(t,e){var n=new M;if(t instanceof M)t.forEach((function(t,e){n.set(t,e)}));else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e.call(t,r=t[i],i),r)}else for(var a in t)n.set(a,t[a]);return n},A(M,{has:k,get:function(t){return this._[C(t)]},set:function(t,e){return this._[C(t)]=e},remove:T,keys:D,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:S(e),value:this._[e]});return t},size:L,empty:P,forEach:function(t){for(var e in this._)t.call(this,S(e),this._[e])}}),o.nest=function(){var t,e,n={},r=[],i=[];function a(i,o,s){if(s>=r.length)return e?e.call(n,o):t?o.sort(t):o;for(var l,u,c,h,p=-1,f=o.length,d=r[s++],_=new M;++p<f;)(h=_.get(l=d(u=o[p])))?h.push(u):_.set(l,[u]);return i?(u=i(),c=function(t,e){u.set(t,a(i,e,s))}):(u={},c=function(t,e){u[t]=a(i,e,s)}),_.forEach(c),u}function s(t,e){if(e>=r.length)return t;var n=[],o=i[e++];return t.forEach((function(t,r){n.push({key:t,values:s(r,e)})})),o?n.sort((function(t,e){return o(t.key,e.key)})):n}return n.map=function(t,e){return a(e,t,0)},n.entries=function(t){return s(a(o.map,t,0),0)},n.key=function(t){return r.push(t),n},n.sortKeys=function(t){return i[r.length-1]=t,n},n.sortValues=function(e){return t=e,n},n.rollup=function(t){return e=t,n},n},o.set=function(t){var e=new N;if(t)for(var n=0,r=t.length;n<r;++n)e.add(t[n]);return e},A(N,{has:k,add:function(t){return this._[C(t+="")]=!0,t},remove:T,values:D,size:L,empty:P,forEach:function(t){for(var e in this._)t.call(this,S(e))}}),o.behavior={},o.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=R(t,e,e[n]);return t};var O=["webkit","ms","moz","Moz","o","O"];function F(){}function V(){}function B(t){var e=[],n=new M;function r(){for(var n,r=e,i=-1,o=r.length;++i<o;)(n=r[i].on)&&n.apply(this,arguments);return t}return r.on=function(r,i){var o,a=n.get(r);return arguments.length<2?a&&a.on:(a&&(a.on=null,e=e.slice(0,o=e.indexOf(a)).concat(e.slice(o+1)),n.remove(r)),i&&e.push(n.set(r,{on:i})),t)},r}function W(){o.event.preventDefault()}function Y(){for(var t,e=o.event;t=e.sourceEvent;)e=t;return e}function z(t){for(var e=new V,n=0,r=arguments.length;++n<r;)e[arguments[n]]=B(e);return e.of=function(n,r){return function(i){try{var a=i.sourceEvent=o.event;i.target=t,o.event=i,e[i.type].apply(n,r)}finally{o.event=a}}},e}o.dispatch=function(){for(var t=new V,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=B(t);return t},V.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},o.event=null,o.requote=function(t){return t.replace(H,"\\$&")};var H=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,j={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function K(t){return j(t,Z),t}var q=function(t,e){return e.querySelector(t)},X=function(t,e){return e.querySelectorAll(t)},G=function(t,e){var n=t.matches||t[U(t,"matchesSelector")];return(G=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(q=function(t,e){return Sizzle(t,e)[0]||null},X=Sizzle,G=Sizzle.matchesSelector),o.selection=function(){return o.select(l.documentElement)};var Z=o.selection.prototype=[];function Q(t){return"function"==typeof t?t:function(){return q(t,this)}}function $(t){return"function"==typeof t?t:function(){return X(t,this)}}Z.select=function(t){var e,n,r,i,o=[];t=Q(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]),e.parentNode=(r=this[a]).parentNode;for(var l=-1,u=r.length;++l<u;)(i=r[l])?(e.push(n=t.call(i,i.__data__,l,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return K(o)},Z.selectAll=function(t){var e,n,r=[];t=$(t);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],l=-1,u=a.length;++l<u;)(n=a[l])&&(r.push(e=s(t.call(n,n.__data__,l,i))),e.parentNode=n);return K(r)};var J="http://www.w3.org/1999/xhtml",tt={svg:"http://www.w3.org/2000/svg",xhtml:J,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function et(t,e){return t=o.ns.qualify(t),null==e?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof e?t.local?function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}:function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}:t.local?function(){this.setAttributeNS(t.space,t.local,e)}:function(){this.setAttribute(t,e)}}function nt(t){return t.trim().replace(/\s+/g," ")}function rt(t){return new RegExp("(?:^|\\s+)"+o.requote(t)+"(?:\\s+|$)","g")}function it(t){return(t+"").trim().split(/^|\s+/)}function ot(t,e){var n=(t=it(t).map(at)).length;return"function"==typeof e?function(){for(var r=-1,i=e.apply(this,arguments);++r<n;)t[r](this,i)}:function(){for(var r=-1;++r<n;)t[r](this,e)}}function at(t){var e=rt(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",nt(i+" "+t))):n.setAttribute("class",nt(i.replace(e," ")))}}function st(t,e,n){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}:function(){this.style.setProperty(t,e,n)}}function lt(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}:function(){this[t]=e}}function ut(t){return"function"==typeof t?t:(t=o.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){var e=this.ownerDocument,n=this.namespaceURI;return n===J&&e.documentElement.namespaceURI===J?e.createElement(t):e.createElementNS(n,t)}}function ct(){var t=this.parentNode;t&&t.removeChild(this)}function ht(t){return{__data__:t}}function pt(t){return function(){return G(this,t)}}function ft(t){return arguments.length||(t=g),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function dt(t,e){for(var n=0,r=t.length;n<r;n++)for(var i,o=t[n],a=0,s=o.length;a<s;a++)(i=o[a])&&e(i,a,n);return t}function _t(t){return j(t,gt),t}o.ns={prefix:tt,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),tt.hasOwnProperty(n)?{space:tt[n],local:t}:t}},Z.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=o.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(et(e,t[e]));return this}return this.each(et(t,e))},Z.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=it(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!rt(t[i]).test(e))return!1;return!0}for(e in t)this.each(ot(e,t[e]));return this}return this.each(ot(t,e))},Z.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=""),t)this.each(st(n,t[n],e));return this}if(r<2){var i=this.node();return c(i).getComputedStyle(i,null).getPropertyValue(t)}n=""}return this.each(st(t,e,n))},Z.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(lt(e,t[e]));return this}return this.each(lt(t,e))},Z.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Z.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Z.append=function(t){return t=ut(t),this.select((function(){return this.appendChild(t.apply(this,arguments))}))},Z.insert=function(t,e){return t=ut(t),e=Q(e),this.select((function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)}))},Z.remove=function(){return this.each(ct)},Z.data=function(t,e){var n,r,i=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(n=this[0]).length);++i<o;)(r=n[i])&&(t[i]=r.__data__);return t}function a(t,n){var r,i,o,a=t.length,c=n.length,h=Math.min(a,c),p=new Array(c),f=new Array(c),d=new Array(a);if(e){var _,g=new M,y=new Array(a);for(r=-1;++r<a;)(i=t[r])&&(g.has(_=e.call(i,i.__data__,r))?d[r]=i:g.set(_,i),y[r]=_);for(r=-1;++r<c;)(i=g.get(_=e.call(n,o=n[r],r)))?!0!==i&&(p[r]=i,i.__data__=o):f[r]=ht(o),g.set(_,!0);for(r=-1;++r<a;)r in y&&!0!==g.get(y[r])&&(d[r]=t[r])}else{for(r=-1;++r<h;)i=t[r],o=n[r],i?(i.__data__=o,p[r]=i):f[r]=ht(o);for(;r<c;++r)f[r]=ht(n[r]);for(;r<a;++r)d[r]=t[r]}f.update=p,f.parentNode=p.parentNode=d.parentNode=t.parentNode,s.push(f),l.push(p),u.push(d)}var s=_t([]),l=K([]),u=K([]);if("function"==typeof t)for(;++i<o;)a(n=this[i],t.call(n,n.parentNode.__data__,i));else for(;++i<o;)a(n=this[i],t);return l.enter=function(){return s},l.exit=function(){return u},l},Z.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Z.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=pt(t));for(var o=0,a=this.length;o<a;o++){i.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var s=0,l=n.length;s<l;s++)(r=n[s])&&t.call(r,r.__data__,s,o)&&e.push(r)}return K(i)},Z.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Z.sort=function(t){t=ft.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Z.each=function(t){return dt(this,(function(e,n,r){t.call(e,e.__data__,n,r)}))},Z.call=function(t){var e=s(arguments);return t.apply(e[0]=this,e),this},Z.empty=function(){return!this.node()},Z.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],r=0,i=n.length;r<i;r++){var o=n[r];if(o)return o}return null},Z.size=function(){var t=0;return dt(this,(function(){++t})),t};var gt=[];function yt(t){var e,n;return function(r,i,o){var a,s=t[o].update,l=s.length;for(o!=n&&(n=o,e=0),i>=e&&(e=i+1);!(a=s[e])&&++e<l;);return a}}function mt(t,e,n){var r="__on"+t,i=t.indexOf("."),a=xt;i>0&&(t=t.slice(0,i));var l=vt.get(t);function u(){var e=this[r];e&&(this.removeEventListener(t,e,e.$),delete this[r])}return l&&(t=l,a=bt),i?e?function(){var i=a(e,s(arguments));u.call(this),this.addEventListener(t,this[r]=i,i.$=n),i._=e}:u:e?F:function(){var e,n=new RegExp("^__on([^.]+)"+o.requote(t)+"$");for(var r in this)if(e=r.match(n)){var i=this[r];this.removeEventListener(e[1],i,i.$),delete this[r]}}}o.selection.enter=_t,o.selection.enter.prototype=gt,gt.append=Z.append,gt.empty=Z.empty,gt.node=Z.node,gt.call=Z.call,gt.size=Z.size,gt.select=function(t){for(var e,n,r,i,o,a=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,a.push(e=[]),e.parentNode=i.parentNode;for(var u=-1,c=i.length;++u<c;)(o=i[u])?(e.push(r[u]=n=t.call(i.parentNode,o.__data__,u,s)),n.__data__=o.__data__):e.push(null)}return K(a)},gt.insert=function(t,e){return arguments.length<2&&(e=yt(this)),Z.insert.call(this,t,e)},o.select=function(t){var e;return"string"==typeof t?(e=[q(t,l)]).parentNode=l.documentElement:(e=[t]).parentNode=u(t),K([e])},o.selectAll=function(t){var e;return"string"==typeof t?(e=s(X(t,l))).parentNode=l.documentElement:(e=s(t)).parentNode=null,K([e])},Z.on=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=!1),t)this.each(mt(n,t[n],e));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(mt(t,e,n))};var vt=o.map({mouseenter:"mouseover",mouseleave:"mouseout"});function xt(t,e){return function(n){var r=o.event;o.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{o.event=r}}}function bt(t,e){var n=xt(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}l&&vt.forEach((function(t){"on"+t in l&&vt.remove(t)}));var Et,wt=0;function At(t){var e=".dragsuppress-"+ ++wt,n="click"+e,r=o.select(c(t)).on("touchmove"+e,W).on("dragstart"+e,W).on("selectstart"+e,W);if(null==Et&&(Et=!("onselectstart"in t)&&U(t.style,"userSelect")),Et){var i=u(t).style,a=i[Et];i[Et]="none"}return function(t){if(r.on(e,null),Et&&(i[Et]=a),t){var o=function(){r.on(n,null)};r.on(n,(function(){W(),o()}),!0),setTimeout(o,0)}}}o.mouse=function(t){return Ct(t,Y())};var Mt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Ct(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(Mt<0){var i=c(t);if(i.scrollX||i.scrollY){var a=(n=o.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Mt=!(a.f||a.e),n.remove()}}return Mt?(r.x=e.pageX,r.y=e.pageY):(r.x=e.clientX,r.y=e.clientY),[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}function St(){return o.event.changedTouches[0].identifier}o.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=Y().changedTouches),e)for(var r,i=0,o=e.length;i<o;++i)if((r=e[i]).identifier===n)return Ct(t,r)},o.behavior.drag=function(){var t=z(i,"drag","dragstart","dragend"),e=null,n=a(F,o.mouse,c,"mousemove","mouseup"),r=a(St,o.touch,I,"touchmove","touchend");function i(){this.on("mousedown.drag",n).on("touchstart.drag",r)}function a(n,r,i,a,s){return function(){var l,u=this,c=o.event.target.correspondingElement||o.event.target,h=u.parentNode,p=t.of(u,arguments),f=0,d=n(),_=".drag"+(null==d?"":"-"+d),g=o.select(i(c)).on(a+_,v).on(s+_,x),y=At(c),m=r(h,d);function v(){var t,e,n=r(h,d);n&&(t=n[0]-m[0],e=n[1]-m[1],f|=t|e,m=n,p({type:"drag",x:n[0]+l[0],y:n[1]+l[1],dx:t,dy:e}))}function x(){r(h,d)&&(g.on(a+_,null).on(s+_,null),y(f),p({type:"dragend"}))}l=e?[(l=e.apply(u,arguments)).x-m[0],l.y-m[1]]:[0,0],p({type:"dragstart"})}}return i.origin=function(t){return arguments.length?(e=t,i):e},o.rebind(i,t,"on")},o.touches=function(t,e){return arguments.length<2&&(e=Y().touches),e?s(e).map((function(e){var n=Ct(t,e);return n.identifier=e.identifier,n})):[]};var kt=1e-6,Tt=kt*kt,Dt=Math.PI,Lt=2*Dt,Pt=Lt-kt,Nt=Dt/2,It=Dt/180,Rt=180/Dt;function Ut(t){return t>0?1:t<0?-1:0}function Ot(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Ft(t){return t>1?0:t<-1?Dt:Math.acos(t)}function Vt(t){return t>1?Nt:t<-1?-Nt:Math.asin(t)}function Bt(t){return((t=Math.exp(t))+1/t)/2}function Wt(t){return(t=Math.sin(t/2))*t}var Yt=Math.SQRT2;o.interpolateZoom=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[0],l=e[1],u=e[2],c=s-i,h=l-o,p=c*c+h*h;if(p<Tt)r=Math.log(u/a)/Yt,n=function(t){return[i+t*c,o+t*h,a*Math.exp(Yt*t*r)]};else{var f=Math.sqrt(p),d=(u*u-a*a+4*p)/(2*a*2*f),_=(u*u-a*a-4*p)/(2*u*2*f),g=Math.log(Math.sqrt(d*d+1)-d),y=Math.log(Math.sqrt(_*_+1)-_);r=(y-g)/Yt,n=function(t){var e,n=t*r,s=Bt(g),l=a/(2*f)*(s*(e=Yt*n+g,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(g));return[i+l*c,o+l*h,a*s/Bt(Yt*n+g)]}}return n.duration=1e3*r,n},o.behavior.zoom=function(){var t,e,n,r,i,a,s,u,h,p={x:0,y:0,k:1},f=[960,500],d=jt,_=250,g=0,y="mousedown.zoom",m="mousemove.zoom",v="mouseup.zoom",x="touchstart.zoom",b=z(E,"zoomstart","zoom","zoomend");function E(t){t.on(y,L).on(Ht+".zoom",N).on("dblclick.zoom",I).on(x,P)}function w(t){return[(t[0]-p.x)/p.k,(t[1]-p.y)/p.k]}function A(t){p.k=Math.max(d[0],Math.min(d[1],t))}function M(t,e){e=function(t){return[t[0]*p.k+p.x,t[1]*p.k+p.y]}(e),p.x+=t[0]-e[0],p.y+=t[1]-e[1]}function C(t,n,r,i){t.__chart__={x:p.x,y:p.y,k:p.k},A(Math.pow(2,i)),M(e=n,r),t=o.select(t),_>0&&(t=t.transition().duration(_)),t.call(E.event)}function S(){s&&s.domain(a.range().map((function(t){return(t-p.x)/p.k})).map(a.invert)),h&&h.domain(u.range().map((function(t){return(t-p.y)/p.k})).map(u.invert))}function k(t){g++||t({type:"zoomstart"})}function T(t){S(),t({type:"zoom",scale:p.k,translate:[p.x,p.y]})}function D(t){--g||(t({type:"zoomend"}),e=null)}function L(){var t=this,e=b.of(t,arguments),n=0,r=o.select(c(t)).on(m,s).on(v,l),i=w(o.mouse(t)),a=At(t);function s(){n=1,M(o.mouse(t),i),T(e)}function l(){r.on(m,null).on(v,null),a(n),D(e)}Rs.call(t),k(e)}function P(){var t,e=this,n=b.of(e,arguments),r={},a=0,s=".zoom-"+o.event.changedTouches[0].identifier,l="touchmove"+s,u="touchend"+s,c=[],h=o.select(e),f=At(e);function d(){var n=o.touches(e);return t=p.k,n.forEach((function(t){t.identifier in r&&(r[t.identifier]=w(t))})),n}function _(){var t=o.event.target;o.select(t).on(l,g).on(u,m),c.push(t);for(var n=o.event.changedTouches,s=0,h=n.length;s<h;++s)r[n[s].identifier]=null;var f=d(),_=Date.now();if(1===f.length){if(_-i<500){var y=f[0];C(e,y,r[y.identifier],Math.floor(Math.log(p.k)/Math.LN2)+1),W()}i=_}else if(f.length>1){y=f[0];var v=f[1],x=y[0]-v[0],b=y[1]-v[1];a=x*x+b*b}}function g(){var s,l,u,c,h=o.touches(e);Rs.call(e);for(var p=0,f=h.length;p<f;++p,c=null)if(u=h[p],c=r[u.identifier]){if(l)break;s=u,l=c}if(c){var d=(d=u[0]-s[0])*d+(d=u[1]-s[1])*d,_=a&&Math.sqrt(d/a);s=[(s[0]+u[0])/2,(s[1]+u[1])/2],l=[(l[0]+c[0])/2,(l[1]+c[1])/2],A(_*t)}i=null,M(s,l),T(n)}function m(){if(o.event.touches.length){for(var t=o.event.changedTouches,e=0,i=t.length;e<i;++e)delete r[t[e].identifier];for(var a in r)return void d()}o.selectAll(c).on(s,null),h.on(y,L).on(x,P),f(),D(n)}_(),k(n),h.on(y,null).on(x,_)}function N(){var i=b.of(this,arguments);r?clearTimeout(r):(Rs.call(this),t=w(e=n||o.mouse(this)),k(i)),r=setTimeout((function(){r=null,D(i)}),50),W(),A(Math.pow(2,.002*zt())*p.k),M(e,t),T(i)}function I(){var t=o.mouse(this),e=Math.log(p.k)/Math.LN2;C(this,t,w(t),o.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}return Ht||(Ht="onwheel"in l?(zt=function(){return-o.event.deltaY*(o.event.deltaMode?120:1)},"wheel"):"onmousewheel"in l?(zt=function(){return o.event.wheelDelta},"mousewheel"):(zt=function(){return-o.event.detail},"MozMousePixelScroll")),E.event=function(t){t.each((function(){var t=b.of(this,arguments),n=p;Fs?o.select(this).transition().each("start.zoom",(function(){p=this.__chart__||{x:0,y:0,k:1},k(t)})).tween("zoom:zoom",(function(){var r=f[0],i=f[1],a=e?e[0]:r/2,s=e?e[1]:i/2,l=o.interpolateZoom([(a-p.x)/p.k,(s-p.y)/p.k,r/p.k],[(a-n.x)/n.k,(s-n.y)/n.k,r/n.k]);return function(e){var n=l(e),i=r/n[2];this.__chart__=p={x:a-n[0]*i,y:s-n[1]*i,k:i},T(t)}})).each("interrupt.zoom",(function(){D(t)})).each("end.zoom",(function(){D(t)})):(this.__chart__=p,k(t),T(t),D(t))}))},E.translate=function(t){return arguments.length?(p={x:+t[0],y:+t[1],k:p.k},S(),E):[p.x,p.y]},E.scale=function(t){return arguments.length?(p={x:p.x,y:p.y,k:null},A(+t),S(),E):p.k},E.scaleExtent=function(t){return arguments.length?(d=null==t?jt:[+t[0],+t[1]],E):d},E.center=function(t){return arguments.length?(n=t&&[+t[0],+t[1]],E):n},E.size=function(t){return arguments.length?(f=t&&[+t[0],+t[1]],E):f},E.duration=function(t){return arguments.length?(_=+t,E):_},E.x=function(t){return arguments.length?(s=t,a=t.copy(),p={x:0,y:0,k:1},E):s},E.y=function(t){return arguments.length?(h=t,u=t.copy(),p={x:0,y:0,k:1},E):h},o.rebind(E,b,"on")};var zt,Ht,jt=[0,1/0];function Kt(){}function qt(t,e,n){return this instanceof qt?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof qt?new qt(t.h,t.s,t.l):de(""+t,_e,qt):new qt(t,e,n)}o.color=Kt,Kt.prototype.toString=function(){return this.rgb()+""},o.hsl=qt;var Xt=qt.prototype=new Kt;function Gt(t,e,n){var r,i;function o(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?r+(i-r)*t/60:t<180?i:t<240?r+(i-r)*(240-t)/60:r}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)||e<0?0:e>1?1:e,r=2*(n=n<0?0:n>1?1:n)-(i=n<=.5?n*(1+e):n+e-n*e),new ue(o(t+120),o(t),o(t-120))}function Zt(t,e,n){return this instanceof Zt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof Zt?new Zt(t.h,t.c,t.l):oe(t instanceof Jt?t.l:(t=ge((t=o.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Zt(t,e,n)}Xt.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new qt(this.h,this.s,this.l/t)},Xt.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new qt(this.h,this.s,t*this.l)},Xt.rgb=function(){return Gt(this.h,this.s,this.l)},o.hcl=Zt;var Qt=Zt.prototype=new Kt;function $t(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new Jt(n,Math.cos(t*=It)*e,Math.sin(t)*e)}function Jt(t,e,n){return this instanceof Jt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof Jt?new Jt(t.l,t.a,t.b):t instanceof Zt?$t(t.h,t.c,t.l):ge((t=ue(t)).r,t.g,t.b):new Jt(t,e,n)}Qt.brighter=function(t){return new Zt(this.h,this.c,Math.min(100,this.l+te*(arguments.length?t:1)))},Qt.darker=function(t){return new Zt(this.h,this.c,Math.max(0,this.l-te*(arguments.length?t:1)))},Qt.rgb=function(){return $t(this.h,this.c,this.l).rgb()},o.lab=Jt;var te=18,ee=.95047,ne=1.08883,re=Jt.prototype=new Kt;function ie(t,e,n){var r=(t+16)/116,i=r+e/500,o=r-n/200;return new ue(le(3.2404542*(i=ae(i)*ee)-1.5371385*(r=1*ae(r))-.4985314*(o=ae(o)*ne)),le(-.969266*i+1.8760108*r+.041556*o),le(.0556434*i-.2040259*r+1.0572252*o))}function oe(t,e,n){return t>0?new Zt(Math.atan2(n,e)*Rt,Math.sqrt(e*e+n*n),t):new Zt(NaN,NaN,t)}function ae(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function se(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function le(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ue(t,e,n){return this instanceof ue?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof ue?new ue(t.r,t.g,t.b):de(""+t,ue,Gt):new ue(t,e,n)}function ce(t){return new ue(t>>16,t>>8&255,255&t)}function he(t){return ce(t)+""}re.brighter=function(t){return new Jt(Math.min(100,this.l+te*(arguments.length?t:1)),this.a,this.b)},re.darker=function(t){return new Jt(Math.max(0,this.l-te*(arguments.length?t:1)),this.a,this.b)},re.rgb=function(){return ie(this.l,this.a,this.b)},o.rgb=ue;var pe=ue.prototype=new Kt;function fe(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function de(t,e,n){var r,i,o,a=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(me(i[0]),me(i[1]),me(i[2]))}return(o=ve.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a|=a>>4,s=240&o,s|=s>>4,l=15&o,l|=l<<4):7===t.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,l=255&o)),e(a,s,l))}function _e(t,e,n){var r,i,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),s=a-o,l=(a+o)/2;return s?(i=l<.5?s/(a+o):s/(2-a-o),r=t==a?(e-n)/s+(e<n?6:0):e==a?(n-t)/s+2:(t-e)/s+4,r*=60):(r=NaN,i=l>0&&l<1?0:r),new qt(r,i,l)}function ge(t,e,n){var r=se((.4124564*(t=ye(t))+.3575761*(e=ye(e))+.1804375*(n=ye(n)))/ee),i=se((.2126729*t+.7151522*e+.072175*n)/1);return Jt(116*i-16,500*(r-i),200*(i-se((.0193339*t+.119192*e+.9503041*n)/ne)))}function ye(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function me(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}pe.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&e<i&&(e=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new ue(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new ue(i,i,i)},pe.darker=function(t){return new ue((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},pe.hsl=function(){return _e(this.r,this.g,this.b)},pe.toString=function(){return"#"+fe(this.r)+fe(this.g)+fe(this.b)};var ve=o.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function xe(t){return"function"==typeof t?t:function(){return t}}function be(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Ee(e,n,t,r)}}function Ee(t,e,n,r){var i={},a=o.dispatch("beforesend","progress","load","error"),l={},u=new XMLHttpRequest,c=null;function h(){var t,e=u.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(u)||e>=200&&e<300||304===e){try{t=n.call(i,u)}catch(t){return void a.error.call(i,t)}a.load.call(i,t)}else a.error.call(i,u)}return this.XDomainRequest&&!("withCredentials"in u)&&/^(http(s)?:)?\/\//.test(t)&&(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=h:u.onreadystatechange=function(){u.readyState>3&&h()},u.onprogress=function(t){var e=o.event;o.event=t;try{a.progress.call(i,u)}finally{o.event=e}},i.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l[t]:(null==e?delete l[t]:l[t]=e+"",i)},i.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",i):e},i.responseType=function(t){return arguments.length?(c=t,i):c},i.response=function(t){return n=t,i},["get","post"].forEach((function(t){i[t]=function(){return i.send.apply(i,[t].concat(s(arguments)))}})),i.send=function(n,r,o){if(2===arguments.length&&"function"==typeof r&&(o=r,r=null),u.open(n,t,!0),null==e||"accept"in l||(l.accept=e+",*/*"),u.setRequestHeader)for(var s in l)u.setRequestHeader(s,l[s]);return null!=e&&u.overrideMimeType&&u.overrideMimeType(e),null!=c&&(u.responseType=c),null!=o&&i.on("error",o).on("load",(function(t){o(null,t)})),a.beforesend.call(i,u),u.send(null==r?null:r),i},i.abort=function(){return u.abort(),i},o.rebind(i,a,"on"),null==r?i:i.get(function(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}(r))}ve.forEach((function(t,e){ve.set(t,ce(e))})),o.functor=xe,o.xhr=be(I),o.dsv=function(t,e){var n=new RegExp('["'+t+"\n]"),r=t.charCodeAt(0);function i(t,n,r){arguments.length<3&&(r=n,n=null);var i=Ee(t,e,null==n?o:a(n),r);return i.row=function(t){return arguments.length?i.response(null==(n=t)?o:a(t)):n},i}function o(t){return i.parse(t.responseText)}function a(t){return function(e){return i.parse(e.responseText,t)}}function s(e){return e.map(l).join(t)}function l(t){return n.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return i.parse=function(t,e){var n;return i.parseRows(t,(function(t,r){if(n)return n(t,r-1);var i=new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+"]"})).join(",")+"}");n=e?function(t,n){return e(i(t),n)}:i}))},i.parseRows=function(t,e){var n,i,o={},a={},s=[],l=t.length,u=0,c=0;function h(){if(u>=l)return a;if(i)return i=!1,o;var e=u;if(34===t.charCodeAt(e)){for(var n=e;n++<l;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}return u=n+2,13===(s=t.charCodeAt(n+1))?(i=!0,10===t.charCodeAt(n+2)&&++u):10===s&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;u<l;){var s,c=1;if(10===(s=t.charCodeAt(u++)))i=!0;else if(13===s)i=!0,10===t.charCodeAt(u)&&(++u,++c);else if(s!==r)continue;return t.slice(e,u-c)}return t.slice(e)}for(;(n=h())!==a;){for(var p=[];n!==o&&n!==a;)p.push(n),n=h();e&&null==(p=e(p,c++))||s.push(p)}return s},i.format=function(e){if(Array.isArray(e[0]))return i.formatRows(e);var n=new N,r=[];return e.forEach((function(t){for(var e in t)n.has(e)||r.push(n.add(e))})),[r.map(l).join(t)].concat(e.map((function(e){return r.map((function(t){return l(e[t])})).join(t)}))).join("\n")},i.formatRows=function(t){return t.map(s).join("\n")},i},o.csv=o.dsv(",","text/csv"),o.tsv=o.dsv("\t","text/tab-separated-values");var we,Ae,Me,Ce,Se=this[U(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function ke(t,e,n){var r=arguments.length;r<2&&(e=0),r<3&&(n=Date.now());var i=n+e,o={c:t,t:i,n:null};return Ae?Ae.n=o:we=o,Ae=o,Me||(Ce=clearTimeout(Ce),Me=1,Se(Te)),o}function Te(){var t=De(),e=Le()-t;e>24?(isFinite(e)&&(clearTimeout(Ce),Ce=setTimeout(Te,e)),Me=0):(Me=1,Se(Te))}function De(){for(var t=Date.now(),e=we;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Le(){for(var t,e=we,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:we=e.n;return Ae=t,n}function Pe(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}o.timer=function(){ke.apply(this,arguments)},o.timer.flush=function(){De(),Le()},o.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Ne=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map((function(t,e){var n=Math.pow(10,3*E(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}));function Ie(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,a=r&&n?function(t,e){for(var i=t.length,o=[],a=0,s=r[0],l=0;i>0&&s>0&&(l+s+1>e&&(s=Math.max(1,e-l)),o.push(t.substring(i-=s,i+s)),!((l+=s+1)>e));)s=r[a=(a+1)%r.length];return o.reverse().join(n)}:I;return function(t){var n=Re.exec(t),r=n[1]||" ",s=n[2]||">",l=n[3]||"-",u=n[4]||"",c=n[5],h=+n[6],p=n[7],f=n[8],d=n[9],_=1,g="",y="",m=!1,v=!0;switch(f&&(f=+f.substring(1)),(c||"0"===r&&"="===s)&&(c=r="0",s="="),d){case"n":p=!0,d="g";break;case"%":_=100,y="%",d="f";break;case"p":_=100,y="%",d="r";break;case"b":case"o":case"x":case"X":"#"===u&&(g="0"+d.toLowerCase());case"c":v=!1;case"d":m=!0,f=0;break;case"s":_=-1,d="r"}"$"===u&&(g=i[0],y=i[1]),"r"!=d||f||(d="g"),null!=f&&("g"==d?f=Math.max(1,Math.min(21,f)):"e"!=d&&"f"!=d||(f=Math.max(0,Math.min(20,f)))),d=Ue.get(d)||Oe;var x=c&&p;return function(t){var n=y;if(m&&t%1)return"";var i=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===l?"":l;if(_<0){var u=o.formatPrefix(t,f);t=u.scale(t),n=u.symbol+y}else t*=_;var b,E,w=(t=d(t,f)).lastIndexOf(".");if(w<0){var A=v?t.lastIndexOf("e"):-1;A<0?(b=t,E=""):(b=t.substring(0,A),E=t.substring(A))}else b=t.substring(0,w),E=e+t.substring(w+1);!c&&p&&(b=a(b,1/0));var M=g.length+b.length+E.length+(x?0:i.length),C=M<h?new Array(M=h-M+1).join(r):"";return x&&(b=a(C+b,C.length?h-E.length:1/0)),i+=g,t=b+E,("<"===s?i+t+C:">"===s?C+i+t:"^"===s?C.substring(0,M>>=1)+i+t+C.substring(M):i+(x?t:C+t))+n}}}o.formatPrefix=function(t,e){var n=0;return(t=+t)&&(t<0&&(t*=-1),e&&(t=o.round(t,Pe(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Ne[8+n/3]};var Re=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ue=o.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=o.round(t,Pe(t,e))).toFixed(Math.max(0,Math.min(20,Pe(t*(1+1e-15),e))))}});function Oe(t){return t+""}var Fe=o.time={},Ve=Date;function Be(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Be.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){We.setUTCDate.apply(this._,arguments)},setDay:function(){We.setUTCDay.apply(this._,arguments)},setFullYear:function(){We.setUTCFullYear.apply(this._,arguments)},setHours:function(){We.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){We.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){We.setUTCMinutes.apply(this._,arguments)},setMonth:function(){We.setUTCMonth.apply(this._,arguments)},setSeconds:function(){We.setUTCSeconds.apply(this._,arguments)},setTime:function(){We.setTime.apply(this._,arguments)}};var We=Date.prototype;function Ye(t,e,n){function r(e){var n=t(e),r=o(n,1);return e-n<r-e?n:r}function i(n){return e(n=t(new Ve(n-1)),1),n}function o(t,n){return e(t=new Ve(+t),n),t}function a(t,r,o){var a=i(t),s=[];if(o>1)for(;a<r;)n(a)%o||s.push(new Date(+a)),e(a,1);else for(;a<r;)s.push(new Date(+a)),e(a,1);return s}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=a;var s=t.utc=ze(t);return s.floor=s,s.round=ze(r),s.ceil=ze(i),s.offset=ze(o),s.range=function(t,e,n){try{Ve=Be;var r=new Be;return r._=t,a(r,e,n)}finally{Ve=Date}},t}function ze(t){return function(e,n){try{Ve=Be;var r=new Be;return r._=e,t(r,n)._}finally{Ve=Date}}}function He(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,l=t.months,u=t.shortMonths;function c(t){var e=t.length;function n(n){for(var r,i,o,a=[],s=-1,l=0;++s<e;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(i=je[r=t.charAt(++s)])&&(r=t.charAt(++s)),(o=b[r])&&(r=o(n,null==i?"e"===r?" ":"0":i)),a.push(r),l=s+1);return a.push(t.slice(l,s)),a.join("")}return n.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(h(n,t,e,0)!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=null!=n.Z&&Ve!==Be,i=new(r?Be:Ve);return"j"in n?i.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),i.setFullYear(n.y,0,1),i.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(i.getDay()+5)%7:n.w+7*n.U-(i.getDay()+6)%7)):i.setFullYear(n.y,n.m,n.d),i.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),r?i._:i},n.toString=function(){return t},n}function h(t,e,n,r){for(var i,o,a,s=0,l=e.length,u=n.length;s<l;){if(r>=u)return-1;if(37===(i=e.charCodeAt(s++))){if(a=e.charAt(s++),!(o=E[a in je?e.charAt(s++):a])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}c.utc=function(t){var e=c(t);function n(t){try{var n=new(Ve=Be);return n._=t,e(n)}finally{Ve=Date}}return n.parse=function(t){try{Ve=Be;var n=e.parse(t);return n&&n._}finally{Ve=Date}},n.toString=e.toString,n},c.multi=c.utc.multi=fn;var p=o.map(),f=Ge(a),d=Ze(a),_=Ge(s),g=Ze(s),y=Ge(l),m=Ze(l),v=Ge(u),x=Ze(u);i.forEach((function(t,e){p.set(t.toLowerCase(),e)}));var b={a:function(t){return s[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:c(e),d:function(t,e){return Xe(t.getDate(),e,2)},e:function(t,e){return Xe(t.getDate(),e,2)},H:function(t,e){return Xe(t.getHours(),e,2)},I:function(t,e){return Xe(t.getHours()%12||12,e,2)},j:function(t,e){return Xe(1+Fe.dayOfYear(t),e,3)},L:function(t,e){return Xe(t.getMilliseconds(),e,3)},m:function(t,e){return Xe(t.getMonth()+1,e,2)},M:function(t,e){return Xe(t.getMinutes(),e,2)},p:function(t){return i[+(t.getHours()>=12)]},S:function(t,e){return Xe(t.getSeconds(),e,2)},U:function(t,e){return Xe(Fe.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Xe(Fe.mondayOfYear(t),e,2)},x:c(n),X:c(r),y:function(t,e){return Xe(t.getFullYear()%100,e,2)},Y:function(t,e){return Xe(t.getFullYear()%1e4,e,4)},Z:hn,"%":function(){return"%"}},E={a:function(t,e,n){_.lastIndex=0;var r=_.exec(e.slice(n));return r?(t.w=g.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){f.lastIndex=0;var r=f.exec(e.slice(n));return r?(t.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){v.lastIndex=0;var r=v.exec(e.slice(n));return r?(t.m=x.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){y.lastIndex=0;var r=y.exec(e.slice(n));return r?(t.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,e,n){return h(t,b.c.toString(),e,n)},d:on,e:on,H:sn,I:sn,j:an,L:cn,m:rn,M:ln,p:function(t,e,n){var r=p.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)},S:un,U:$e,w:Qe,W:Je,x:function(t,e,n){return h(t,b.x.toString(),e,n)},X:function(t,e,n){return h(t,b.X.toString(),e,n)},y:en,Y:tn,Z:nn,"%":pn};return c}Fe.year=Ye((function(t){return(t=Fe.day(t)).setMonth(0,1),t}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t){return t.getFullYear()})),Fe.years=Fe.year.range,Fe.years.utc=Fe.year.utc.range,Fe.day=Ye((function(t){var e=new Ve(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t){return t.getDate()-1})),Fe.days=Fe.day.range,Fe.days.utc=Fe.day.utc.range,Fe.dayOfYear=function(t){var e=Fe.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach((function(t,e){e=7-e;var n=Fe[t]=Ye((function(t){return(t=Fe.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t}),(function(t,e){t.setDate(t.getDate()+7*Math.floor(e))}),(function(t){var n=Fe.year(t).getDay();return Math.floor((Fe.dayOfYear(t)+(n+e)%7)/7)-(n!==e)}));Fe[t+"s"]=n.range,Fe[t+"s"].utc=n.utc.range,Fe[t+"OfYear"]=function(t){var n=Fe.year(t).getDay();return Math.floor((Fe.dayOfYear(t)+(n+e)%7)/7)}})),Fe.week=Fe.sunday,Fe.weeks=Fe.sunday.range,Fe.weeks.utc=Fe.sunday.utc.range,Fe.weekOfYear=Fe.sundayOfYear;var je={"-":"",_:" ",0:"0"},Ke=/^\s*\d+/,qe=/^%/;function Xe(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Ge(t){return new RegExp("^(?:"+t.map(o.requote).join("|")+")","i")}function Ze(t){for(var e=new M,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Qe(t,e,n){Ke.lastIndex=0;var r=Ke.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function $e(t,e,n){Ke.lastIndex=0;var r=Ke.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Je(t,e,n){Ke.lastIndex=0;var r=Ke.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function tn(t,e,n){Ke.lastIndex=0;var r=Ke.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function en(t,e,n){Ke.lastIndex=0;var r,i=Ke.exec(e.slice(n,n+2));return i?(t.y=(r=+i[0])+(r>68?1900:2e3),n+i[0].length):-1}function nn(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function rn(t,e,n){Ke.lastIndex=0;var r=Ke.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function on(t,e,n){Ke.lastIndex=0;var r=Ke.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function an(t,e,n){Ke.lastIndex=0;var r=Ke.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function sn(t,e,n){Ke.lastIndex=0;var r=Ke.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function ln(t,e,n){Ke.lastIndex=0;var r=Ke.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function un(t,e,n){Ke.lastIndex=0;var r=Ke.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function cn(t,e,n){Ke.lastIndex=0;var r=Ke.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function hn(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=E(e)/60|0,i=E(e)%60;return n+Xe(r,"0",2)+Xe(i,"0",2)}function pn(t,e,n){qe.lastIndex=0;var r=qe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function fn(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}o.locale=function(t){return{numberFormat:Ie(t),timeFormat:He(t)}};var dn=o.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _n(){}o.format=dn.numberFormat,o.geo={},_n.prototype={s:0,t:0,add:function(t){yn(t,this.t,gn),yn(gn.s,this.s,this),this.s?this.t+=gn.t:this.s=gn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var gn=new _n;function yn(t,e,n){var r=n.s=t+e,i=r-t,o=r-i;n.t=t-o+(e-i)}function mn(t,e){t&&xn.hasOwnProperty(t.type)&&xn[t.type](t,e)}o.geo.stream=function(t,e){t&&vn.hasOwnProperty(t.type)?vn[t.type](t,e):mn(t,e)};var vn={Feature:function(t,e){mn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)mn(n[r].geometry,e)}},xn={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){bn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)bn(n[r],e,0)},Polygon:function(t,e){En(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)En(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)mn(n[r],e)}};function bn(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function En(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)bn(t[n],e,1);e.polygonEnd()}o.geo.area=function(t){return wn=0,o.geo.stream(t,Un),wn};var wn,An,Mn,Cn,Sn,kn,Tn,Dn,Ln,Pn,Nn,In,Rn=new _n,Un={sphere:function(){wn+=4*Dt},point:F,lineStart:F,lineEnd:F,polygonStart:function(){Rn.reset(),Un.lineStart=On},polygonEnd:function(){var t=2*Rn;wn+=t<0?4*Dt+t:t,Un.lineStart=Un.lineEnd=Un.point=F}};function On(){var t,e,n,r,i;function o(t,e){e=e*It/2+Dt/4;var o=(t*=It)-n,a=o>=0?1:-1,s=a*o,l=Math.cos(e),u=Math.sin(e),c=i*u,h=r*l+c*Math.cos(s),p=c*a*Math.sin(s);Rn.add(Math.atan2(p,h)),n=t,r=l,i=u}Un.point=function(a,s){Un.point=o,n=(t=a)*It,r=Math.cos(s=(e=s)*It/2+Dt/4),i=Math.sin(s)},Un.lineEnd=function(){o(t,e)}}function Fn(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function Vn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Bn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Wn(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Yn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function zn(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Hn(t){return[Math.atan2(t[1],t[0]),Vt(t[2])]}function jn(t,e){return E(t[0]-e[0])<kt&&E(t[1]-e[1])<kt}o.geo.bounds=function(){var t,e,n,r,i,a,s,l,u,c,h,p={point:f,lineStart:_,lineEnd:g,polygonStart:function(){p.point=y,p.lineStart=m,p.lineEnd=v,u=0,Un.polygonStart()},polygonEnd:function(){Un.polygonEnd(),p.point=f,p.lineStart=_,p.lineEnd=g,Rn<0?(t=-(n=180),e=-(r=90)):u>kt?r=90:u<-kt&&(e=-90),h[0]=t,h[1]=n}};function f(i,o){c.push(h=[t=i,n=i]),o<e&&(e=o),o>r&&(r=o)}function d(o,a){var s=Fn([o*It,a*It]);if(l){var u=Bn(l,s),c=Bn([u[1],-u[0],0],u);zn(c),c=Hn(c);var h=o-i,p=h>0?1:-1,d=c[0]*Rt*p,_=E(h)>180;if(_^(p*i<d&&d<p*o))(g=c[1]*Rt)>r&&(r=g);else if(_^(p*i<(d=(d+360)%360-180)&&d<p*o)){var g;(g=-c[1]*Rt)<e&&(e=g)}else a<e&&(e=a),a>r&&(r=a);_?o<i?x(t,o)>x(t,n)&&(n=o):x(o,n)>x(t,n)&&(t=o):n>=t?(o<t&&(t=o),o>n&&(n=o)):o>i?x(t,o)>x(t,n)&&(n=o):x(o,n)>x(t,n)&&(t=o)}else f(o,a);l=s,i=o}function _(){p.point=d}function g(){h[0]=t,h[1]=n,p.point=f,l=null}function y(t,e){if(l){var n=t-i;u+=E(n)>180?n+(n>0?360:-360):n}else a=t,s=e;Un.point(t,e),d(t,e)}function m(){Un.lineStart()}function v(){y(a,s),Un.lineEnd(),E(u)>kt&&(t=-(n=180)),h[0]=t,h[1]=n,l=null}function x(t,e){return(e-=t)<0?e+360:e}function b(t,e){return t[0]-e[0]}function w(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(i){if(r=n=-(t=e=1/0),c=[],o.geo.stream(i,p),u=c.length){c.sort(b);for(var a=1,s=[_=c[0]];a<u;++a)w((f=c[a])[0],_)||w(f[1],_)?(x(_[0],f[1])>x(_[0],_[1])&&(_[1]=f[1]),x(f[0],_[1])>x(_[0],_[1])&&(_[0]=f[0])):s.push(_=f);for(var l,u,f,d=-1/0,_=(a=0,s[u=s.length-1]);a<=u;_=f,++a)f=s[a],(l=x(_[1],f[0]))>d&&(d=l,t=f[0],n=_[1])}return c=h=null,t===1/0||e===1/0?[[NaN,NaN],[NaN,NaN]]:[[t,e],[n,r]]}}(),o.geo.centroid=function(t){An=Mn=Cn=Sn=kn=Tn=Dn=Ln=Pn=Nn=In=0,o.geo.stream(t,Kn);var e=Pn,n=Nn,r=In,i=e*e+n*n+r*r;return i<Tt&&(e=Tn,n=Dn,r=Ln,Mn<kt&&(e=Cn,n=Sn,r=kn),(i=e*e+n*n+r*r)<Tt)?[NaN,NaN]:[Math.atan2(n,e)*Rt,Vt(r/Math.sqrt(i))*Rt]};var Kn={sphere:F,point:qn,lineStart:Gn,lineEnd:Zn,polygonStart:function(){Kn.lineStart=Qn},polygonEnd:function(){Kn.lineStart=Gn}};function qn(t,e){t*=It;var n=Math.cos(e*=It);Xn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Xn(t,e,n){++An,Cn+=(t-Cn)/An,Sn+=(e-Sn)/An,kn+=(n-kn)/An}function Gn(){var t,e,n;function r(r,i){r*=It;var o=Math.cos(i*=It),a=o*Math.cos(r),s=o*Math.sin(r),l=Math.sin(i),u=Math.atan2(Math.sqrt((u=e*l-n*s)*u+(u=n*a-t*l)*u+(u=t*s-e*a)*u),t*a+e*s+n*l);Mn+=u,Tn+=u*(t+(t=a)),Dn+=u*(e+(e=s)),Ln+=u*(n+(n=l)),Xn(t,e,n)}Kn.point=function(i,o){i*=It;var a=Math.cos(o*=It);t=a*Math.cos(i),e=a*Math.sin(i),n=Math.sin(o),Kn.point=r,Xn(t,e,n)}}function Zn(){Kn.point=qn}function Qn(){var t,e,n,r,i;function o(t,e){t*=It;var o=Math.cos(e*=It),a=o*Math.cos(t),s=o*Math.sin(t),l=Math.sin(e),u=r*l-i*s,c=i*a-n*l,h=n*s-r*a,p=Math.sqrt(u*u+c*c+h*h),f=n*a+r*s+i*l,d=p&&-Ft(f)/p,_=Math.atan2(p,f);Pn+=d*u,Nn+=d*c,In+=d*h,Mn+=_,Tn+=_*(n+(n=a)),Dn+=_*(r+(r=s)),Ln+=_*(i+(i=l)),Xn(n,r,i)}Kn.point=function(a,s){t=a,e=s,Kn.point=o,a*=It;var l=Math.cos(s*=It);n=l*Math.cos(a),r=l*Math.sin(a),i=Math.sin(s),Xn(n,r,i)},Kn.lineEnd=function(){o(t,e),Kn.lineEnd=Zn,Kn.point=qn}}function $n(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Jn(){return!0}function tr(t,e,n,r,i){var o=[],a=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(jn(n,r)){i.lineStart();for(var s=0;s<e;++s)i.point((n=t[s])[0],n[1]);i.lineEnd()}else{var l=new nr(n,t,null,!0),u=new nr(n,null,l,!1);l.o=u,o.push(l),a.push(u),l=new nr(r,t,null,!1),u=new nr(r,null,l,!0),l.o=u,o.push(l),a.push(u)}}})),a.sort(e),er(o),er(a),o.length){for(var s=0,l=n,u=a.length;s<u;++s)a[s].e=l=!l;for(var c,h,p=o[0];;){for(var f=p,d=!0;f.v;)if((f=f.n)===p)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(s=0,u=c.length;s<u;++s)i.point((h=c[s])[0],h[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(d)for(s=(c=f.p.z).length-1;s>=0;--s)i.point((h=c[s])[0],h[1]);else r(f.x,f.p.x,-1,i);f=f.p}c=(f=f.o).z,d=!d}while(!f.v);i.lineEnd()}}}function er(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function nr(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function rr(t,e,n,r){return function(i,a){var s,l=e(a),u=i.invert(r[0],r[1]),c={point:h,lineStart:f,lineEnd:d,polygonStart:function(){c.point=x,c.lineStart=b,c.lineEnd=E,s=[],_=[]},polygonEnd:function(){c.point=h,c.lineStart=f,c.lineEnd=d,s=o.merge(s);var t=function(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],o=0,a=0;Rn.reset();for(var s=0,l=e.length;s<l;++s){var u=e[s],c=u.length;if(c)for(var h=u[0],p=h[0],f=h[1]/2+Dt/4,d=Math.sin(f),_=Math.cos(f),g=1;;){g===c&&(g=0);var y=(t=u[g])[0],m=t[1]/2+Dt/4,v=Math.sin(m),x=Math.cos(m),b=y-p,E=b>=0?1:-1,w=E*b,A=w>Dt,M=d*v;if(Rn.add(Math.atan2(M*E*Math.sin(w),_*x+M*Math.cos(w))),o+=A?b+E*Lt:b,A^p>=n^y>=n){var C=Bn(Fn(h),Fn(t));zn(C);var S=Bn(i,C);zn(S);var k=(A^b>=0?-1:1)*Vt(S[2]);(r>k||r===k&&(C[0]||C[1]))&&(a+=A^b>=0?1:-1)}if(!g++)break;p=y,d=v,_=x,h=t}}return(o<-kt||o<kt&&Rn<-kt)^1&a}(u,_);s.length?(v||(a.polygonStart(),v=!0),tr(s,ar,t,n,a)):t&&(v||(a.polygonStart(),v=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),v&&(a.polygonEnd(),v=!1),s=_=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function h(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&a.point(e,n)}function p(t,e){var n=i(t,e);l.point(n[0],n[1])}function f(){c.point=p,l.lineStart()}function d(){c.point=h,l.lineEnd()}var _,g,y=or(),m=e(y),v=!1;function x(t,e){g.push([t,e]);var n=i(t,e);m.point(n[0],n[1])}function b(){m.lineStart(),g=[]}function E(){x(g[0][0],g[0][1]),m.lineEnd();var t,e=m.clean(),n=y.buffer(),r=n.length;if(g.pop(),_.push(g),g=null,r)if(1&e){var i,o=-1;if((r=(t=n[0]).length-1)>0){for(v||(a.polygonStart(),v=!0),a.lineStart();++o<r;)a.point((i=t[o])[0],i[1]);a.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),s.push(n.filter(ir))}return c}}function ir(t){return t.length>1}function or(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:F,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function ar(t,e){return((t=t.x)[0]<0?t[1]-Nt-kt:Nt-t[1])-((e=e.x)[0]<0?e[1]-Nt-kt:Nt-e[1])}var sr=rr(Jn,(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Dt:-Dt,l=E(o-n);E(l-Dt)<kt?(t.point(n,r=(r+a)/2>0?Nt:-Nt),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&l>=Dt&&(E(n-i)<kt&&(n-=i*kt),E(o-s)<kt&&(o-=s*kt),r=function(t,e,n,r){var i,o,a=Math.sin(t-n);return E(a)>kt?Math.atan((Math.sin(e)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*Nt,r.point(-Dt,i),r.point(0,i),r.point(Dt,i),r.point(Dt,0),r.point(Dt,-i),r.point(0,-i),r.point(-Dt,-i),r.point(-Dt,0),r.point(-Dt,i);else if(E(t[0]-e[0])>kt){var o=t[0]<e[0]?Dt:-Dt;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-Dt,-Dt/2]);function lr(t){var e=Math.cos(t),n=e>0,r=E(e)>kt;return rr(i,(function(t){var e,s,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(h,p){var f,d=[h,p],_=i(h,p),g=n?_?0:a(h,p):_?a(h+(h<0?Dt:-Dt),p):0;if(!e&&(u=l=_)&&t.lineStart(),_!==l&&(f=o(e,d),(jn(e,f)||jn(d,f))&&(d[0]+=kt,d[1]+=kt,_=i(d[0],d[1]))),_!==l)c=0,_?(t.lineStart(),f=o(d,e),t.point(f[0],f[1])):(f=o(e,d),t.point(f[0],f[1]),t.lineEnd()),e=f;else if(r&&e&&n^_){var y;g&s||!(y=o(d,e,!0))||(c=0,n?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!_||e&&jn(e,d)||t.point(d[0],d[1]),e=d,l=_,s=g},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return c|(u&&l)<<1}}}),jr(t,6*It),n?[0,-t]:[-Dt,t-Dt]);function i(t,n){return Math.cos(t)*Math.cos(n)>e}function o(t,n,r){var i=[1,0,0],o=Bn(Fn(t),Fn(n)),a=Vn(o,o),s=o[0],l=a-s*s;if(!l)return!r&&t;var u=e*a/l,c=-e*s/l,h=Bn(i,o),p=Yn(i,u);Wn(p,Yn(o,c));var f=h,d=Vn(p,f),_=Vn(f,f),g=d*d-_*(Vn(p,p)-1);if(!(g<0)){var y=Math.sqrt(g),m=Yn(f,(-d-y)/_);if(Wn(m,p),m=Hn(m),!r)return m;var v,x=t[0],b=n[0],w=t[1],A=n[1];b<x&&(v=x,x=b,b=v);var M=b-x,C=E(M-Dt)<kt;if(!C&&A<w&&(v=w,w=A,A=v),C||M<kt?C?w+A>0^m[1]<(E(m[0]-x)<kt?w:A):w<=m[1]&&m[1]<=A:M>Dt^(x<=m[0]&&m[0]<=b)){var S=Yn(f,(-d+y)/_);return Wn(S,p),[m,Hn(S)]}}}function a(e,r){var i=n?t:Dt-t,o=0;return e<-i?o|=1:e>i&&(o|=2),r<-i?o|=4:r>i&&(o|=8),o}}function ur(t,e,n,r){return function(i){var o,a=i.a,s=i.b,l=a.x,u=a.y,c=0,h=1,p=s.x-l,f=s.y-u;if(o=t-l,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>c&&(c=o)}if(o=n-l,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<h&&(h=o)}if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>c&&(c=o)}if(o=r-u,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<h&&(h=o)}return c>0&&(i.a={x:l+c*p,y:u+c*f}),h<1&&(i.b={x:l+h*p,y:u+h*f}),i}}}}}}var cr=1e9;function hr(t,e,n,r){return function(l){var u,c,h,p,f,d,_,g,y,m,v,x=l,b=or(),E=ur(t,e,n,r),w={point:C,lineStart:function(){w.point=S,c&&c.push(h=[]),m=!0,y=!1,_=g=NaN},lineEnd:function(){u&&(S(p,f),d&&y&&b.rejoin(),u.push(b.buffer())),w.point=C,y&&l.lineEnd()},polygonStart:function(){l=b,u=[],c=[],v=!0},polygonEnd:function(){l=x,u=o.merge(u);var e=function(t){for(var e=0,n=c.length,r=t[1],i=0;i<n;++i)for(var o,a=1,s=c[i],l=s.length,u=s[0];a<l;++a)o=s[a],u[1]<=r?o[1]>r&&Ot(u,o,t)>0&&++e:o[1]<=r&&Ot(u,o,t)<0&&--e,u=o;return 0!==e}([t,r]),n=v&&e,i=u.length;(n||i)&&(l.polygonStart(),n&&(l.lineStart(),A(null,null,1,l),l.lineEnd()),i&&tr(u,a,e,A,l),l.polygonEnd()),u=c=h=null}};function A(o,a,l,u){var c=0,h=0;if(null==o||(c=i(o,l))!==(h=i(a,l))||s(o,a)<0^l>0)do{u.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+l+4)%4)!==h);else u.point(a[0],a[1])}function M(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function C(t,e){M(t,e)&&l.point(t,e)}function S(t,e){var n=M(t=Math.max(-1e9,Math.min(cr,t)),e=Math.max(-1e9,Math.min(cr,e)));if(c&&h.push([t,e]),m)p=t,f=e,d=n,m=!1,n&&(l.lineStart(),l.point(t,e));else if(n&&y)l.point(t,e);else{var r={a:{x:_,y:g},b:{x:t,y:e}};E(r)?(y||(l.lineStart(),l.point(r.a.x,r.a.y)),l.point(r.b.x,r.b.y),n||l.lineEnd(),v=!1):n&&(l.lineStart(),l.point(t,e),v=!1)}_=t,g=e,y=n}return w};function i(r,i){return E(r[0]-t)<kt?i>0?0:3:E(r[0]-n)<kt?i>0?2:1:E(r[1]-e)<kt?i>0?1:0:i>0?3:2}function a(t,e){return s(t.x,e.x)}function s(t,e){var n=i(t,1),r=i(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}}function pr(t){var e=0,n=Dt/3,r=Or(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Dt/180,n=t[1]*Dt/180):[e/Dt*180,n/Dt*180]},i}function fr(t,e){var n=Math.sin(t),r=(n+Math.sin(e))/2,i=1+n*(2*r-n),o=Math.sqrt(i)/r;function a(t,e){var n=Math.sqrt(i-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),o-n*Math.cos(t)]}return a.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,Vt((i-(t*t+n*n)*r*r)/(2*r))]},a}o.geo.clipExtent=function(){var t,e,n,r,i,o,a={stream:function(t){return i&&(i.valid=!1),(i=o(t)).valid=!0,i},extent:function(s){return arguments.length?(o=hr(t=+s[0][0],e=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),a):[[t,e],[n,r]]}};return a.extent([[0,0],[960,500]])},(o.geo.conicEqualArea=function(){return pr(fr)}).raw=fr,o.geo.albers=function(){return o.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},o.geo.albersUsa=function(){var t,e,n,r,i=o.geo.albers(),a=o.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=o.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,n){t=[e,n]}};function u(i){var o=i[0],a=i[1];return t=null,e(o,a),t||(n(o,a),t)||r(o,a),t}return u.invert=function(t){var e=i.scale(),n=i.translate(),r=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(o>=.12&&o<.234&&r>=-.425&&r<-.214?a:o>=.166&&o<.234&&r>=-.214&&r<-.115?s:i).invert(t)},u.stream=function(t){var e=i.stream(t),n=a.stream(t),r=s.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},u.precision=function(t){return arguments.length?(i.precision(t),a.precision(t),s.precision(t),u):i.precision()},u.scale=function(t){return arguments.length?(i.scale(t),a.scale(.35*t),s.scale(t),u.translate(i.translate())):i.scale()},u.translate=function(t){if(!arguments.length)return i.translate();var o=i.scale(),c=+t[0],h=+t[1];return e=i.translate(t).clipExtent([[c-.455*o,h-.238*o],[c+.455*o,h+.238*o]]).stream(l).point,n=a.translate([c-.307*o,h+.201*o]).clipExtent([[c-.425*o+kt,h+.12*o+kt],[c-.214*o-kt,h+.234*o-kt]]).stream(l).point,r=s.translate([c-.205*o,h+.212*o]).clipExtent([[c-.214*o+kt,h+.166*o+kt],[c-.115*o-kt,h+.234*o-kt]]).stream(l).point,u},u.scale(1070)};var dr,_r,gr,yr,mr,vr,xr={point:F,lineStart:F,lineEnd:F,polygonStart:function(){_r=0,xr.lineStart=br},polygonEnd:function(){xr.lineStart=xr.lineEnd=xr.point=F,dr+=E(_r/2)}};function br(){var t,e,n,r;function i(t,e){_r+=r*t-n*e,n=t,r=e}xr.point=function(o,a){xr.point=i,t=n=o,e=r=a},xr.lineEnd=function(){i(t,e)}}var Er={point:function(t,e){t<gr&&(gr=t),t>mr&&(mr=t),e<yr&&(yr=e),e>vr&&(vr=e)},lineStart:F,lineEnd:F,polygonStart:F,polygonEnd:F};function wr(){var t=Ar(4.5),e=[],n={point:r,lineStart:function(){n.point=i},lineEnd:a,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=a,n.point=r},pointRadius:function(e){return t=Ar(e),n},result:function(){if(e.length){var t=e.join("");return e=[],t}}};function r(n,r){e.push("M",n,",",r,t)}function i(t,r){e.push("M",t,",",r),n.point=o}function o(t,n){e.push("L",t,",",n)}function a(){n.point=r}function s(){e.push("Z")}return n}function Ar(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var Mr,Cr={point:Sr,lineStart:kr,lineEnd:Tr,polygonStart:function(){Cr.lineStart=Dr},polygonEnd:function(){Cr.point=Sr,Cr.lineStart=kr,Cr.lineEnd=Tr}};function Sr(t,e){Cn+=t,Sn+=e,++kn}function kr(){var t,e;function n(n,r){var i=n-t,o=r-e,a=Math.sqrt(i*i+o*o);Tn+=a*(t+n)/2,Dn+=a*(e+r)/2,Ln+=a,Sr(t=n,e=r)}Cr.point=function(r,i){Cr.point=n,Sr(t=r,e=i)}}function Tr(){Cr.point=Sr}function Dr(){var t,e,n,r;function i(t,e){var i=t-n,o=e-r,a=Math.sqrt(i*i+o*o);Tn+=a*(n+t)/2,Dn+=a*(r+e)/2,Ln+=a,Pn+=(a=r*t-n*e)*(n+t),Nn+=a*(r+e),In+=3*a,Sr(n=t,r=e)}Cr.point=function(o,a){Cr.point=i,Sr(t=n=o,e=r=a)},Cr.lineEnd=function(){i(t,e)}}function Lr(t){var e=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:a,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=a,n.point=r},pointRadius:function(t){return e=t,n},result:F};function r(n,r){t.moveTo(n+e,r),t.arc(n,r,e,0,Lt)}function i(e,r){t.moveTo(e,r),n.point=o}function o(e,n){t.lineTo(e,n)}function a(){n.point=r}function s(){t.closePath()}return n}function Pr(t){var e=.5,n=Math.cos(30*It),r=16;function i(t){return(r?a:o)(t)}function o(e){return Rr(e,(function(n,r){n=t(n,r),e.point(n[0],n[1])}))}function a(e){var n,i,o,a,l,u,c,h,p,f,d,_,g={point:y,lineStart:m,lineEnd:x,polygonStart:function(){e.polygonStart(),g.lineStart=b},polygonEnd:function(){e.polygonEnd(),g.lineStart=m}};function y(n,r){n=t(n,r),e.point(n[0],n[1])}function m(){h=NaN,g.point=v,e.lineStart()}function v(n,i){var o=Fn([n,i]),a=t(n,i);s(h,p,c,f,d,_,h=a[0],p=a[1],c=n,f=o[0],d=o[1],_=o[2],r,e),e.point(h,p)}function x(){g.point=y,e.lineEnd()}function b(){m(),g.point=E,g.lineEnd=w}function E(t,e){v(n=t,e),i=h,o=p,a=f,l=d,u=_,g.point=v}function w(){s(h,p,c,f,d,_,i,o,n,a,l,u,r,e),g.lineEnd=x,x()}return g}function s(r,i,o,a,l,u,c,h,p,f,d,_,g,y){var m=c-r,v=h-i,x=m*m+v*v;if(x>4*e&&g--){var b=a+f,w=l+d,A=u+_,M=Math.sqrt(b*b+w*w+A*A),C=Math.asin(A/=M),S=E(E(A)-1)<kt||E(o-p)<kt?(o+p)/2:Math.atan2(w,b),k=t(S,C),T=k[0],D=k[1],L=T-r,P=D-i,N=v*L-m*P;(N*N/x>e||E((m*L+v*P)/x-.5)>.3||a*f+l*d+u*_<n)&&(s(r,i,o,a,l,u,T,D,S,b/=M,w/=M,A,g,y),y.point(T,D),s(T,D,S,b,w,A,c,h,p,f,d,_,g,y))}}return i.precision=function(t){return arguments.length?(r=(e=t*t)>0&&16,i):Math.sqrt(e)},i}function Nr(t){var e=Pr((function(e,n){return t([e*Rt,n*Rt])}));return function(t){return Fr(e(t))}}function Ir(t){this.stream=t}function Rr(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Ur(t){return Or((function(){return t}))()}function Or(t){var e,n,r,i,a,s,l=Pr((function(t,n){return[(t=e(t,n))[0]*u+i,a-t[1]*u]})),u=150,c=480,h=250,p=0,f=0,d=0,_=0,g=0,y=sr,m=I,v=null,x=null;function b(t){return[(t=r(t[0]*It,t[1]*It))[0]*u+i,a-t[1]*u]}function E(t){return(t=r.invert((t[0]-i)/u,(a-t[1])/u))&&[t[0]*Rt,t[1]*Rt]}function w(){r=$n(n=Wr(d,_,g),e);var t=e(p,f);return i=c-t[0]*u,a=h+t[1]*u,A()}function A(){return s&&(s.valid=!1,s=null),b}return b.stream=function(t){return s&&(s.valid=!1),(s=Fr(y(n,l(m(t))))).valid=!0,s},b.clipAngle=function(t){return arguments.length?(y=null==t?(v=t,sr):lr((v=+t)*It),A()):v},b.clipExtent=function(t){return arguments.length?(x=t,m=t?hr(t[0][0],t[0][1],t[1][0],t[1][1]):I,A()):x},b.scale=function(t){return arguments.length?(u=+t,w()):u},b.translate=function(t){return arguments.length?(c=+t[0],h=+t[1],w()):[c,h]},b.center=function(t){return arguments.length?(p=t[0]%360*It,f=t[1]%360*It,w()):[p*Rt,f*Rt]},b.rotate=function(t){return arguments.length?(d=t[0]%360*It,_=t[1]%360*It,g=t.length>2?t[2]%360*It:0,w()):[d*Rt,_*Rt,g*Rt]},o.rebind(b,l,"precision"),function(){return e=t.apply(this,arguments),b.invert=e.invert&&E,w()}}function Fr(t){return Rr(t,(function(e,n){t.point(e*It,n*It)}))}function Vr(t,e){return[t,e]}function Br(t,e){return[t>Dt?t-Lt:t<-Dt?t+Lt:t,e]}function Wr(t,e,n){return t?e||n?$n(zr(t),Hr(e,n)):zr(t):e||n?Hr(e,n):Br}function Yr(t){return function(e,n){return[(e+=t)>Dt?e-Lt:e<-Dt?e+Lt:e,n]}}function zr(t){var e=Yr(t);return e.invert=Yr(-t),e}function Hr(t,e){var n=Math.cos(t),r=Math.sin(t),i=Math.cos(e),o=Math.sin(e);function a(t,e){var a=Math.cos(e),s=Math.cos(t)*a,l=Math.sin(t)*a,u=Math.sin(e),c=u*n+s*r;return[Math.atan2(l*i-c*o,s*n-u*r),Vt(c*i+l*o)]}return a.invert=function(t,e){var a=Math.cos(e),s=Math.cos(t)*a,l=Math.sin(t)*a,u=Math.sin(e),c=u*i-l*o;return[Math.atan2(l*i+u*o,s*n+c*r),Vt(c*n-s*r)]},a}function jr(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,o,a,s){var l=a*e;null!=i?(i=Kr(n,i),o=Kr(n,o),(a>0?i<o:i>o)&&(i+=a*Lt)):(i=t+a*Lt,o=t-.5*l);for(var u,c=i;a>0?c>o:c<o;c-=l)s.point((u=Hn([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],u[1])}}function Kr(t,e){var n=Fn(e);n[0]-=t,zn(n);var r=Ft(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-kt)%(2*Math.PI)}function qr(t,e,n){var r=o.range(t,e-kt,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function Xr(t,e,n){var r=o.range(t,e-kt,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function Gr(t){return t.source}function Zr(t){return t.target}o.geo.path=function(){var t,e,n,r,i,a=4.5;function s(t){return t&&("function"==typeof a&&r.pointRadius(+a.apply(this,arguments)),i&&i.valid||(i=n(r)),o.geo.stream(t,i)),r.result()}function l(){return i=null,s}return s.area=function(t){return dr=0,o.geo.stream(t,n(xr)),dr},s.centroid=function(t){return Cn=Sn=kn=Tn=Dn=Ln=Pn=Nn=In=0,o.geo.stream(t,n(Cr)),In?[Pn/In,Nn/In]:Ln?[Tn/Ln,Dn/Ln]:kn?[Cn/kn,Sn/kn]:[NaN,NaN]},s.bounds=function(t){return mr=vr=-(gr=yr=1/0),o.geo.stream(t,n(Er)),[[gr,yr],[mr,vr]]},s.projection=function(e){return arguments.length?(n=(t=e)?e.stream||Nr(e):I,l()):t},s.context=function(t){return arguments.length?(r=null==(e=t)?new wr:new Lr(t),"function"!=typeof a&&r.pointRadius(a),l()):e},s.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(r.pointRadius(+t),+t),s):a},s.projection(o.geo.albersUsa()).context(null)},o.geo.transform=function(t){return{stream:function(e){var n=new Ir(e);for(var r in t)n[r]=t[r];return n}}},Ir.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},o.geo.projection=Ur,o.geo.projectionMutator=Or,(o.geo.equirectangular=function(){return Ur(Vr)}).raw=Vr.invert=Vr,o.geo.rotation=function(t){function e(e){return(e=t(e[0]*It,e[1]*It))[0]*=Rt,e[1]*=Rt,e}return t=Wr(t[0]%360*It,t[1]*It,t.length>2?t[2]*It:0),e.invert=function(e){return(e=t.invert(e[0]*It,e[1]*It))[0]*=Rt,e[1]*=Rt,e},e},Br.invert=Vr,o.geo.circle=function(){var t,e,n=[0,0],r=6;function i(){var t="function"==typeof n?n.apply(this,arguments):n,r=Wr(-t[0]*It,-t[1]*It,0).invert,i=[];return e(null,null,1,{point:function(t,e){i.push(t=r(t,e)),t[0]*=Rt,t[1]*=Rt}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(t){return arguments.length?(n=t,i):n},i.angle=function(n){return arguments.length?(e=jr((t=+n)*It,r*It),i):t},i.precision=function(n){return arguments.length?(e=jr(t*It,(r=+n)*It),i):r},i.angle(90)},o.geo.distance=function(t,e){var n,r=(e[0]-t[0])*It,i=t[1]*It,o=e[1]*It,a=Math.sin(r),s=Math.cos(r),l=Math.sin(i),u=Math.cos(i),c=Math.sin(o),h=Math.cos(o);return Math.atan2(Math.sqrt((n=h*a)*n+(n=u*c-l*h*s)*n),l*c+u*h*s)},o.geo.graticule=function(){var t,e,n,r,i,a,s,l,u,c,h,p,f=10,d=f,_=90,g=360,y=2.5;function m(){return{type:"MultiLineString",coordinates:v()}}function v(){return o.range(Math.ceil(r/_)*_,n,_).map(h).concat(o.range(Math.ceil(l/g)*g,s,g).map(p)).concat(o.range(Math.ceil(e/f)*f,t,f).filter((function(t){return E(t%_)>kt})).map(u)).concat(o.range(Math.ceil(a/d)*d,i,d).filter((function(t){return E(t%g)>kt})).map(c))}return m.lines=function(){return v().map((function(t){return{type:"LineString",coordinates:t}}))},m.outline=function(){return{type:"Polygon",coordinates:[h(r).concat(p(s).slice(1),h(n).reverse().slice(1),p(l).reverse().slice(1))]}},m.extent=function(t){return arguments.length?m.majorExtent(t).minorExtent(t):m.minorExtent()},m.majorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],l=+t[0][1],s=+t[1][1],r>n&&(t=r,r=n,n=t),l>s&&(t=l,l=s,s=t),m.precision(y)):[[r,l],[n,s]]},m.minorExtent=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],a=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),a>i&&(n=a,a=i,i=n),m.precision(y)):[[e,a],[t,i]]},m.step=function(t){return arguments.length?m.majorStep(t).minorStep(t):m.minorStep()},m.majorStep=function(t){return arguments.length?(_=+t[0],g=+t[1],m):[_,g]},m.minorStep=function(t){return arguments.length?(f=+t[0],d=+t[1],m):[f,d]},m.precision=function(o){return arguments.length?(y=+o,u=qr(a,i,90),c=Xr(e,t,y),h=qr(l,s,90),p=Xr(r,n,y),m):y},m.majorExtent([[-180,-90+kt],[180,90-kt]]).minorExtent([[-180,-80-kt],[180,80+kt]])},o.geo.greatArc=function(){var t,e,n=Gr,r=Zr;function i(){return{type:"LineString",coordinates:[t||n.apply(this,arguments),e||r.apply(this,arguments)]}}return i.distance=function(){return o.geo.distance(t||n.apply(this,arguments),e||r.apply(this,arguments))},i.source=function(e){return arguments.length?(n=e,t="function"==typeof e?null:e,i):n},i.target=function(t){return arguments.length?(r=t,e="function"==typeof t?null:t,i):r},i.precision=function(){return arguments.length?i:0},i},o.geo.interpolate=function(t,e){return n=t[0]*It,r=t[1]*It,i=e[0]*It,o=e[1]*It,a=Math.cos(r),s=Math.sin(r),l=Math.cos(o),u=Math.sin(o),c=a*Math.cos(n),h=a*Math.sin(n),p=l*Math.cos(i),f=l*Math.sin(i),d=2*Math.asin(Math.sqrt(Wt(o-r)+a*l*Wt(i-n))),_=1/Math.sin(d),(g=d?function(t){var e=Math.sin(t*=d)*_,n=Math.sin(d-t)*_,r=n*c+e*p,i=n*h+e*f,o=n*s+e*u;return[Math.atan2(i,r)*Rt,Math.atan2(o,Math.sqrt(r*r+i*i))*Rt]}:function(){return[n*Rt,r*Rt]}).distance=d,g;var n,r,i,o,a,s,l,u,c,h,p,f,d,_,g},o.geo.length=function(t){return Mr=0,o.geo.stream(t,Qr),Mr};var Qr={sphere:F,point:F,lineStart:function(){var t,e,n;function r(r,i){var o=Math.sin(i*=It),a=Math.cos(i),s=E((r*=It)-t),l=Math.cos(s);Mr+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=n*o-e*a*l)*s),e*o+n*a*l),t=r,e=o,n=a}Qr.point=function(i,o){t=i*It,e=Math.sin(o*=It),n=Math.cos(o),Qr.point=r},Qr.lineEnd=function(){Qr.point=Qr.lineEnd=F}},lineEnd:F,polygonStart:F,polygonEnd:F};function $r(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),o=t(r*i);return[o*i*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,r*a),Math.asin(r&&n*o/r)]},n}var Jr=$r((function(t){return Math.sqrt(2/(1+t))}),(function(t){return 2*Math.asin(t/2)}));(o.geo.azimuthalEqualArea=function(){return Ur(Jr)}).raw=Jr;var ti=$r((function(t){var e=Math.acos(t);return e&&e/Math.sin(e)}),I);function ei(t,e){var n=Math.cos(t),r=function(t){return Math.tan(Dt/4+t/2)},i=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(r(e)/r(t)),o=n*Math.pow(r(t),i)/i;if(!i)return ii;function a(t,e){o>0?e<-Nt+kt&&(e=-Nt+kt):e>Nt-kt&&(e=Nt-kt);var n=o/Math.pow(r(e),i);return[n*Math.sin(i*t),o-n*Math.cos(i*t)]}return a.invert=function(t,e){var n=o-e,r=Ut(i)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/i,2*Math.atan(Math.pow(o/r,1/i))-Nt]},a}function ni(t,e){var n=Math.cos(t),r=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),i=n/r+t;if(E(r)<kt)return Vr;function o(t,e){var n=i-e;return[n*Math.sin(r*t),i-n*Math.cos(r*t)]}return o.invert=function(t,e){var n=i-e;return[Math.atan2(t,n)/r,i-Ut(r)*Math.sqrt(t*t+n*n)]},o}(o.geo.azimuthalEquidistant=function(){return Ur(ti)}).raw=ti,(o.geo.conicConformal=function(){return pr(ei)}).raw=ei,(o.geo.conicEquidistant=function(){return pr(ni)}).raw=ni;var ri=$r((function(t){return 1/t}),Math.atan);function ii(t,e){return[t,Math.log(Math.tan(Dt/4+e/2))]}function oi(t){var e,n=Ur(t),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var a=o.apply(n,arguments);if(a===n){if(e=null==t){var s=Dt*r(),l=i();o([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(a=null);return a},n.clipExtent(null)}(o.geo.gnomonic=function(){return Ur(ri)}).raw=ri,ii.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Nt]},(o.geo.mercator=function(){return oi(ii)}).raw=ii;var ai=$r((function(){return 1}),Math.asin);(o.geo.orthographic=function(){return Ur(ai)}).raw=ai;var si=$r((function(t){return 1/(1+t)}),(function(t){return 2*Math.atan(t)}));function li(t,e){return[Math.log(Math.tan(Dt/4+e/2)),-t]}function ui(t){return t[0]}function ci(t){return t[1]}function hi(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;i++){for(;r>1&&Ot(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function pi(t,e){return t[0]-e[0]||t[1]-e[1]}(o.geo.stereographic=function(){return Ur(si)}).raw=si,li.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Nt]},(o.geo.transverseMercator=function(){var t=oi(li),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=li,o.geom={},o.geom.hull=function(t){var e=ui,n=ci;if(arguments.length)return r(t);function r(t){if(t.length<3)return[];var r,i=xe(e),o=xe(n),a=t.length,s=[],l=[];for(r=0;r<a;r++)s.push([+i.call(this,t[r],r),+o.call(this,t[r],r),r]);for(s.sort(pi),r=0;r<a;r++)l.push([s[r][0],-s[r][1]]);var u=hi(s),c=hi(l),h=c[0]===u[0],p=c[c.length-1]===u[u.length-1],f=[];for(r=u.length-1;r>=0;--r)f.push(t[s[u[r]][2]]);for(r=+h;r<c.length-p;++r)f.push(t[s[c[r]][2]]);return f}return r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(t){return arguments.length?(n=t,r):n},r},o.geom.polygon=function(t){return j(t,fi),t};var fi=o.geom.polygon.prototype=[];function di(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function _i(t,e,n,r){var i=t[0],o=n[0],a=e[0]-i,s=r[0]-o,l=t[1],u=n[1],c=e[1]-l,h=r[1]-u,p=(s*(l-u)-h*(i-o))/(h*a-s*c);return[i+p*a,l+p*c]}function gi(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}fi.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)t=r,r=this[e],i+=t[1]*r[0]-t[0]*r[1];return.5*i},fi.centroid=function(t){var e,n,r=-1,i=this.length,o=0,a=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)e=s,s=this[r],n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o*t,a*t]},fi.clip=function(t){for(var e,n,r,i,o,a,s=gi(t),l=-1,u=this.length-gi(this),c=this[u-1];++l<u;){for(e=t.slice(),t.length=0,i=this[l],o=e[(r=e.length-s)-1],n=-1;++n<r;)di(a=e[n],c,i)?(di(o,c,i)||t.push(_i(o,a,c,i)),t.push(a)):di(o,c,i)&&t.push(_i(o,a,c,i)),o=a;s&&t.push(t[0]),c=i}return t};var yi,mi,vi,xi,bi,Ei=[],wi=[];function Ai(){Yi(this),this.edge=this.site=this.circle=null}function Mi(t){var e=Ei.pop()||new Ai;return e.site=t,e}function Ci(t){Ri(t),vi.remove(t),Ei.push(t),Yi(t)}function Si(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},o=t.P,a=t.N,s=[t];Ci(t);for(var l=o;l.circle&&E(n-l.circle.x)<kt&&E(r-l.circle.cy)<kt;)o=l.P,s.unshift(l),Ci(l),l=o;s.unshift(l),Ri(l);for(var u=a;u.circle&&E(n-u.circle.x)<kt&&E(r-u.circle.cy)<kt;)a=u.N,s.push(u),Ci(u),u=a;s.push(u),Ri(u);var c,h=s.length;for(c=1;c<h;++c)u=s[c],l=s[c-1],Vi(u.edge,l.site,u.site,i);l=s[0],(u=s[h-1]).edge=Fi(l.site,u.site,null,i),Ii(l),Ii(u)}function ki(t){for(var e,n,r,i,o=t.x,a=t.y,s=vi._;s;)if((r=Ti(s,a)-o)>kt)s=s.L;else{if(!((i=o-Di(s,a))>kt)){r>-kt?(e=s.P,n=s):i>-kt?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var l=Mi(t);if(vi.insert(e,l),e||n){if(e===n)return Ri(e),n=Mi(e.site),vi.insert(l,n),l.edge=n.edge=Fi(e.site,l.site),Ii(e),void Ii(n);if(n){Ri(e),Ri(n);var u=e.site,c=u.x,h=u.y,p=t.x-c,f=t.y-h,d=n.site,_=d.x-c,g=d.y-h,y=2*(p*g-f*_),m=p*p+f*f,v=_*_+g*g,x={x:(g*m-f*v)/y+c,y:(p*v-_*m)/y+h};Vi(n.edge,u,d,x),l.edge=Fi(u,t,null,x),n.edge=Fi(t,d,null,x),Ii(e),Ii(n)}else l.edge=Fi(e.site,l.site)}}function Ti(t,e){var n=t.site,r=n.x,i=n.y,o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site).x,l=n.y,u=l-e;if(!u)return s;var c=s-r,h=1/o-1/u,p=c/u;return h?(-p+Math.sqrt(p*p-2*h*(c*c/(-2*u)-l+u/2+i-o/2)))/h+r:(r+s)/2}function Di(t,e){var n=t.N;if(n)return Ti(n,e);var r=t.site;return r.y===e?r.x:1/0}function Li(t){this.site=t,this.edges=[]}function Pi(t,e){return e.angle-t.angle}function Ni(){Yi(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ii(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i.x,s=i.y,l=r.x-a,u=r.y-s,c=o.x-a,h=2*(l*(g=o.y-s)-u*c);if(!(h>=-Tt)){var p=l*l+u*u,f=c*c+g*g,d=(g*p-u*f)/h,_=(l*f-c*p)/h,g=_+s,y=wi.pop()||new Ni;y.arc=t,y.site=i,y.x=d+a,y.y=g+Math.sqrt(d*d+_*_),y.cy=g,t.circle=y;for(var m=null,v=bi._;v;)if(y.y<v.y||y.y===v.y&&y.x<=v.x){if(!v.L){m=v.P;break}v=v.L}else{if(!v.R){m=v;break}v=v.R}bi.insert(m,y),m||(xi=y)}}}}function Ri(t){var e=t.circle;e&&(e.P||(xi=e.N),bi.remove(e),wi.push(e),Yi(e),t.circle=null)}function Ui(t,e){var n=t.b;if(n)return!0;var r,i,o=t.a,a=e[0][0],s=e[1][0],l=e[0][1],u=e[1][1],c=t.l,h=t.r,p=c.x,f=c.y,d=h.x,_=h.y,g=(p+d)/2,y=(f+_)/2;if(_===f){if(g<a||g>=s)return;if(p>d){if(o){if(o.y>=u)return}else o={x:g,y:l};n={x:g,y:u}}else{if(o){if(o.y<l)return}else o={x:g,y:u};n={x:g,y:l}}}else if(i=y-(r=(p-d)/(_-f))*g,r<-1||r>1)if(p>d){if(o){if(o.y>=u)return}else o={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else{if(o){if(o.y<l)return}else o={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else if(f<_){if(o){if(o.x>=s)return}else o={x:a,y:r*a+i};n={x:s,y:r*s+i}}else{if(o){if(o.x<a)return}else o={x:s,y:r*s+i};n={x:a,y:r*a+i}}return t.a=o,t.b=n,!0}function Oi(t,e){this.l=t,this.r=e,this.a=this.b=null}function Fi(t,e,n,r){var i=new Oi(t,e);return yi.push(i),n&&Vi(i,t,e,n),r&&Vi(i,e,t,r),mi[t.i].edges.push(new Bi(i,t,e)),mi[e.i].edges.push(new Bi(i,e,t)),i}function Vi(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function Bi(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Wi(){this._=null}function Yi(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function zi(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Hi(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ji(t){for(;t.L;)t=t.L;return t}function Ki(t,e){var n,r,i,o=t.sort(qi).pop();for(yi=[],mi=new Array(t.length),vi=new Wi,bi=new Wi;;)if(i=xi,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===n&&o.y===r||(mi[o.i]=new Li(o),ki(o),n=o.x,r=o.y),o=t.pop();else{if(!i)break;Si(i.arc)}e&&(function(t){for(var e,n=yi,r=ur(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)(!Ui(e=n[i],t)||!r(e)||E(e.a.x-e.b.x)<kt&&E(e.a.y-e.b.y)<kt)&&(e.a=e.b=null,n.splice(i,1))}(e),function(t){for(var e,n,r,i,o,a,s,l,u,c,h=t[0][0],p=t[1][0],f=t[0][1],d=t[1][1],_=mi,g=_.length;g--;)if((o=_[g])&&o.prepare())for(l=(s=o.edges).length,a=0;a<l;)r=(c=s[a].end()).x,i=c.y,e=(u=s[++a%l].start()).x,n=u.y,(E(r-e)>kt||E(i-n)>kt)&&(s.splice(a,0,new Bi((y=o.site,m=c,v=E(r-h)<kt&&d-i>kt?{x:h,y:E(e-h)<kt?n:d}:E(i-d)<kt&&p-r>kt?{x:E(n-d)<kt?e:p,y:d}:E(r-p)<kt&&i-f>kt?{x:p,y:E(e-p)<kt?n:f}:E(i-f)<kt&&r-h>kt?{x:E(n-f)<kt?e:h,y:f}:null,x=void 0,(x=new Oi(y,null)).a=m,x.b=v,yi.push(x),x),o.site,null)),++l);var y,m,v,x}(e));var a={cells:mi,edges:yi};return vi=bi=yi=mi=null,a}function qi(t,e){return e.y-t.y||e.x-t.x}Li.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(Pi),e.length},Bi.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Wi.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=ji(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(zi(this,n),n=(t=n).U),n.C=!1,r.C=!0,Hi(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Hi(this,n),n=(t=n).U),n.C=!1,r.C=!0,zi(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?ji(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,zi(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Hi(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,zi(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Hi(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,zi(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Hi(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},o.geom.voronoi=function(t){var e=ui,n=ci,r=e,i=n,o=Xi;if(t)return a(t);function a(t){var e=new Array(t.length),n=o[0][0],r=o[0][1],i=o[1][0],a=o[1][1];return Ki(s(t),o).cells.forEach((function(o,s){var l=o.edges,u=o.site;(e[s]=l.length?l.map((function(t){var e=t.start();return[e.x,e.y]})):u.x>=n&&u.x<=i&&u.y>=r&&u.y<=a?[[n,a],[i,a],[i,r],[n,r]]:[]).point=t[s]})),e}function s(t){return t.map((function(t,e){return{x:Math.round(r(t,e)/kt)*kt,y:Math.round(i(t,e)/kt)*kt,i:e}}))}return a.links=function(t){return Ki(s(t)).edges.filter((function(t){return t.l&&t.r})).map((function(e){return{source:t[e.l.i],target:t[e.r.i]}}))},a.triangles=function(t){var e=[];return Ki(s(t)).cells.forEach((function(n,r){for(var i,o,a,s,l=n.site,u=n.edges.sort(Pi),c=-1,h=u.length,p=u[h-1].edge,f=p.l===l?p.r:p.l;++c<h;)i=f,f=(p=u[c].edge).l===l?p.r:p.l,r<i.i&&r<f.i&&(a=i,s=f,((o=l).x-s.x)*(a.y-o.y)-(o.x-a.x)*(s.y-o.y)<0)&&e.push([t[r],t[i.i],t[f.i]])})),e},a.x=function(t){return arguments.length?(r=xe(e=t),a):e},a.y=function(t){return arguments.length?(i=xe(n=t),a):n},a.clipExtent=function(t){return arguments.length?(o=null==t?Xi:t,a):o===Xi?null:o},a.size=function(t){return arguments.length?a.clipExtent(t&&[[0,0],t]):o===Xi?null:o&&o[1]},a};var Xi=[[-1e6,-1e6],[1e6,1e6]];function Gi(t){return t.x}function Zi(t){return t.y}function Qi(t,e,n,r,i,o){if(!t(e,n,r,i,o)){var a=.5*(n+i),s=.5*(r+o),l=e.nodes;l[0]&&Qi(t,l[0],n,r,a,s),l[1]&&Qi(t,l[1],a,r,i,s),l[2]&&Qi(t,l[2],n,s,a,o),l[3]&&Qi(t,l[3],a,s,i,o)}}function $i(t,e,n,r,i,o,a){var s,l=1/0;return function t(u,c,h,p,f){if(!(c>o||h>a||p<r||f<i)){if(d=u.point){var d,_=e-u.x,g=n-u.y,y=_*_+g*g;if(y<l){var m=Math.sqrt(l=y);r=e-m,i=n-m,o=e+m,a=n+m,s=d}}for(var v=u.nodes,x=.5*(c+p),b=.5*(h+f),E=(n>=b)<<1|e>=x,w=E+4;E<w;++E)if(u=v[3&E])switch(3&E){case 0:t(u,c,h,x,b);break;case 1:t(u,x,h,p,b);break;case 2:t(u,c,b,x,f);break;case 3:t(u,x,b,p,f)}}}(t,r,i,o,a),s}function Ji(t,e){t=o.rgb(t),e=o.rgb(e);var n=t.r,r=t.g,i=t.b,a=e.r-n,s=e.g-r,l=e.b-i;return function(t){return"#"+fe(Math.round(n+a*t))+fe(Math.round(r+s*t))+fe(Math.round(i+l*t))}}function to(t,e){var n,r={},i={};for(n in t)n in e?r[n]=oo(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function eo(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function no(t,e){var n,r,i,o=ro.lastIndex=io.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=ro.exec(t))&&(r=io.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:eo(n,r)})),o=io.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}o.geom.delaunay=function(t){return o.geom.voronoi().triangles(t)},o.geom.quadtree=function(t,e,n,r,i){var o,a=ui,s=ci;if(o=arguments.length)return a=Gi,s=Zi,3===o&&(i=n,r=e,n=e=0),l(t);function l(t){var l,u,c,h,p,f,d,_,g,y=xe(a),m=xe(s);if(null!=e)f=e,d=n,_=r,g=i;else if(_=g=-(f=d=1/0),u=[],c=[],p=t.length,o)for(h=0;h<p;++h)(l=t[h]).x<f&&(f=l.x),l.y<d&&(d=l.y),l.x>_&&(_=l.x),l.y>g&&(g=l.y),u.push(l.x),c.push(l.y);else for(h=0;h<p;++h){var v=+y(l=t[h],h),x=+m(l,h);v<f&&(f=v),x<d&&(d=x),v>_&&(_=v),x>g&&(g=x),u.push(v),c.push(x)}var b=_-f,w=g-d;function A(t,e,n,r,i,o,a,s){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var l=t.x,u=t.y;if(null!=l)if(E(l-n)+E(u-r)<.01)M(t,e,n,r,i,o,a,s);else{var c=t.point;t.x=t.y=t.point=null,M(t,c,l,u,i,o,a,s),M(t,e,n,r,i,o,a,s)}else t.x=n,t.y=r,t.point=e}else M(t,e,n,r,i,o,a,s)}function M(t,e,n,r,i,o,a,s){var l=.5*(i+a),u=.5*(o+s),c=n>=l,h=r>=u,p=h<<1|c;t.leaf=!1,c?i=l:a=l,h?o=u:s=u,A(t=t.nodes[p]||(t.nodes[p]={leaf:!0,nodes:[],point:null,x:null,y:null}),e,n,r,i,o,a,s)}b>w?g=d+b:_=f+w;var C={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){A(C,t,+y(t,++h),+m(t,h),f,d,_,g)},visit:function(t){Qi(t,C,f,d,_,g)},find:function(t){return $i(C,t[0],t[1],f,d,_,g)}};if(h=-1,null==e){for(;++h<p;)A(C,t[h],u[h],c[h],f,d,_,g);--h}else t.forEach(C.add);return u=c=t=l=null,C}return l.x=function(t){return arguments.length?(a=t,l):a},l.y=function(t){return arguments.length?(s=t,l):s},l.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),l):null==e?null:[[e,n],[r,i]]},l.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),l):null==e?null:[r-e,i-n]},l},o.interpolateRgb=Ji,o.interpolateObject=to,o.interpolateNumber=eo,o.interpolateString=no;var ro=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,io=new RegExp(ro.source,"g");function oo(t,e){for(var n,r=o.interpolators.length;--r>=0&&!(n=o.interpolators[r](t,e)););return n}function ao(t,e){var n,r=[],i=[],o=t.length,a=e.length,s=Math.min(t.length,e.length);for(n=0;n<s;++n)r.push(oo(t[n],e[n]));for(;n<o;++n)i[n]=t[n];for(;n<a;++n)i[n]=e[n];return function(t){for(n=0;n<s;++n)i[n]=r[n](t);return i}}o.interpolate=oo,o.interpolators=[function(t,e){var n=typeof e;return("string"===n?ve.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Ji:no:e instanceof Kt?Ji:Array.isArray(e)?ao:"object"===n&&isNaN(e)?to:eo)(t,e)}],o.interpolateArray=ao;var so=function(){return I},lo=o.map({linear:so,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return fo},cubic:function(){return _o},sin:function(){return yo},exp:function(){return mo},circle:function(){return vo},elastic:function(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Lt*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Lt/e)}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},bounce:function(){return xo}}),uo=o.map({in:I,out:ho,"in-out":po,"out-in":function(t){return po(ho(t))}});function co(t){return function(e){return e<=0?0:e>=1?1:t(e)}}function ho(t){return function(e){return 1-t(1-e)}}function po(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function fo(t){return t*t}function _o(t){return t*t*t}function go(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function yo(t){return 1-Math.cos(t*Nt)}function mo(t){return Math.pow(2,10*(t-1))}function vo(t){return 1-Math.sqrt(1-t*t)}function xo(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function bo(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Eo(t){var e,n,r,i=[t.a,t.b],o=[t.c,t.d],a=Ao(i),s=wo(i,o),l=Ao(((e=o)[0]+=(r=-s)*(n=i)[0],e[1]+=r*n[1],e))||0;i[0]*o[1]<o[0]*i[1]&&(i[0]*=-1,i[1]*=-1,a*=-1,s*=-1),this.rotate=(a?Math.atan2(i[1],i[0]):Math.atan2(-o[0],o[1]))*Rt,this.translate=[t.e,t.f],this.scale=[a,l],this.skew=l?Math.atan2(s,l)*Rt:0}function wo(t,e){return t[0]*e[0]+t[1]*e[1]}function Ao(t){var e=Math.sqrt(wo(t,t));return e&&(t[0]/=e,t[1]/=e),e}o.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";return n=lo.get(n)||so,co((r=uo.get(r)||I)(n.apply(null,a.call(arguments,1))))},o.interpolateHcl=function(t,e){t=o.hcl(t),e=o.hcl(e);var n=t.h,r=t.c,i=t.l,a=e.h-n,s=e.c-r,l=e.l-i;return isNaN(s)&&(s=0,r=isNaN(r)?e.c:r),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:a<-180&&(a+=360),function(t){return $t(n+a*t,r+s*t,i+l*t)+""}},o.interpolateHsl=function(t,e){t=o.hsl(t),e=o.hsl(e);var n=t.h,r=t.s,i=t.l,a=e.h-n,s=e.s-r,l=e.l-i;return isNaN(s)&&(s=0,r=isNaN(r)?e.s:r),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:a<-180&&(a+=360),function(t){return Gt(n+a*t,r+s*t,i+l*t)+""}},o.interpolateLab=function(t,e){t=o.lab(t),e=o.lab(e);var n=t.l,r=t.a,i=t.b,a=e.l-n,s=e.a-r,l=e.b-i;return function(t){return ie(n+a*t,r+s*t,i+l*t)+""}},o.interpolateRound=bo,o.transform=function(t){var e=l.createElementNS(o.ns.prefix.svg,"g");return(o.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Eo(n?n.matrix:Mo)})(t)},Eo.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Mo={a:1,b:0,c:0,d:1,e:0,f:0};function Co(t){return t.length?t.pop()+",":""}function So(t,e){var n=[],r=[];return t=o.transform(t),e=o.transform(e),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:eo(t[0],e[0])},{i:i-2,x:eo(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}(t.translate,e.translate,n,r),function(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(Co(n)+"rotate(",null,")")-2,x:eo(t,e)})):e&&n.push(Co(n)+"rotate("+e+")")}(t.rotate,e.rotate,n,r),function(t,e,n,r){t!==e?r.push({i:n.push(Co(n)+"skewX(",null,")")-2,x:eo(t,e)}):e&&n.push(Co(n)+"skewX("+e+")")}(t.skew,e.skew,n,r),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(Co(n)+"scale(",null,",",null,")");r.push({i:i-4,x:eo(t[0],e[0])},{i:i-2,x:eo(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(Co(n)+"scale("+e+")")}(t.scale,e.scale,n,r),t=e=null,function(t){for(var e,i=-1,o=r.length;++i<o;)n[(e=r[i]).i]=e.x(t);return n.join("")}}function ko(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function To(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function Do(t){for(var e=t.source,n=t.target,r=function(t,e){if(t===e)return t;for(var n=Lo(t),r=Lo(e),i=n.pop(),o=r.pop(),a=null;i===o;)a=i,i=n.pop(),o=r.pop();return a}(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function Lo(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Po(t){t.fixed|=2}function No(t){t.fixed&=-7}function Io(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Ro(t){t.fixed&=-5}function Uo(t,e,n){var r=0,i=0;if(t.charge=0,!t.leaf)for(var o,a=t.nodes,s=a.length,l=-1;++l<s;)null!=(o=a[l])&&(Uo(o,e,n),t.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=e*n[t.point.index];t.charge+=t.pointCharge=u,r+=u*t.point.x,i+=u*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}o.interpolateTransform=So,o.layout={},o.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(Do(t[n]));return e}},o.layout.chord=function(){var t,e,n,r,i,a,s,l={},u=0;function c(){var l,c,p,f,d,_={},g=[],y=o.range(r),m=[];for(t=[],e=[],l=0,f=-1;++f<r;){for(c=0,d=-1;++d<r;)c+=n[f][d];g.push(c),m.push(o.range(r)),l+=c}for(i&&y.sort((function(t,e){return i(g[t],g[e])})),a&&m.forEach((function(t,e){t.sort((function(t,r){return a(n[e][t],n[e][r])}))})),l=(Lt-u*r)/l,c=0,f=-1;++f<r;){for(p=c,d=-1;++d<r;){var v=y[f],x=m[v][d],b=n[v][x],E=c,w=c+=b*l;_[v+"-"+x]={index:v,subindex:x,startAngle:E,endAngle:w,value:b}}e[v]={index:v,startAngle:p,endAngle:c,value:g[v]},c+=u}for(f=-1;++f<r;)for(d=f-1;++d<r;){var A=_[f+"-"+d],M=_[d+"-"+f];(A.value||M.value)&&t.push(A.value<M.value?{source:M,target:A}:{source:A,target:M})}s&&h()}function h(){t.sort((function(t,e){return s((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)}))}return l.matrix=function(i){return arguments.length?(r=(n=i)&&n.length,t=e=null,l):n},l.padding=function(n){return arguments.length?(u=n,t=e=null,l):u},l.sortGroups=function(n){return arguments.length?(i=n,t=e=null,l):i},l.sortSubgroups=function(e){return arguments.length?(a=e,t=null,l):a},l.sortChords=function(e){return arguments.length?(s=e,t&&h(),l):s},l.chords=function(){return t||c(),t},l.groups=function(){return e||c(),e},l},o.layout.force=function(){var t,e,n,r,i,a,s={},l=o.dispatch("start","tick","end"),u=[1,1],c=.9,h=Oo,p=Fo,f=-30,d=Vo,_=.1,g=.64,y=[],m=[];function v(t){return function(e,n,r,i){if(e.point!==t){var o=e.cx-t.x,a=e.cy-t.y,s=i-n,l=o*o+a*a;if(s*s/g<l){if(l<d){var u=e.charge/l;t.px-=o*u,t.py-=a*u}return!0}e.point&&l&&l<d&&(u=e.pointCharge/l,t.px-=o*u,t.py-=a*u)}return!e.charge}}function x(t){t.px=o.event.x,t.py=o.event.y,s.resume()}return s.tick=function(){if((n*=.99)<.005)return t=null,l.end({type:"end",alpha:n=0}),!0;var e,s,h,p,d,g,x,b,E,w=y.length,A=m.length;for(s=0;s<A;++s)p=(h=m[s]).source,(g=(b=(d=h.target).x-p.x)*b+(E=d.y-p.y)*E)&&(b*=g=n*i[s]*((g=Math.sqrt(g))-r[s])/g,E*=g,d.x-=b*(x=p.weight+d.weight?p.weight/(p.weight+d.weight):.5),d.y-=E*x,p.x+=b*(x=1-x),p.y+=E*x);if((x=n*_)&&(b=u[0]/2,E=u[1]/2,s=-1,x))for(;++s<w;)(h=y[s]).x+=(b-h.x)*x,h.y+=(E-h.y)*x;if(f)for(Uo(e=o.geom.quadtree(y),n,a),s=-1;++s<w;)(h=y[s]).fixed||e.visit(v(h));for(s=-1;++s<w;)(h=y[s]).fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*c,h.y-=(h.py-(h.py=h.y))*c);l.tick({type:"tick",alpha:n})},s.nodes=function(t){return arguments.length?(y=t,s):y},s.links=function(t){return arguments.length?(m=t,s):m},s.size=function(t){return arguments.length?(u=t,s):u},s.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,s):h},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(p="function"==typeof t?t:+t,s):p},s.friction=function(t){return arguments.length?(c=+t,s):c},s.charge=function(t){return arguments.length?(f="function"==typeof t?t:+t,s):f},s.chargeDistance=function(t){return arguments.length?(d=t*t,s):Math.sqrt(d)},s.gravity=function(t){return arguments.length?(_=+t,s):_},s.theta=function(t){return arguments.length?(g=t*t,s):Math.sqrt(g)},s.alpha=function(e){return arguments.length?(e=+e,n?e>0?n=e:(t.c=null,t.t=NaN,t=null,l.end({type:"end",alpha:n=0})):e>0&&(l.start({type:"start",alpha:n=e}),t=ke(s.tick)),s):n},s.start=function(){var t,e,n,o=y.length,l=m.length,c=u[0],d=u[1];for(t=0;t<o;++t)(n=y[t]).index=t,n.weight=0;for(t=0;t<l;++t)"number"==typeof(n=m[t]).source&&(n.source=y[n.source]),"number"==typeof n.target&&(n.target=y[n.target]),++n.source.weight,++n.target.weight;for(t=0;t<o;++t)n=y[t],isNaN(n.x)&&(n.x=_("x",c)),isNaN(n.y)&&(n.y=_("y",d)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(r=[],"function"==typeof h)for(t=0;t<l;++t)r[t]=+h.call(this,m[t],t);else for(t=0;t<l;++t)r[t]=h;if(i=[],"function"==typeof p)for(t=0;t<l;++t)i[t]=+p.call(this,m[t],t);else for(t=0;t<l;++t)i[t]=p;if(a=[],"function"==typeof f)for(t=0;t<o;++t)a[t]=+f.call(this,y[t],t);else for(t=0;t<o;++t)a[t]=f;function _(n,r){if(!e){for(e=new Array(o),u=0;u<o;++u)e[u]=[];for(u=0;u<l;++u){var i=m[u];e[i.source.index].push(i.target),e[i.target.index].push(i.source)}}for(var a,s=e[t],u=-1,c=s.length;++u<c;)if(!isNaN(a=s[u][n]))return a;return Math.random()*r}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(e||(e=o.behavior.drag().origin(I).on("dragstart.force",Po).on("drag.force",x).on("dragend.force",No)),!arguments.length)return e;this.on("mouseover.force",Io).on("mouseout.force",Ro).call(e)},o.rebind(s,l,"on")};var Oo=20,Fo=1,Vo=1/0;function Bo(t,e){return o.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=Ko,t}function Wo(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function Yo(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(t=r.pop());)e(t)}function zo(t){return t.children}function Ho(t){return t.value}function jo(t,e){return e.value-t.value}function Ko(t){return o.merge(t.map((function(t){return(t.children||[]).map((function(e){return{source:t,target:e}}))})))}o.layout.hierarchy=function(){var t=jo,e=zo,n=Ho;function r(i){var o,a=[i],s=[];for(i.depth=0;null!=(o=a.pop());)if(s.push(o),(u=e.call(r,o,o.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)a.push(c=u[l]),c.parent=o,c.depth=o.depth+1;n&&(o.value=0),o.children=u}else n&&(o.value=+n.call(r,o,o.depth)||0),delete o.children;return Yo(i,(function(e){var r,i;t&&(r=e.children)&&r.sort(t),n&&(i=e.parent)&&(i.value+=e.value)})),s}return r.sort=function(e){return arguments.length?(t=e,r):t},r.children=function(t){return arguments.length?(e=t,r):e},r.value=function(t){return arguments.length?(n=t,r):n},r.revalue=function(t){return n&&(Wo(t,(function(t){t.children&&(t.value=0)})),Yo(t,(function(t){var e;t.children||(t.value=+n.call(r,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)}))),t},r},o.layout.partition=function(){var t=o.layout.hierarchy(),e=[1,1];function n(t,e,r,i){var o=t.children;if(t.x=e,t.y=t.depth*i,t.dx=r,t.dy=i,o&&(a=o.length)){var a,s,l,u=-1;for(r=t.value?r/t.value:0;++u<a;)n(s=o[u],e,l=s.value*r,i),e+=l}}function r(t){var e=t.children,n=0;if(e&&(i=e.length))for(var i,o=-1;++o<i;)n=Math.max(n,r(e[o]));return 1+n}function i(i,o){var a=t.call(this,i,o);return n(a[0],0,e[0],e[1]/r(a[0])),a}return i.size=function(t){return arguments.length?(e=t,i):e},Bo(i,t)},o.layout.pie=function(){var t=Number,e=qo,n=0,r=Lt,i=0;function a(s){var l,u=s.length,c=s.map((function(e,n){return+t.call(a,e,n)})),h=+("function"==typeof n?n.apply(this,arguments):n),p=("function"==typeof r?r.apply(this,arguments):r)-h,f=Math.min(Math.abs(p)/u,+("function"==typeof i?i.apply(this,arguments):i)),d=f*(p<0?-1:1),_=o.sum(c),g=_?(p-u*d)/_:0,y=o.range(u),m=[];return null!=e&&y.sort(e===qo?function(t,e){return c[e]-c[t]}:function(t,n){return e(s[t],s[n])}),y.forEach((function(t){m[t]={data:s[t],value:l=c[t],startAngle:h,endAngle:h+=l*g+d,padAngle:f}})),m}return a.value=function(e){return arguments.length?(t=e,a):t},a.sort=function(t){return arguments.length?(e=t,a):e},a.startAngle=function(t){return arguments.length?(n=t,a):n},a.endAngle=function(t){return arguments.length?(r=t,a):r},a.padAngle=function(t){return arguments.length?(i=t,a):i},a};var qo={};function Xo(t){return t.x}function Go(t){return t.y}function Zo(t,e,n){t.y0=e,t.y=n}o.layout.stack=function(){var t=I,e=Jo,n=ta,r=Zo,i=Xo,a=Go;function s(l,u){if(!(f=l.length))return l;var c=l.map((function(e,n){return t.call(s,e,n)})),h=c.map((function(t){return t.map((function(t,e){return[i.call(s,t,e),a.call(s,t,e)]}))})),p=e.call(s,h,u);c=o.permute(c,p),h=o.permute(h,p);var f,d,_,g,y=n.call(s,h,u),m=c[0].length;for(_=0;_<m;++_)for(r.call(s,c[0][_],g=y[_],h[0][_][1]),d=1;d<f;++d)r.call(s,c[d][_],g+=h[d-1][_][1],h[d][_][1]);return l}return s.values=function(e){return arguments.length?(t=e,s):t},s.order=function(t){return arguments.length?(e="function"==typeof t?t:Qo.get(t)||Jo,s):e},s.offset=function(t){return arguments.length?(n="function"==typeof t?t:$o.get(t)||ta,s):n},s.x=function(t){return arguments.length?(i=t,s):i},s.y=function(t){return arguments.length?(a=t,s):a},s.out=function(t){return arguments.length?(r=t,s):r},s};var Qo=o.map({"inside-out":function(t){var e,n,r=t.length,i=t.map(ea),a=t.map(na),s=o.range(r).sort((function(t,e){return i[t]-i[e]})),l=0,u=0,c=[],h=[];for(e=0;e<r;++e)n=s[e],l<u?(l+=a[n],c.push(n)):(u+=a[n],h.push(n));return h.reverse().concat(c)},reverse:function(t){return o.range(t.length).reverse()},default:Jo}),$o=o.map({silhouette:function(t){var e,n,r,i=t.length,o=t[0].length,a=[],s=0,l=[];for(n=0;n<o;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];r>s&&(s=r),a.push(r)}for(n=0;n<o;++n)l[n]=(s-a[n])/2;return l},wiggle:function(t){var e,n,r,i,o,a,s,l,u,c=t.length,h=t[0],p=h.length,f=[];for(f[0]=l=u=0,n=1;n<p;++n){for(e=0,i=0;e<c;++e)i+=t[e][n][1];for(e=0,o=0,s=h[n][0]-h[n-1][0];e<c;++e){for(r=0,a=(t[e][n][1]-t[e][n-1][1])/(2*s);r<e;++r)a+=(t[r][n][1]-t[r][n-1][1])/s;o+=a*t[e][n][1]}f[n]=l-=i?o/i*s:0,l<u&&(u=l)}for(n=0;n<p;++n)f[n]-=u;return f},expand:function(t){var e,n,r,i=t.length,o=t[0].length,a=1/i,s=[];for(n=0;n<o;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=a}for(n=0;n<o;++n)s[n]=0;return s},zero:ta});function Jo(t){return o.range(t.length)}function ta(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function ea(t){for(var e,n=1,r=0,i=t[0][1],o=t.length;n<o;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function na(t){return t.reduce(ra,0)}function ra(t,e){return t+e[1]}function ia(t,e){return oa(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function oa(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,o=[];++n<=e;)o[n]=i*n+r;return o}function aa(t){return[o.min(t),o.max(t)]}function sa(t,e){return t.value-e.value}function la(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function ua(t,e){t._pack_next=e,e._pack_prev=t}function ca(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function ha(t){if((e=t.children)&&(l=e.length)){var e,n,r,i,o,a,s,l,u=1/0,c=-1/0,h=1/0,p=-1/0;if(e.forEach(pa),(n=e[0]).x=-n.r,n.y=0,v(n),l>1&&((r=e[1]).x=r.r,r.y=0,v(r),l>2))for(_a(n,r,i=e[2]),v(i),la(n,i),n._pack_prev=i,la(i,r),r=n._pack_next,o=3;o<l;o++){_a(n,r,i=e[o]);var f=0,d=1,_=1;for(a=r._pack_next;a!==r;a=a._pack_next,d++)if(ca(a,i)){f=1;break}if(1==f)for(s=n._pack_prev;s!==a._pack_prev&&!ca(s,i);s=s._pack_prev,_++);f?(d<_||d==_&&r.r<n.r?ua(n,r=a):ua(n=s,r),o--):(la(n,i),r=i,v(i))}var g=(u+c)/2,y=(h+p)/2,m=0;for(o=0;o<l;o++)(i=e[o]).x-=g,i.y-=y,m=Math.max(m,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=m,e.forEach(fa)}function v(t){u=Math.min(t.x-t.r,u),c=Math.max(t.x+t.r,c),h=Math.min(t.y-t.r,h),p=Math.max(t.y+t.r,p)}}function pa(t){t._pack_next=t._pack_prev=t}function fa(t){delete t._pack_next,delete t._pack_prev}function da(t,e,n,r){var i=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,i)for(var o=-1,a=i.length;++o<a;)da(i[o],e,n,r)}function _a(t,e,n){var r=t.r+n.r,i=e.x-t.x,o=e.y-t.y;if(r&&(i||o)){var a=e.r+n.r,s=i*i+o*o,l=.5+((r*=r)-(a*=a))/(2*s),u=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);n.x=t.x+l*i+u*o,n.y=t.y+l*o-u*i}else n.x=t.x+r,n.y=t.y}function ga(t,e){return t.parent==e.parent?1:2}function ya(t){var e=t.children;return e.length?e[0]:t.t}function ma(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function va(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function xa(t,e,n){return t.a.parent===e.parent?t.a:n}function ba(t){var e=t.children;return e&&e.length?ba(e[0]):t}function Ea(t){var e,n=t.children;return n&&(e=n.length)?Ea(n[e-1]):t}function wa(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Aa(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return i<0&&(n+=i/2,i=0),o<0&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function Ma(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function Ca(t){return t.rangeExtent?t.rangeExtent():Ma(t.range())}function Sa(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(i(t))}}function ka(t,e){var n,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function Ta(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Da}o.layout.histogram=function(){var t=!0,e=Number,n=aa,r=ia;function i(i,a){for(var s,l,u=[],c=i.map(e,this),h=n.call(this,c,a),p=r.call(this,h,c,a),f=(a=-1,c.length),d=p.length-1,_=t?1:1/f;++a<d;)(s=u[a]=[]).dx=p[a+1]-(s.x=p[a]),s.y=0;if(d>0)for(a=-1;++a<f;)(l=c[a])>=h[0]&&l<=h[1]&&((s=u[o.bisect(p,l,1,d)-1]).y+=_,s.push(i[a]));return u}return i.value=function(t){return arguments.length?(e=t,i):e},i.range=function(t){return arguments.length?(n=xe(t),i):n},i.bins=function(t){return arguments.length?(r="number"==typeof t?function(e){return oa(e,t)}:xe(t),i):r},i.frequency=function(e){return arguments.length?(t=!!e,i):t},i},o.layout.pack=function(){var t,e=o.layout.hierarchy().sort(sa),n=0,r=[1,1];function i(i,o){var a=e.call(this,i,o),s=a[0],l=r[0],u=r[1],c=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,Yo(s,(function(t){t.r=+c(t.value)})),Yo(s,ha),n){var h=n*(t?1:Math.max(2*s.r/l,2*s.r/u))/2;Yo(s,(function(t){t.r+=h})),Yo(s,ha),Yo(s,(function(t){t.r-=h}))}return da(s,l/2,u/2,t?1:1/Math.max(2*s.r/l,2*s.r/u)),a}return i.size=function(t){return arguments.length?(r=t,i):r},i.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,i):t},i.padding=function(t){return arguments.length?(n=+t,i):n},Bo(i,e)},o.layout.tree=function(){var t=o.layout.hierarchy().sort(null).value(null),e=ga,n=[1,1],r=null;function i(i,o){var u=t.call(this,i,o),c=u[0],h=function(t){for(var e,n={A:null,children:[t]},r=[n];null!=(e=r.pop());)for(var i,o=e.children,a=0,s=o.length;a<s;++a)r.push((o[a]=i={_:o[a],parent:e,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}(c);if(Yo(h,a),h.parent.m=-h.z,Wo(h,s),r)Wo(c,l);else{var p=c,f=c,d=c;Wo(c,(function(t){t.x<p.x&&(p=t),t.x>f.x&&(f=t),t.depth>d.depth&&(d=t)}));var _=e(p,f)/2-p.x,g=n[0]/(f.x+e(f,p)/2+_),y=n[1]/(d.depth||1);Wo(c,(function(t){t.x=(t.x+_)*g,t.y=t.depth*y}))}return u}function a(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n.length){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(t);var o=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,o=t,a=t,s=n,l=o.parent.children[0],u=o.m,c=a.m,h=s.m,p=l.m;s=ma(s),o=ya(o),s&&o;)l=ya(l),(a=ma(a)).a=t,(i=s.z+h-o.z-u+e(s._,o._))>0&&(va(xa(s,t,r),t,i),u+=i,c+=i),h+=s.m,u+=o.m,p+=l.m,c+=a.m;s&&!ma(a)&&(a.t=s,a.m+=h-c),o&&!ya(l)&&(l.t=o,l.m+=u-p,r=t)}return r}(t,i,t.parent.A||r[0])}function s(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function l(t){t.x*=n[0],t.y=t.depth*n[1]}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(t){return arguments.length?(r=null==(n=t)?l:null,i):r?null:n},i.nodeSize=function(t){return arguments.length?(r=null==(n=t)?null:l,i):r?n:null},Bo(i,t)},o.layout.cluster=function(){var t=o.layout.hierarchy().sort(null).value(null),e=ga,n=[1,1],r=!1;function i(i,a){var s,l=t.call(this,i,a),u=l[0],c=0;Yo(u,(function(t){var n=t.children;n&&n.length?(t.x=function(t){return t.reduce((function(t,e){return t+e.x}),0)/t.length}(n),t.y=function(t){return 1+o.max(t,(function(t){return t.y}))}(n)):(t.x=s?c+=e(t,s):0,t.y=0,s=t)}));var h=ba(u),p=Ea(u),f=h.x-e(h,p)/2,d=p.x+e(p,h)/2;return Yo(u,r?function(t){t.x=(t.x-u.x)*n[0],t.y=(u.y-t.y)*n[1]}:function(t){t.x=(t.x-f)/(d-f)*n[0],t.y=(1-(u.y?t.y/u.y:1))*n[1]}),l}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(t){return arguments.length?(r=null==(n=t),i):r?null:n},i.nodeSize=function(t){return arguments.length?(r=null!=(n=t),i):r?n:null},Bo(i,t)},o.layout.treemap=function(){var t,e=o.layout.hierarchy(),n=Math.round,r=[1,1],i=null,a=wa,s=!1,l="squarify",u=.5*(1+Math.sqrt(5));function c(t,e){for(var n,r,i=-1,o=t.length;++i<o;)r=(n=t[i]).value*(e<0?0:e),n.area=isNaN(r)||r<=0?0:r}function h(t){var e=t.children;if(e&&e.length){var n,r,i,o=a(t),s=[],u=e.slice(),p=1/0,_="slice"===l?o.dx:"dice"===l?o.dy:"slice-dice"===l?1&t.depth?o.dy:o.dx:Math.min(o.dx,o.dy);for(c(u,o.dx*o.dy/t.value),s.area=0;(i=u.length)>0;)s.push(n=u[i-1]),s.area+=n.area,"squarify"!==l||(r=f(s,_))<=p?(u.pop(),p=r):(s.area-=s.pop().area,d(s,_,o,!1),_=Math.min(o.dx,o.dy),s.length=s.area=0,p=1/0);s.length&&(d(s,_,o,!0),s.length=s.area=0),e.forEach(h)}}function p(t){var e=t.children;if(e&&e.length){var n,r=a(t),i=e.slice(),o=[];for(c(i,r.dx*r.dy/t.value),o.area=0;n=i.pop();)o.push(n),o.area+=n.area,null!=n.z&&(d(o,n.z?r.dx:r.dy,r,!i.length),o.length=o.area=0);e.forEach(p)}}function f(t,e){for(var n,r=t.area,i=0,o=1/0,a=-1,s=t.length;++a<s;)(n=t[a].area)&&(n<o&&(o=n),n>i&&(i=n));return e*=e,(r*=r)?Math.max(e*i*u/r,r/(e*o*u)):1/0}function d(t,e,r,i){var o,a=-1,s=t.length,l=r.x,u=r.y,c=e?n(t.area/e):0;if(e==r.dx){for((i||c>r.dy)&&(c=r.dy);++a<s;)(o=t[a]).x=l,o.y=u,o.dy=c,l+=o.dx=Math.min(r.x+r.dx-l,c?n(o.area/c):0);o.z=!0,o.dx+=r.x+r.dx-l,r.y+=c,r.dy-=c}else{for((i||c>r.dx)&&(c=r.dx);++a<s;)(o=t[a]).x=l,o.y=u,o.dx=c,u+=o.dy=Math.min(r.y+r.dy-u,c?n(o.area/c):0);o.z=!1,o.dy+=r.y+r.dy-u,r.x+=c,r.dx-=c}}function _(n){var i=t||e(n),o=i[0];return o.x=o.y=0,o.value?(o.dx=r[0],o.dy=r[1]):o.dx=o.dy=0,t&&e.revalue(o),c([o],o.dx*o.dy/o.value),(t?p:h)(o),s&&(t=i),i}return _.size=function(t){return arguments.length?(r=t,_):r},_.padding=function(t){if(!arguments.length)return i;function e(e){var n=t.call(_,e,e.depth);return null==n?wa(e):Aa(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Aa(e,t)}var r;return a=null==(i=t)?wa:"function"==(r=typeof t)?e:"number"===r?(t=[t,t,t,t],n):n,_},_.round=function(t){return arguments.length?(n=t?Math.round:Number,_):n!=Number},_.sticky=function(e){return arguments.length?(s=e,t=null,_):s},_.ratio=function(t){return arguments.length?(u=t,_):u},_.mode=function(t){return arguments.length?(l=t+"",_):l},Bo(_,e)},o.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var n,r,i;do{i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=o.random.normal.apply(o,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=o.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},o.scale={};var Da={floor:I,ceil:I};function La(t,e,n,r){var i=[],a=[],s=0,l=Math.min(t.length,e.length)-1;for(t[l]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<=l;)i.push(n(t[s-1],t[s])),a.push(r(e[s-1],e[s]));return function(e){var n=o.bisect(t,e,1,l)-1;return a[n](i[n](e))}}function Pa(t,e,n,r){var i,o;function a(){var a=Math.min(t.length,e.length)>2?La:Sa,l=r?To:ko;return i=a(t,e,l,n),o=a(e,t,l,oo),s}function s(t){return i(t)}return s.invert=function(t){return o(t)},s.domain=function(e){return arguments.length?(t=e.map(Number),a()):t},s.range=function(t){return arguments.length?(e=t,a()):e},s.rangeRound=function(t){return s.range(t).interpolate(bo)},s.clamp=function(t){return arguments.length?(r=t,a()):r},s.interpolate=function(t){return arguments.length?(n=t,a()):n},s.ticks=function(e){return Ua(t,e)},s.tickFormat=function(e,n){return Oa(t,e,n)},s.nice=function(e){return Ia(t,e),a()},s.copy=function(){return Pa(t,e,n,r)},a()}function Na(t,e){return o.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Ia(t,e){return ka(t,Ta(Ra(t,e)[2])),ka(t,Ta(Ra(t,e)[2])),t}function Ra(t,e){null==e&&(e=10);var n=Ma(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Ua(t,e){return o.range.apply(o,Ra(t,e))}function Oa(t,e,n){var r=Ra(t,e);if(n){var i=Re.exec(n);if(i.shift(),"s"===i[8]){var a=o.formatPrefix(Math.max(E(r[0]),E(r[1])));return i[7]||(i[7]="."+Va(a.scale(r[2]))),i[8]="f",n=o.format(i.join("")),function(t){return n(a.scale(t))+a.symbol}}i[7]||(i[7]="."+function(t,e){var n=Va(e[2]);return t in Fa?Math.abs(n-Va(Math.max(E(e[0]),E(e[1]))))+ +("e"!==t):n-2*("%"===t)}(i[8],r)),n=i.join("")}else n=",."+Va(r[2])+"f";return o.format(n)}o.scale.linear=function(){return Pa([0,1],[0,1],oo,!1)};var Fa={s:1,g:1,p:1,r:1,e:1};function Va(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function Ba(t,e,n,r){function i(t){return(n?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function a(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function s(e){return t(i(e))}return s.invert=function(e){return a(t.invert(e))},s.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((r=e.map(Number)).map(i)),s):r},s.base=function(n){return arguments.length?(e=+n,t.domain(r.map(i)),s):e},s.nice=function(){var e=ka(r.map(i),n?Math:Ya);return t.domain(e),r=e.map(a),s},s.ticks=function(){var t=Ma(r),o=[],s=t[0],l=t[1],u=Math.floor(i(s)),c=Math.ceil(i(l)),h=e%1?2:e;if(isFinite(c-u)){if(n){for(;u<c;u++)for(var p=1;p<h;p++)o.push(a(u)*p);o.push(a(u))}else for(o.push(a(u));u++<c;)for(p=h-1;p>0;p--)o.push(a(u)*p);for(u=0;o[u]<s;u++);for(c=o.length;o[c-1]>l;c--);o=o.slice(u,c)}return o},s.tickFormat=function(t,n){if(!arguments.length)return Wa;arguments.length<2?n=Wa:"function"!=typeof n&&(n=o.format(n));var r=Math.max(1,e*t/s.ticks().length);return function(t){var o=t/a(Math.round(i(t)));return o*e<e-.5&&(o*=e),o<=r?n(t):""}},s.copy=function(){return Ba(t.copy(),e,n,r)},Na(s,t)}o.scale.log=function(){return Ba(o.scale.linear().domain([0,1]),10,!0,[1,10])};var Wa=o.format(".0e"),Ya={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function za(t,e,n){var r=Ha(e),i=Ha(1/e);function o(e){return t(r(e))}return o.invert=function(e){return i(t.invert(e))},o.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(r)),o):n},o.ticks=function(t){return Ua(n,t)},o.tickFormat=function(t,e){return Oa(n,t,e)},o.nice=function(t){return o.domain(Ia(n,t))},o.exponent=function(a){return arguments.length?(r=Ha(e=a),i=Ha(1/e),t.domain(n.map(r)),o):e},o.copy=function(){return za(t.copy(),e,n)},Na(o,t)}function Ha(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function ja(t,e){var n,r,i;function a(i){return r[((n.get(i)||("range"===e.t?n.set(i,t.push(i)):NaN))-1)%r.length]}function s(e,n){return o.range(t.length).map((function(t){return e+n*t}))}return a.domain=function(r){if(!arguments.length)return t;t=[],n=new M;for(var i,o=-1,s=r.length;++o<s;)n.has(i=r[o])||n.set(i,t.push(i));return a[e.t].apply(a,e.a)},a.range=function(t){return arguments.length?(r=t,i=0,e={t:"range",a:arguments},a):r},a.rangePoints=function(n,o){arguments.length<2&&(o=0);var l=n[0],u=n[1],c=t.length<2?(l=(l+u)/2,0):(u-l)/(t.length-1+o);return r=s(l+c*o/2,c),i=0,e={t:"rangePoints",a:arguments},a},a.rangeRoundPoints=function(n,o){arguments.length<2&&(o=0);var l=n[0],u=n[1],c=t.length<2?(l=u=Math.round((l+u)/2),0):(u-l)/(t.length-1+o)|0;return r=s(l+Math.round(c*o/2+(u-l-(t.length-1+o)*c)/2),c),i=0,e={t:"rangeRoundPoints",a:arguments},a},a.rangeBands=function(n,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var u=n[1]<n[0],c=n[u-0],h=n[1-u],p=(h-c)/(t.length-o+2*l);return r=s(c+p*l,p),u&&r.reverse(),i=p*(1-o),e={t:"rangeBands",a:arguments},a},a.rangeRoundBands=function(n,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var u=n[1]<n[0],c=n[u-0],h=n[1-u],p=Math.floor((h-c)/(t.length-o+2*l));return r=s(c+Math.round((h-c-(t.length-o)*p)/2),p),u&&r.reverse(),i=Math.round(p*(1-o)),e={t:"rangeRoundBands",a:arguments},a},a.rangeBand=function(){return i},a.rangeExtent=function(){return Ma(e.a[0])},a.copy=function(){return ja(t,e)},a.domain(t)}o.scale.pow=function(){return za(o.scale.linear(),1,[0,1])},o.scale.sqrt=function(){return o.scale.pow().exponent(.5)},o.scale.ordinal=function(){return ja([],{t:"range",a:[[]]})},o.scale.category10=function(){return o.scale.ordinal().range(Ka)},o.scale.category20=function(){return o.scale.ordinal().range(qa)},o.scale.category20b=function(){return o.scale.ordinal().range(Xa)},o.scale.category20c=function(){return o.scale.ordinal().range(Ga)};var Ka=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(he),qa=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(he),Xa=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(he),Ga=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(he);function Za(t,e){var n;function r(){var r=0,a=e.length;for(n=[];++r<a;)n[r-1]=o.quantile(t,r/a);return i}function i(t){if(!isNaN(t=+t))return e[o.bisect(n,t)]}return i.domain=function(e){return arguments.length?(t=e.map(y).filter(m).sort(g),r()):t},i.range=function(t){return arguments.length?(e=t,r()):e},i.quantiles=function(){return n},i.invertExtent=function(r){return(r=e.indexOf(r))<0?[NaN,NaN]:[r>0?n[r-1]:t[0],r<n.length?n[r]:t[t.length-1]]},i.copy=function(){return Za(t,e)},r()}function Qa(t,e,n){var r,i;function o(e){return n[Math.max(0,Math.min(i,Math.floor(r*(e-t))))]}function a(){return r=n.length/(e-t),i=n.length-1,o}return o.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],a()):[t,e]},o.range=function(t){return arguments.length?(n=t,a()):n},o.invertExtent=function(e){return[e=(e=n.indexOf(e))<0?NaN:e/r+t,e+1/r]},o.copy=function(){return Qa(t,e,n)},a()}function $a(t,e){function n(n){if(n<=n)return e[o.bisect(t,n)]}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return $a(t,e)},n}function Ja(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return Ua(t,e)},e.tickFormat=function(e,n){return Oa(t,e,n)},e.copy=function(){return Ja(t)},e}function ts(){return 0}o.scale.quantile=function(){return Za([],[])},o.scale.quantize=function(){return Qa(0,1,[0,1])},o.scale.threshold=function(){return $a([.5],[0,1])},o.scale.identity=function(){return Ja([0,1])},o.svg={},o.svg.arc=function(){var t=ns,e=rs,n=ts,r=es,i=is,o=os,a=as;function s(){var s=Math.max(0,+t.apply(this,arguments)),u=Math.max(0,+e.apply(this,arguments)),c=i.apply(this,arguments)-Nt,h=o.apply(this,arguments)-Nt,p=Math.abs(h-c),f=c>h?0:1;if(u<s&&(d=u,u=s,s=d),p>=Pt)return l(u,f)+(s?l(s,1-f):"")+"Z";var d,_,g,y,m,v,x,b,E,w,A,M,C=0,S=0,k=[];if((y=(+a.apply(this,arguments)||0)/2)&&(g=r===es?Math.sqrt(s*s+u*u):+r.apply(this,arguments),f||(S*=-1),u&&(S=Vt(g/u*Math.sin(y))),s&&(C=Vt(g/s*Math.sin(y)))),u){m=u*Math.cos(c+S),v=u*Math.sin(c+S),x=u*Math.cos(h-S),b=u*Math.sin(h-S);var T=Math.abs(h-c-2*S)<=Dt?0:1;if(S&&ss(m,v,x,b)===f^T){var D=(c+h)/2;m=u*Math.cos(D),v=u*Math.sin(D),x=b=null}}else m=v=0;if(s){E=s*Math.cos(h-C),w=s*Math.sin(h-C),A=s*Math.cos(c+C),M=s*Math.sin(c+C);var L=Math.abs(c-h+2*C)<=Dt?0:1;if(C&&ss(E,w,A,M)===1-f^L){var P=(c+h)/2;E=s*Math.cos(P),w=s*Math.sin(P),A=M=null}}else E=w=0;if(p>kt&&(d=Math.min(Math.abs(u-s)/2,+n.apply(this,arguments)))>.001){_=s<u^f?0:1;var N=d,I=d;if(p<Dt){var R=null==A?[E,w]:null==x?[m,v]:_i([m,v],[A,M],[x,b],[E,w]),U=m-R[0],O=v-R[1],F=x-R[0],V=b-R[1],B=1/Math.sin(Math.acos((U*F+O*V)/(Math.sqrt(U*U+O*O)*Math.sqrt(F*F+V*V)))/2),W=Math.sqrt(R[0]*R[0]+R[1]*R[1]);I=Math.min(d,(s-W)/(B-1)),N=Math.min(d,(u-W)/(B+1))}if(null!=x){var Y=ls(null==A?[E,w]:[A,M],[m,v],u,N,f),z=ls([x,b],[E,w],u,N,f);d===N?k.push("M",Y[0],"A",N,",",N," 0 0,",_," ",Y[1],"A",u,",",u," 0 ",1-f^ss(Y[1][0],Y[1][1],z[1][0],z[1][1]),",",f," ",z[1],"A",N,",",N," 0 0,",_," ",z[0]):k.push("M",Y[0],"A",N,",",N," 0 1,",_," ",z[0])}else k.push("M",m,",",v);if(null!=A){var H=ls([m,v],[A,M],s,-I,f),j=ls([E,w],null==x?[m,v]:[x,b],s,-I,f);d===I?k.push("L",j[0],"A",I,",",I," 0 0,",_," ",j[1],"A",s,",",s," 0 ",f^ss(j[1][0],j[1][1],H[1][0],H[1][1]),",",1-f," ",H[1],"A",I,",",I," 0 0,",_," ",H[0]):k.push("L",j[0],"A",I,",",I," 0 0,",_," ",H[0])}else k.push("L",E,",",w)}else k.push("M",m,",",v),null!=x&&k.push("A",u,",",u," 0 ",T,",",f," ",x,",",b),k.push("L",E,",",w),null!=A&&k.push("A",s,",",s," 0 ",L,",",1-f," ",A,",",M);return k.push("Z"),k.join("")}function l(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return s.innerRadius=function(e){return arguments.length?(t=xe(e),s):t},s.outerRadius=function(t){return arguments.length?(e=xe(t),s):e},s.cornerRadius=function(t){return arguments.length?(n=xe(t),s):n},s.padRadius=function(t){return arguments.length?(r=t==es?es:xe(t),s):r},s.startAngle=function(t){return arguments.length?(i=xe(t),s):i},s.endAngle=function(t){return arguments.length?(o=xe(t),s):o},s.padAngle=function(t){return arguments.length?(a=xe(t),s):a},s.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Nt;return[Math.cos(r)*n,Math.sin(r)*n]},s};var es="auto";function ns(t){return t.innerRadius}function rs(t){return t.outerRadius}function is(t){return t.startAngle}function os(t){return t.endAngle}function as(t){return t&&t.padAngle}function ss(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function ls(t,e,n,r,i){var o=t[0]-e[0],a=t[1]-e[1],s=(i?r:-r)/Math.sqrt(o*o+a*a),l=s*a,u=-s*o,c=t[0]+l,h=t[1]+u,p=e[0]+l,f=e[1]+u,d=(c+p)/2,_=(h+f)/2,g=p-c,y=f-h,m=g*g+y*y,v=n-r,x=c*f-p*h,b=(y<0?-1:1)*Math.sqrt(Math.max(0,v*v*m-x*x)),E=(x*y-g*b)/m,w=(-x*g-y*b)/m,A=(x*y+g*b)/m,M=(-x*g+y*b)/m,C=E-d,S=w-_,k=A-d,T=M-_;return C*C+S*S>k*k+T*T&&(E=A,w=M),[[E-l,w-u],[E*n/v,w*n/v]]}function us(t){var e=ui,n=ci,r=Jn,i=hs,o=i.key,a=.7;function s(o){var s,l=[],u=[],c=-1,h=o.length,p=xe(e),f=xe(n);function d(){l.push("M",i(t(u),a))}for(;++c<h;)r.call(this,s=o[c],c)?u.push([+p.call(this,s,c),+f.call(this,s,c)]):u.length&&(d(),u=[]);return u.length&&d(),l.length?l.join(""):null}return s.x=function(t){return arguments.length?(e=t,s):e},s.y=function(t){return arguments.length?(n=t,s):n},s.defined=function(t){return arguments.length?(r=t,s):r},s.interpolate=function(t){return arguments.length?(o="function"==typeof t?i=t:(i=cs.get(t)||hs).key,s):o},s.tension=function(t){return arguments.length?(a=t,s):a},s}o.svg.line=function(){return us(I)};var cs=o.map({linear:hs,"linear-closed":ps,step:function(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")},"step-before":fs,"step-after":ds,basis:ys,"basis-open":function(t){if(t.length<4)return hs(t);for(var e,n=[],r=-1,i=t.length,o=[0],a=[0];++r<3;)e=t[r],o.push(e[0]),a.push(e[1]);for(n.push(ms(bs,o)+","+ms(bs,a)),--r;++r<i;)e=t[r],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Es(n,o,a);return n.join("")},"basis-closed":function(t){for(var e,n,r=-1,i=t.length,o=i+4,a=[],s=[];++r<4;)n=t[r%i],a.push(n[0]),s.push(n[1]);for(e=[ms(bs,a),",",ms(bs,s)],--r;++r<o;)n=t[r%i],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Es(e,a,s);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var r,i,o=t[0][0],a=t[0][1],s=t[n][0]-o,l=t[n][1]-a,u=-1;++u<=n;)i=u/n,(r=t[u])[0]=e*r[0]+(1-e)*(o+i*s),r[1]=e*r[1]+(1-e)*(a+i*l);return ys(t)},cardinal:function(t,e){return t.length<3?hs(t):t[0]+_s(t,gs(t,e))},"cardinal-open":function(t,e){return t.length<4?hs(t):t[1]+_s(t.slice(1,-1),gs(t,e))},"cardinal-closed":function(t,e){return t.length<3?ps(t):t[0]+_s((t.push(t[0]),t),gs([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?hs(t):t[0]+_s(t,function(t){for(var e,n,r,i,o=[],a=function(t){for(var e=0,n=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=ws(i,o);++e<n;)r[e]=(a+(a=ws(i=o,o=t[e+1])))/2;return r[e]=a,r}(t),s=-1,l=t.length-1;++s<l;)e=ws(t[s],t[s+1]),E(e)<kt?a[s]=a[s+1]=0:(i=(n=a[s]/e)*n+(r=a[s+1]/e)*r)>9&&(i=3*e/Math.sqrt(i),a[s]=i*n,a[s+1]=i*r);for(s=-1;++s<=l;)i=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([i||0,a[s]*i||0]);return o}(t))}});function hs(t){return t.length>1?t.join("L"):t+"Z"}function ps(t){return t.join("L")+"Z"}function fs(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function ds(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function _s(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return hs(t);var n=t.length!=e.length,r="",i=t[0],o=t[1],a=e[0],s=a,l=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],l=2),e.length>1){s=e[1],o=t[l],l++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var u=2;u<e.length;u++,l++)o=t[l],s=e[u],r+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var c=t[l];r+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function gs(t,e){for(var n,r=[],i=(1-e)/2,o=t[0],a=t[1],s=1,l=t.length;++s<l;)n=o,o=a,a=t[s],r.push([i*(a[0]-n[0]),i*(a[1]-n[1])]);return r}function ys(t){if(t.length<3)return hs(t);var e=1,n=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],s=[o,o,o,r[1]],l=[i,",",o,"L",ms(bs,a),",",ms(bs,s)];for(t.push(t[n-1]);++e<=n;)r=t[e],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),Es(l,a,s);return t.pop(),l.push("L",r),l.join("")}function ms(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}cs.forEach((function(t,e){e.key=t,e.closed=/-closed$/.test(t)}));var vs=[0,2/3,1/3,0],xs=[0,1/3,2/3,0],bs=[0,1/6,2/3,1/6];function Es(t,e,n){t.push("C",ms(vs,e),",",ms(vs,n),",",ms(xs,e),",",ms(xs,n),",",ms(bs,e),",",ms(bs,n))}function ws(t,e){return(e[1]-t[1])/(e[0]-t[0])}function As(t){for(var e,n,r,i=-1,o=t.length;++i<o;)n=(e=t[i])[0],r=e[1]-Nt,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function Ms(t){var e=ui,n=ui,r=0,i=ci,o=Jn,a=hs,s=a.key,l=a,u="L",c=.7;function h(s){var h,p,f,d=[],_=[],g=[],y=-1,m=s.length,v=xe(e),x=xe(r),b=e===n?function(){return p}:xe(n),E=r===i?function(){return f}:xe(i);function w(){d.push("M",a(t(g),c),u,l(t(_.reverse()),c),"Z")}for(;++y<m;)o.call(this,h=s[y],y)?(_.push([p=+v.call(this,h,y),f=+x.call(this,h,y)]),g.push([+b.call(this,h,y),+E.call(this,h,y)])):_.length&&(w(),_=[],g=[]);return _.length&&w(),d.length?d.join(""):null}return h.x=function(t){return arguments.length?(e=n=t,h):n},h.x0=function(t){return arguments.length?(e=t,h):e},h.x1=function(t){return arguments.length?(n=t,h):n},h.y=function(t){return arguments.length?(r=i=t,h):i},h.y0=function(t){return arguments.length?(r=t,h):r},h.y1=function(t){return arguments.length?(i=t,h):i},h.defined=function(t){return arguments.length?(o=t,h):o},h.interpolate=function(t){return arguments.length?(s="function"==typeof t?a=t:(a=cs.get(t)||hs).key,l=a.reverse||a,u=a.closed?"M":"L",h):s},h.tension=function(t){return arguments.length?(c=t,h):c},h}function Cs(t){return t.radius}function Ss(t){return[t.x,t.y]}function ks(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-Nt;return[n*Math.cos(r),n*Math.sin(r)]}}function Ts(){return 64}function Ds(){return"circle"}function Ls(t){var e=Math.sqrt(t/Dt);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}o.svg.line.radial=function(){var t=us(As);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},fs.reverse=ds,ds.reverse=fs,o.svg.area=function(){return Ms(I)},o.svg.area.radial=function(){var t=Ms(As);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},o.svg.chord=function(){var t=Gr,e=Zr,n=Cs,r=is,i=os;function o(n,r){var i,o,u=a(this,t,n,r),c=a(this,e,n,r);return"M"+u.p0+s(u.r,u.p1,u.a1-u.a0)+(o=c,((i=u).a0==o.a0&&i.a1==o.a1?l(u.r,u.p1,u.r,u.p0):l(u.r,u.p1,c.r,c.p0)+s(c.r,c.p1,c.a1-c.a0)+l(c.r,c.p1,u.r,u.p0))+"Z")}function a(t,e,o,a){var s=e.call(t,o,a),l=n.call(t,s,a),u=r.call(t,s,a)-Nt,c=i.call(t,s,a)-Nt;return{r:l,a0:u,a1:c,p0:[l*Math.cos(u),l*Math.sin(u)],p1:[l*Math.cos(c),l*Math.sin(c)]}}function s(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Dt)+",1 "+e}function l(t,e,n,r){return"Q 0,0 "+r}return o.radius=function(t){return arguments.length?(n=xe(t),o):n},o.source=function(e){return arguments.length?(t=xe(e),o):t},o.target=function(t){return arguments.length?(e=xe(t),o):e},o.startAngle=function(t){return arguments.length?(r=xe(t),o):r},o.endAngle=function(t){return arguments.length?(i=xe(t),o):i},o},o.svg.diagonal=function(){var t=Gr,e=Zr,n=Ss;function r(r,i){var o=t.call(this,r,i),a=e.call(this,r,i),s=(o.y+a.y)/2,l=[o,{x:o.x,y:s},{x:a.x,y:s},a];return"M"+(l=l.map(n))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}return r.source=function(e){return arguments.length?(t=xe(e),r):t},r.target=function(t){return arguments.length?(e=xe(t),r):e},r.projection=function(t){return arguments.length?(n=t,r):n},r},o.svg.diagonal.radial=function(){var t=o.svg.diagonal(),e=Ss,n=t.projection;return t.projection=function(t){return arguments.length?n(ks(e=t)):e},t},o.svg.symbol=function(){var t=Ds,e=Ts;function n(n,r){return(Ps.get(t.call(this,n,r))||Ls)(e.call(this,n,r))}return n.type=function(e){return arguments.length?(t=xe(e),n):t},n.size=function(t){return arguments.length?(e=xe(t),n):e},n};var Ps=o.map({circle:Ls,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Is)),n=e*Is;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Ns),n=e*Ns/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Ns),n=e*Ns/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});o.svg.symbolTypes=Ps.keys();var Ns=Math.sqrt(3),Is=Math.tan(30*It);Z.transition=function(t){for(var e,n,r=Fs||++Ws,i=Hs(t),o=[],a=Vs||{time:Date.now(),ease:go,delay:0,duration:250},s=-1,l=this.length;++s<l;){o.push(e=[]);for(var u=this[s],c=-1,h=u.length;++c<h;)(n=u[c])&&js(n,c,i,r,a),e.push(n)}return Os(o,i,r)},Z.interrupt=function(t){return this.each(null==t?Rs:Us(Hs(t)))};var Rs=Us(Hs());function Us(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Os(t,e,n){return j(t,Bs),t.namespace=e,t.id=n,t}var Fs,Vs,Bs=[],Ws=0;function Ys(t,e,n,r){var i=t.id,o=t.namespace;return dt(t,"function"==typeof n?function(t,a,s){t[o][i].tween.set(e,r(n.call(t,t.__data__,a,s)))}:(n=r(n),function(t){t[o][i].tween.set(e,n)}))}function zs(t){return null==t&&(t=""),function(){this.textContent=t}}function Hs(t){return null==t?"__transition__":"__transition_"+t+"__"}function js(t,e,n,r,i){var o,a,s,l,u,c=t[n]||(t[n]={active:0,count:0}),h=c[r];function p(n){var i=c.active,p=c[i];for(var d in p&&(p.timer.c=null,p.timer.t=NaN,--c.count,delete c[i],p.event&&p.event.interrupt.call(t,t.__data__,p.index)),c)if(+d<r){var _=c[d];_.timer.c=null,_.timer.t=NaN,--c.count,delete c[d]}a.c=f,ke((function(){return a.c&&f(n||1)&&(a.c=null,a.t=NaN),1}),0,o),c.active=r,h.event&&h.event.start.call(t,t.__data__,e),u=[],h.tween.forEach((function(n,r){(r=r.call(t,t.__data__,e))&&u.push(r)})),l=h.ease,s=h.duration}function f(i){for(var o=i/s,a=l(o),p=u.length;p>0;)u[--p].call(t,a);if(o>=1)return h.event&&h.event.end.call(t,t.__data__,e),--c.count?delete c[r]:delete t[n],1}h||(o=i.time,a=ke((function(t){var e=h.delay;if(a.t=e+o,e<=t)return p(t-e);a.c=p}),0,o),h=c[r]={tween:new M,time:o,timer:a,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++c.count)}Bs.call=Z.call,Bs.empty=Z.empty,Bs.node=Z.node,Bs.size=Z.size,o.transition=function(t,e){return t&&t.transition?Fs?t.transition(e):t:o.selection().transition(t)},o.transition.prototype=Bs,Bs.select=function(t){var e,n,r,i=this.id,o=this.namespace,a=[];t=Q(t);for(var s=-1,l=this.length;++s<l;){a.push(e=[]);for(var u=this[s],c=-1,h=u.length;++c<h;)(r=u[c])&&(n=t.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),js(n,c,o,i,r[o][i]),e.push(n)):e.push(null)}return Os(a,o,i)},Bs.selectAll=function(t){var e,n,r,i,o,a=this.id,s=this.namespace,l=[];t=$(t);for(var u=-1,c=this.length;++u<c;)for(var h=this[u],p=-1,f=h.length;++p<f;)if(r=h[p]){o=r[s][a],n=t.call(r,r.__data__,p,u),l.push(e=[]);for(var d=-1,_=n.length;++d<_;)(i=n[d])&&js(i,d,s,a,o),e.push(i)}return Os(l,s,a)},Bs.filter=function(t){var e,n,r=[];"function"!=typeof t&&(t=pt(t));for(var i=0,o=this.length;i<o;i++){r.push(e=[]);for(var a,s=0,l=(a=this[i]).length;s<l;s++)(n=a[s])&&t.call(n,n.__data__,s,i)&&e.push(n)}return Os(r,this.namespace,this.id)},Bs.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):dt(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},Bs.attr=function(t,e){if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var n="transform"==t?So:oo,r=o.ns.qualify(t);function i(){this.removeAttribute(r)}function a(){this.removeAttributeNS(r.space,r.local)}function s(t){return null==t?i:(t+="",function(){var e,i=this.getAttribute(r);return i!==t&&(e=n(i,t),function(t){this.setAttribute(r,e(t))})})}function l(t){return null==t?a:(t+="",function(){var e,i=this.getAttributeNS(r.space,r.local);return i!==t&&(e=n(i,t),function(t){this.setAttributeNS(r.space,r.local,e(t))})})}return Ys(this,"attr."+t,e,r.local?l:s)},Bs.attrTween=function(t,e){var n=o.ns.qualify(t);return this.tween("attr."+t,n.local?function(t,r){var i=e.call(this,t,r,this.getAttributeNS(n.space,n.local));return i&&function(t){this.setAttributeNS(n.space,n.local,i(t))}}:function(t,r){var i=e.call(this,t,r,this.getAttribute(n));return i&&function(t){this.setAttribute(n,i(t))}})},Bs.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=""),t)this.style(n,t[n],e);return this}n=""}function i(){this.style.removeProperty(t)}function o(e){return null==e?i:(e+="",function(){var r,i=c(this).getComputedStyle(this,null).getPropertyValue(t);return i!==e&&(r=oo(i,e),function(e){this.style.setProperty(t,r(e),n)})})}return Ys(this,"style."+t,e,o)},Bs.styleTween=function(t,e,n){function r(r,i){var o=e.call(this,r,i,c(this).getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,r)},Bs.text=function(t){return Ys(this,"text",t,zs)},Bs.remove=function(){var t=this.namespace;return this.each("end.transition",(function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)}))},Bs.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=o.ease.apply(o,arguments)),dt(this,(function(r){r[n][e].ease=t})))},Bs.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:dt(this,"function"==typeof t?function(r,i,o){r[n][e].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[n][e].delay=t}))},Bs.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:dt(this,"function"==typeof t?function(r,i,o){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},Bs.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Vs,a=Fs;try{Fs=n,dt(this,(function(e,i,o){Vs=e[r][n],t.call(e,e.__data__,i,o)}))}finally{Vs=i,Fs=a}}else dt(this,(function(i){var a=i[r][n];(a.event||(a.event=o.dispatch("start","end","interrupt"))).on(t,e)}));return this},Bs.transition=function(){for(var t,e,n,r=this.id,i=++Ws,o=this.namespace,a=[],s=0,l=this.length;s<l;s++){a.push(t=[]);for(var u,c=0,h=(u=this[s]).length;c<h;c++)(e=u[c])&&js(e,c,o,i,{time:(n=e[o][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return Os(a,o,i)},o.svg.axis=function(){var t,e=o.scale.linear(),n=Ks,r=6,i=6,a=3,l=[10],u=null;function c(s){s.each((function(){var s,c=o.select(this),h=this.__chart__||e,p=this.__chart__=e.copy(),f=null==u?p.ticks?p.ticks.apply(p,l):p.domain():u,d=null==t?p.tickFormat?p.tickFormat.apply(p,l):I:t,_=c.selectAll(".tick").data(f,p),g=_.enter().insert("g",".domain").attr("class","tick").style("opacity",kt),y=o.transition(_.exit()).style("opacity",kt).remove(),m=o.transition(_.order()).style("opacity",1),v=Math.max(r,0)+a,x=Ca(p),b=c.selectAll(".domain").data([0]),E=(b.enter().append("path").attr("class","domain"),o.transition(b));g.append("line"),g.append("text");var w,A,M,C,S=g.select("line"),k=m.select("line"),T=_.select("text").text(d),D=g.select("text"),L=m.select("text"),P="top"===n||"left"===n?-1:1;if("bottom"===n||"top"===n?(s=Xs,w="x",M="y",A="x2",C="y2",T.attr("dy",P<0?"0em":".71em").style("text-anchor","middle"),E.attr("d","M"+x[0]+","+P*i+"V0H"+x[1]+"V"+P*i)):(s=Gs,w="y",M="x",A="y2",C="x2",T.attr("dy",".32em").style("text-anchor",P<0?"end":"start"),E.attr("d","M"+P*i+","+x[0]+"H0V"+x[1]+"H"+P*i)),S.attr(C,P*r),D.attr(M,P*v),k.attr(A,0).attr(C,P*r),L.attr(w,0).attr(M,P*v),p.rangeBand){var N=p,R=N.rangeBand()/2;h=p=function(t){return N(t)+R}}else h.rangeBand?h=p:y.call(s,p,h);g.call(s,h,p),m.call(s,p,p)}))}return c.scale=function(t){return arguments.length?(e=t,c):e},c.orient=function(t){return arguments.length?(n=t in qs?t+"":Ks,c):n},c.ticks=function(){return arguments.length?(l=s(arguments),c):l},c.tickValues=function(t){return arguments.length?(u=t,c):u},c.tickFormat=function(e){return arguments.length?(t=e,c):t},c.tickSize=function(t){var e=arguments.length;return e?(r=+t,i=+arguments[e-1],c):r},c.innerTickSize=function(t){return arguments.length?(r=+t,c):r},c.outerTickSize=function(t){return arguments.length?(i=+t,c):i},c.tickPadding=function(t){return arguments.length?(a=+t,c):a},c.tickSubdivide=function(){return arguments.length&&c},c};var Ks="bottom",qs={top:1,right:1,bottom:1,left:1};function Xs(t,e,n){t.attr("transform",(function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"}))}function Gs(t,e,n){t.attr("transform",(function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"}))}o.svg.brush=function(){var t,e,n=z(p,"brushstart","brush","brushend"),r=null,i=null,a=[0,0],s=[0,0],l=!0,u=!0,h=Qs[0];function p(t){t.each((function(){var t=o.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g),e=t.selectAll(".background").data([0]);e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=t.selectAll(".resize").data(h,I);n.exit().remove(),n.enter().append("g").attr("class",(function(t){return"resize "+t})).style("cursor",(function(t){return Zs[t]})).append("rect").attr("x",(function(t){return/[ew]$/.test(t)?-3:null})).attr("y",(function(t){return/^[ns]/.test(t)?-3:null})).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",p.empty()?"none":null);var a,s=o.transition(t),l=o.transition(e);r&&(a=Ca(r),l.attr("x",a[0]).attr("width",a[1]-a[0]),d(s)),i&&(a=Ca(i),l.attr("y",a[0]).attr("height",a[1]-a[0]),_(s)),f(s)}))}function f(t){t.selectAll(".resize").attr("transform",(function(t){return"translate("+a[+/e$/.test(t)]+","+s[+/^s/.test(t)]+")"}))}function d(t){t.select(".extent").attr("x",a[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",a[1]-a[0])}function _(t){t.select(".extent").attr("y",s[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",s[1]-s[0])}function g(){var h,g,y=this,m=o.select(o.event.target),v=n.of(y,arguments),x=o.select(y),b=m.datum(),E=!/^(n|s)$/.test(b)&&r,w=!/^(e|w)$/.test(b)&&i,A=m.classed("extent"),M=At(y),C=o.mouse(y),S=o.select(c(y)).on("keydown.brush",D).on("keyup.brush",L);if(o.event.changedTouches?S.on("touchmove.brush",P).on("touchend.brush",I):S.on("mousemove.brush",P).on("mouseup.brush",I),x.interrupt().selectAll("*").interrupt(),A)C[0]=a[0]-C[0],C[1]=s[0]-C[1];else if(b){var k=+/w$/.test(b),T=+/^n/.test(b);g=[a[1-k]-C[0],s[1-T]-C[1]],C[0]=a[k],C[1]=s[T]}else o.event.altKey&&(h=C.slice());function D(){32==o.event.keyCode&&(A||(h=null,C[0]-=a[1],C[1]-=s[1],A=2),W())}function L(){32==o.event.keyCode&&2==A&&(C[0]+=a[1],C[1]+=s[1],A=0,W())}function P(){var t=o.mouse(y),e=!1;g&&(t[0]+=g[0],t[1]+=g[1]),A||(o.event.altKey?(h||(h=[(a[0]+a[1])/2,(s[0]+s[1])/2]),C[0]=a[+(t[0]<h[0])],C[1]=s[+(t[1]<h[1])]):h=null),E&&N(t,r,0)&&(d(x),e=!0),w&&N(t,i,1)&&(_(x),e=!0),e&&(f(x),v({type:"brush",mode:A?"move":"resize"}))}function N(n,r,i){var o,c,p=Ca(r),f=p[0],d=p[1],_=C[i],g=i?s:a,y=g[1]-g[0];if(A&&(f-=_,d-=y+_),o=(i?u:l)?Math.max(f,Math.min(d,n[i])):n[i],A?c=(o+=_)+y:(h&&(_=Math.max(f,Math.min(d,2*h[i]-o))),_<o?(c=o,o=_):c=_),g[0]!=o||g[1]!=c)return i?e=null:t=null,g[0]=o,g[1]=c,!0}function I(){P(),x.style("pointer-events","all").selectAll(".resize").style("display",p.empty()?"none":null),o.select("body").style("cursor",null),S.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),M(),v({type:"brushend"})}x.style("pointer-events","none").selectAll(".resize").style("display",null),o.select("body").style("cursor",m.style("cursor")),v({type:"brushstart"}),P()}return p.event=function(r){r.each((function(){var r=n.of(this,arguments),i={x:a,y:s,i:t,j:e},l=this.__chart__||i;this.__chart__=i,Fs?o.select(this).transition().each("start.brush",(function(){t=l.i,e=l.j,a=l.x,s=l.y,r({type:"brushstart"})})).tween("brush:brush",(function(){var n=ao(a,i.x),o=ao(s,i.y);return t=e=null,function(t){a=i.x=n(t),s=i.y=o(t),r({type:"brush",mode:"resize"})}})).each("end.brush",(function(){t=i.i,e=i.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})})):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))}))},p.x=function(t){return arguments.length?(h=Qs[!(r=t)<<1|!i],p):r},p.y=function(t){return arguments.length?(h=Qs[!r<<1|!(i=t)],p):i},p.clamp=function(t){return arguments.length?(r&&i?(l=!!t[0],u=!!t[1]):r?l=!!t:i&&(u=!!t),p):r&&i?[l,u]:r?l:i?u:null},p.extent=function(n){var o,l,u,c,h;return arguments.length?(r&&(o=n[0],l=n[1],i&&(o=o[0],l=l[0]),t=[o,l],r.invert&&(o=r(o),l=r(l)),l<o&&(h=o,o=l,l=h),o==a[0]&&l==a[1]||(a=[o,l])),i&&(u=n[0],c=n[1],r&&(u=u[1],c=c[1]),e=[u,c],i.invert&&(u=i(u),c=i(c)),c<u&&(h=u,u=c,c=h),u==s[0]&&c==s[1]||(s=[u,c])),p):(r&&(t?(o=t[0],l=t[1]):(o=a[0],l=a[1],r.invert&&(o=r.invert(o),l=r.invert(l)),l<o&&(h=o,o=l,l=h))),i&&(e?(u=e[0],c=e[1]):(u=s[0],c=s[1],i.invert&&(u=i.invert(u),c=i.invert(c)),c<u&&(h=u,u=c,c=h))),r&&i?[[o,u],[l,c]]:r?[o,l]:i&&[u,c])},p.clear=function(){return p.empty()||(a=[0,0],s=[0,0],t=e=null),p},p.empty=function(){return!!r&&a[0]==a[1]||!!i&&s[0]==s[1]},o.rebind(p,n,"on")};var Zs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Qs=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],$s=Fe.format=dn.timeFormat,Js=$s.utc,tl=Js("%Y-%m-%dT%H:%M:%S.%LZ");function el(t){return t.toISOString()}function nl(t,e,n){function r(e){return t(e)}function i(t,n){var r=(t[1]-t[0])/n,i=o.bisect(il,r);return i==il.length?[e.year,Ra(t.map((function(t){return t/31536e6})),n)[2]]:i?e[r/il[i-1]<il[i]/r?i-1:i]:[sl,Ra(t,n)[2]]}return r.invert=function(e){return rl(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(rl)},r.nice=function(t,e){var n=r.domain(),o=Ma(n),a=null==t?i(o,10):"number"==typeof t&&i(o,t);function s(n){return!isNaN(n)&&!t.range(n,rl(+n+1),e).length}return a&&(t=a[0],e=a[1]),r.domain(ka(n,e>1?{floor:function(e){for(;s(e=t.floor(e));)e=rl(e-1);return e},ceil:function(e){for(;s(e=t.ceil(e));)e=rl(+e+1);return e}}:t))},r.ticks=function(t,e){var n=Ma(r.domain()),o=null==t?i(n,10):"number"==typeof t?i(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],rl(+n[1]+1),e<1?1:e)},r.tickFormat=function(){return n},r.copy=function(){return nl(t.copy(),e,n)},Na(r,t)}function rl(t){return new Date(t)}$s.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?el:tl,el.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},el.toString=tl.toString,Fe.second=Ye((function(t){return new Ve(1e3*Math.floor(t/1e3))}),(function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))}),(function(t){return t.getSeconds()})),Fe.seconds=Fe.second.range,Fe.seconds.utc=Fe.second.utc.range,Fe.minute=Ye((function(t){return new Ve(6e4*Math.floor(t/6e4))}),(function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))}),(function(t){return t.getMinutes()})),Fe.minutes=Fe.minute.range,Fe.minutes.utc=Fe.minute.utc.range,Fe.hour=Ye((function(t){var e=t.getTimezoneOffset()/60;return new Ve(36e5*(Math.floor(t/36e5-e)+e))}),(function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))}),(function(t){return t.getHours()})),Fe.hours=Fe.hour.range,Fe.hours.utc=Fe.hour.utc.range,Fe.month=Ye((function(t){return(t=Fe.day(t)).setDate(1),t}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t){return t.getMonth()})),Fe.months=Fe.month.range,Fe.months.utc=Fe.month.utc.range;var il=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],ol=[[Fe.second,1],[Fe.second,5],[Fe.second,15],[Fe.second,30],[Fe.minute,1],[Fe.minute,5],[Fe.minute,15],[Fe.minute,30],[Fe.hour,1],[Fe.hour,3],[Fe.hour,6],[Fe.hour,12],[Fe.day,1],[Fe.day,2],[Fe.week,1],[Fe.month,1],[Fe.month,3],[Fe.year,1]],al=$s.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Jn]]),sl={range:function(t,e,n){return o.range(Math.ceil(t/n)*n,+e,n).map(rl)},floor:I,ceil:I};ol.year=Fe.year,Fe.scale=function(){return nl(o.scale.linear(),ol,al)};var ll=ol.map((function(t){return[t[0].utc,t[1]]})),ul=Js.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Jn]]);function cl(t){return JSON.parse(t.responseText)}function hl(t){var e=l.createRange();return e.selectNode(l.body),e.createContextualFragment(t.responseText)}ll.year=Fe.year.utc,Fe.scale.utc=function(){return nl(o.scale.linear(),ll,ul)},o.text=be((function(t){return t.responseText})),o.json=function(t,e){return Ee(t,"application/json",cl,e)},o.html=function(t,e){return Ee(t,"text/html",hl,e)},o.xml=be((function(t){return t.responseXML})),this.d3=o,void 0===(i="function"==typeof(r=o)?r.call(e,n,e,t):r)||(t.exports=i)}()},18:function(t,e,n){var r,i,o;o=this,r=[n(78)],void 0===(i=function(t){return o.Plottable=function(t){var e,n,r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)};return function(e){var n;(function(n){var r=window.Math;n.inRange=function(t,e,n){return r.min(e,n)<=t&&t<=r.max(e,n)},n.clamp=function(t,e,n){return r.min(r.max(e,t),n)},n.max=function(e,n,r){var i="function"==typeof n?n:null,o=null==i?n:r,a=null==i?t.max(e):t.max(e,i);return void 0!==a?a:o},n.min=function(e,n,r){var i="function"==typeof n?n:null,o=null==i?n:r,a=null==i?t.min(e):t.min(e,i);return void 0!==a?a:o},n.isNaN=function(t){return t!=t},n.isValidNumber=function(t){return"number"==typeof t&&!e.Utils.Math.isNaN(t)&&isFinite(t)},n.range=function(t,e,n){if(void 0===n&&(n=1),0===n)throw new Error("step cannot be 0");for(var i=r.max(r.ceil((e-t)/n),0),o=[],a=0;a<i;++a)o[a]=t+n*a;return o},n.distanceSquared=function(t,e){return r.pow(e.y-t.y,2)+r.pow(e.x-t.x,2)},n.degreesToRadians=function(t){return t/360*r.PI*2}})((n=e.Utils||(e.Utils={})).Math||(n.Math={}))}(e||(e={})),function(t){var e,n;e=t.Utils||(t.Utils={}),n=function(){function t(){"function"==typeof window.Map?this._es6Map=new window.Map:this._keyValuePairs=[]}return t.prototype.set=function(t,n){if(e.Math.isNaN(t))throw new Error("NaN may not be used as a key to the Map");if(null!=this._es6Map)return this._es6Map.set(t,n),this;for(var r=0;r<this._keyValuePairs.length;r++)if(this._keyValuePairs[r].key===t)return this._keyValuePairs[r].value=n,this;return this._keyValuePairs.push({key:t,value:n}),this},t.prototype.get=function(t){if(null!=this._es6Map)return this._es6Map.get(t);for(var e=0;e<this._keyValuePairs.length;e++)if(this._keyValuePairs[e].key===t)return this._keyValuePairs[e].value},t.prototype.has=function(t){if(null!=this._es6Map)return this._es6Map.has(t);for(var e=0;e<this._keyValuePairs.length;e++)if(this._keyValuePairs[e].key===t)return!0;return!1},t.prototype.forEach=function(t,e){var n=this;null==this._es6Map?this._keyValuePairs.forEach((function(r){t.call(e,r.value,r.key,n)})):this._es6Map.forEach((function(r,i){return t.call(e,r,i,n)}),e)},t.prototype.delete=function(t){if(null!=this._es6Map)return this._es6Map.delete(t);for(var e=0;e<this._keyValuePairs.length;e++)if(this._keyValuePairs[e].key===t)return this._keyValuePairs.splice(e,1),!0;return!1},t}(),e.Map=n}(e||(e={})),function(t){var e,n;e=t.Utils||(t.Utils={}),n=function(){function t(){"function"==typeof window.Set?this._es6Set=new window.Set:this._values=[],this.size=0}return t.prototype.add=function(t){return null!=this._es6Set?(this._es6Set.add(t),this.size=this._es6Set.size,this):(this.has(t)||(this._values.push(t),this.size=this._values.length),this)},t.prototype.delete=function(t){if(null!=this._es6Set){var e=this._es6Set.delete(t);return this.size=this._es6Set.size,e}var n=this._values.indexOf(t);return-1!==n&&(this._values.splice(n,1),this.size=this._values.length,!0)},t.prototype.has=function(t){return null!=this._es6Set?this._es6Set.has(t):-1!==this._values.indexOf(t)},t.prototype.forEach=function(t,e){var n=this;null==this._es6Set?this._values.forEach((function(r){t.call(e,r,r,n)})):this._es6Set.forEach((function(r,i){return t.call(e,r,i,n)}),e)},t}(),e.Set=n}(e||(e={})),function(e){var n;(function(e){var n=window.Math;e.elementBBox=function(t){var e;try{e=t.node().getBBox()}catch(t){e={x:0,y:0,width:0,height:0}}return e},e.SCREEN_REFRESH_RATE_MILLISECONDS=1e3/60,e.requestAnimationFramePolyfill=function(t){null!=window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,e.SCREEN_REFRESH_RATE_MILLISECONDS)},e.elementWidth=function(t){var e=window.getComputedStyle(t);return o(e,"width")+o(e,"padding-left")+o(e,"padding-right")+o(e,"border-left-width")+o(e,"border-right-width")},e.elementHeight=function(t){var e=window.getComputedStyle(t);return o(e,"height")+o(e,"padding-top")+o(e,"padding-bottom")+o(e,"border-top-width")+o(e,"border-bottom-width")},e.translate=function(e,n,r){var i=t.transform(e.attr("transform"));return null==n?i.translate:(r=null==r?0:r,i.translate[0]=n,i.translate[1]=r,e.attr("transform",i.toString()),e)},e.clientRectsOverlap=function(t,e){return!(n.floor(t.right)<=n.ceil(e.left)||n.ceil(t.left)>=n.floor(e.right)||n.floor(t.bottom)<=n.ceil(e.top)||n.ceil(t.top)>=n.floor(e.bottom))},e.clientRectInside=function(t,e){return n.floor(e.left)<=n.ceil(t.left)&&n.floor(e.top)<=n.ceil(t.top)&&n.floor(t.right)<=n.ceil(e.right)&&n.floor(t.bottom)<=n.ceil(e.bottom)},e.boundingSVG=function(t){var e=t.ownerSVGElement;return null!=e?e:"svg"===t.nodeName.toLowerCase()?t:null};var r=0;function i(t){if("number"==typeof t)return{min:t,max:t};if(t instanceof Object&&"min"in t&&"max"in t)return t;throw new Error("input '"+t+"' can't be parsed as an Range")}function o(t,e){var n=t.getPropertyValue(e);return parseFloat(n)||0}e.generateUniqueClipPathId=function(){return"plottableClipPath"+ ++r},e.intersectsBBox=function(t,e,n,r){void 0===r&&(r=.5);var o=i(t),a=i(e);return n.x+n.width>=o.min-r&&n.x<=o.max+r&&n.y+n.height>=a.min-r&&n.y<=a.max+r}})((n=e.Utils||(e.Utils={})).DOM||(n.DOM={}))}(e||(e={})),function(e){var n;(function(e){var n=window.Math;function r(e){var r=t.rgb(e),i=function(t){return(t/=255)<=.03928?t/12.92:n.pow((t+.055)/1.055,2.4)};return.2126*i(r.r)+.7152*i(r.g)+.0722*i(r.b)}e.contrast=function(t,e){var n=r(t)+.05,i=r(e)+.05;return n>i?n/i:i/n},e.lightenColor=function(e,n){return t.hsl(e).brighter(n).rgb().toString()},e.colorTest=function(t,e){t.classed(e,!0);var n=t.style("background-color");if("transparent"===n)return null;var r=/\((.+)\)/.exec(n)[1].split(",").map((function(t){var e=+t,n=e.toString(16);return e<16?"0"+n:n}));if(4===r.length&&"00"===r[3])return null;var i="#"+r.join("");return t.classed(e,!1),i}})((n=e.Utils||(e.Utils={})).Color||(n.Color={}))}(e||(e={})),function(e){var n;(function(e){var n=window.Array;e.add=function(t,e){if(t.length!==e.length)throw new Error("attempted to add arrays of unequal length");return t.map((function(n,r){return t[r]+e[r]}))},e.uniq=function(e){var n=t.set(),r=[];return e.forEach((function(t){n.has(String(t))||(n.add(String(t)),r.push(t))})),r},e.flatten=function(t){return n.prototype.concat.apply([],t)},e.createFilledArray=function(t,e){for(var n=[],r=0;r<e;r++)n[r]="function"==typeof t?t(r):t;return n}})((n=e.Utils||(e.Utils={})).Array||(n.Array={}))}(e||(e={})),function(t){var e,n;e=t.Utils||(t.Utils={}),n=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.callCallbacks=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];return this.forEach((function(n){n.apply(t,e)})),this},e}(e.Set),e.CallbackSet=n}(e||(e={})),function(e){var n;(function(e){var r=window.Math;function i(t){return String(t)}e.stack=function(e,r,o){var a=t.map(),s=t.map(),l=new n.Map;return e.forEach((function(t){var e=new n.Map;t.data().forEach((function(n,l){var u,c=i(r(n,l,t)),h=+o(n,l,t),p=h>=0?a:s;p.has(c)?(u=p.get(c),p.set(c,u+h)):(u=0,p.set(c,h)),e.set(c,{value:h,offset:u})})),l.set(t,e)})),l},e.stackedExtent=function(t,e,o){var a=[];t.forEach((function(t,n){n.data().forEach((function(r,s){if(null==o||o(r,s,n)){var l=t.get(i(e(r,s,n)));a.push(l.value+l.offset)}}))}));var s=n.Math.max(a,0),l=n.Math.min(a,0);return[r.min(l,0),r.max(0,s)]},e.normalizeKey=i})((n=e.Utils||(e.Utils={})).Stacking||(n.Stacking={}))}(e||(e={})),function(t){var e,n;e=t.Utils||(t.Utils={}),(n=e.Window||(e.Window={})).warn=function(e){t.Configs.SHOW_WARNINGS&&null!=window.console&&(null!=window.console.warn?console.warn(e):null!=window.console.log&&console.log(e))},n.setTimeout=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return 0===e?(t(n),-1):window.setTimeout(t,e,n)},n.deprecated=function(t,n,r){void 0===r&&(r=""),e.Window.warn("Method "+t+" has been deprecated in version "+n+". Please refer to the release notes. "+r)}}(e||(e={})),function(t){var e,n;e=t.Utils||(t.Utils={}),n=function(){function t(t){this._svg=t,this._measureRect=document.createElementNS(t.namespaceURI,"rect"),this._measureRect.setAttribute("class","measure-rect"),this._measureRect.setAttribute("style","opacity: 0; visibility: hidden;"),this._measureRect.setAttribute("width","1"),this._measureRect.setAttribute("height","1"),this._svg.appendChild(this._measureRect)}return t.getTranslator=function(n){var r=e.DOM.boundingSVG(n),i=r[t._TRANSLATOR_KEY];return null==i&&(i=new t(r),r[t._TRANSLATOR_KEY]=i),i},t.prototype.computePosition=function(t,e){this._measureRect.setAttribute("x","0"),this._measureRect.setAttribute("y","0");var n=this._measureRect.getBoundingClientRect(),r=n.left,i=n.top,o=100;this._measureRect.setAttribute("x",String(o)),this._measureRect.setAttribute("y",String(o));var a=(n=this._measureRect.getBoundingClientRect()).left,s=n.top;if(r===a||i===s)return null;var l=(a-r)/o,u=(s-i)/o;return this._measureRect.setAttribute("x",String((t-r)/l)),this._measureRect.setAttribute("y",String((e-i)/u)),{x:((n=this._measureRect.getBoundingClientRect()).left-r)/l,y:(n.top-i)/u}},t.prototype.insideSVG=function(t){return e.DOM.boundingSVG(t.target)===this._svg},t._TRANSLATOR_KEY="__Plottable_ClientToSVGTranslator",t}(),e.ClientToSVGTranslator=n}(e||(e={})),function(t){var e;(e=t.Configs||(t.Configs={})).SHOW_WARNINGS=!0,e.ADD_TITLE_ELEMENTS=!0}(e||(e={})),function(t){t.version="2.4.0"}(e||(e={})),function(t){var e=function(){function e(e,n){void 0===e&&(e=[]),void 0===n&&(n={}),this._data=e,this._metadata=n,this._callbacks=new t.Utils.CallbackSet}return e.prototype.onUpdate=function(t){return this._callbacks.add(t),this},e.prototype.offUpdate=function(t){return this._callbacks.delete(t),this},e.prototype.data=function(t){return null==t?this._data:(this._data=t,this._callbacks.callCallbacks(this),this)},e.prototype.metadata=function(t){return null==t?this._metadata:(this._metadata=t,this._callbacks.callCallbacks(this),this)},e}();t.Dataset=e}(e||(e={})),function(t){!function(e){var n=function(){function e(){}return e.prototype.render=function(){t.RenderController.flush()},e}();e.Immediate=n;var r=function(){function e(){}return e.prototype.render=function(){t.Utils.DOM.requestAnimationFramePolyfill(t.RenderController.flush)},e}();e.AnimationFrame=r;var i=function(){function e(){this._timeoutMsec=t.Utils.DOM.SCREEN_REFRESH_RATE_MILLISECONDS}return e.prototype.render=function(){setTimeout(t.RenderController.flush,this._timeoutMsec)},e}();e.Timeout=i}(t.RenderPolicies||(t.RenderPolicies={}))}(e||(e={})),function(t){!function(e){var n,r=new t.Utils.Set,i=new t.Utils.Set,o=!1,a=!1;!function(t){t.IMMEDIATE="immediate",t.ANIMATION_FRAME="animationframe",t.TIMEOUT="timeout"}(n=e.Policy||(e.Policy={}));var s=new t.RenderPolicies.AnimationFrame;function l(){o||(o=!0,s.render())}e.renderPolicy=function(e){if(null==e)return s;switch(e.toLowerCase()){case n.IMMEDIATE:s=new t.RenderPolicies.Immediate;break;case n.ANIMATION_FRAME:s=new t.RenderPolicies.AnimationFrame;break;case n.TIMEOUT:s=new t.RenderPolicies.Timeout;break;default:t.Utils.Window.warn("Unrecognized renderPolicy: "+e)}},e.registerToRender=function(e){a&&t.Utils.Window.warn("Registered to render while other components are flushing: request may be ignored"),r.add(e),l()},e.registerToComputeLayout=function(t){i.add(t),r.add(t),l()},e.flush=function(){if(o){i.forEach((function(t){return t.computeLayout()})),r.forEach((function(t){return t.render()})),a=!0;var e=new t.Utils.Set;r.forEach((function(t){try{t.renderImmediately()}catch(n){window.setTimeout((function(){throw n}),0),e.add(t)}})),i=new t.Utils.Set,r=e,o=!1,a=!1}}}(t.RenderController||(t.RenderController={}))}(e||(e={})),function(e){!function(e){function n(t){if(t<0||t>20)throw new RangeError("Formatter precision must be between 0 and 20");if(t!==Math.floor(t))throw new RangeError("Formatter precision must be an integer")}e.currency=function(t,n,r){void 0===t&&(t=2),void 0===n&&(n="$"),void 0===r&&(r=!0);var i=e.fixed(t);return function(t){var e=i(Math.abs(t));return""!==e&&(r?e=n+e:e+=n,t<0&&(e="-"+e)),e}},e.fixed=function(t){return void 0===t&&(t=3),n(t),function(e){return e.toFixed(t)}},e.general=function(t){return void 0===t&&(t=3),n(t),function(e){if("number"==typeof e){var n=Math.pow(10,t);return String(Math.round(e*n)/n)}return String(e)}},e.identity=function(){return function(t){return String(t)}},e.percentage=function(t){void 0===t&&(t=0);var n=e.fixed(t);return function(t){var e=100*t,r=t.toString(),i=Math.pow(10,r.length-(r.indexOf(".")+1));return e=parseInt((e*i).toString(),10)/i,n(e)+"%"}},e.siSuffix=function(e){return void 0===e&&(e=3),n(e),function(n){return t.format("."+e+"s")(n)}},e.shortScale=function(e){void 0===e&&(e=3),n(e);var r="KMBTQ",i=t.format("."+e+"e"),o=t.format("."+e+"f"),a=Math.pow(10,3*(r.length+1)),s=Math.pow(10,-e);return function(t){var e=Math.abs(t);if((e<s||e>=a)&&0!==e)return i(t);for(var n=-1;e>=Math.pow(1e3,n+2)&&n<r.length-1;)n++;var l="";return l=-1===n?o(t):o(t/Math.pow(1e3,n+1))+r[n],(t>0&&"1000"===l.substr(0,4)||t<0&&"-1000"===l.substr(0,5))&&(n<r.length-1?(n++,l=o(t/Math.pow(1e3,n+1))+r[n]):l=i(t)),l}},e.multiTime=function(){var e=[{specifier:".%L",predicate:function(t){return 0!==t.getMilliseconds()}},{specifier:":%S",predicate:function(t){return 0!==t.getSeconds()}},{specifier:"%I:%M",predicate:function(t){return 0!==t.getMinutes()}},{specifier:"%I %p",predicate:function(t){return 0!==t.getHours()}},{specifier:"%a %d",predicate:function(t){return 0!==t.getDay()&&1!==t.getDate()}},{specifier:"%b %d",predicate:function(t){return 1!==t.getDate()}},{specifier:"%b",predicate:function(t){return 0!==t.getMonth()}}];return function(n){var r=e.filter((function(t){return t.predicate(n)})),i=r.length>0?r[0].specifier:"%Y";return t.time.format(i)(n)}},e.time=function(e){return t.time.format(e)}}(e.Formatters||(e.Formatters={}))}(e||(e={})),function(e){var n;(n=e.SymbolFactories||(e.SymbolFactories={})).circle=function(){return function(e){return t.svg.symbol().type("circle").size(Math.PI*Math.pow(e/2,2))(null)}},n.square=function(){return function(e){return t.svg.symbol().type("square").size(Math.pow(e,2))(null)}},n.cross=function(){return function(e){return t.svg.symbol().type("cross").size(5/9*Math.pow(e,2))(null)}},n.diamond=function(){return function(e){return t.svg.symbol().type("diamond").size(Math.tan(Math.PI/6)*Math.pow(e,2)/2)(null)}},n.triangleUp=function(){return function(e){return t.svg.symbol().type("triangle-up").size(Math.sqrt(3)*Math.pow(e/2,2))(null)}},n.triangleDown=function(){return function(e){return t.svg.symbol().type("triangle-down").size(Math.sqrt(3)*Math.pow(e/2,2))(null)}}}(e||(e={})),function(t){var e=function(){function e(){this._autoDomainAutomatically=!0,this._domainModificationInProgress=!1,this._callbacks=new t.Utils.CallbackSet,this._includedValuesProviders=new t.Utils.Set}return e.prototype.extentOfValues=function(t){return[]},e.prototype._getAllIncludedValues=function(){var t=this,e=[];return this._includedValuesProviders.forEach((function(n){var r=n(t);e=e.concat(r)})),e},e.prototype._getExtent=function(){return[]},e.prototype.onUpdate=function(t){return this._callbacks.add(t),this},e.prototype.offUpdate=function(t){return this._callbacks.delete(t),this},e.prototype._dispatchUpdate=function(){this._callbacks.callCallbacks(this)},e.prototype.autoDomain=function(){return this._autoDomainAutomatically=!0,this._setDomain(this._getExtent()),this},e.prototype._autoDomainIfAutomaticMode=function(){this._autoDomainAutomatically&&this.autoDomain()},e.prototype.scale=function(t){throw new Error("Subclasses should override scale")},e.prototype.domain=function(t){return null==t?this._getDomain():(this._autoDomainAutomatically=!1,this._setDomain(t),this)},e.prototype._getDomain=function(){throw new Error("Subclasses should override _getDomain")},e.prototype._setDomain=function(t){this._domainModificationInProgress||(this._domainModificationInProgress=!0,this._backingScaleDomain(t),this._dispatchUpdate(),this._domainModificationInProgress=!1)},e.prototype._backingScaleDomain=function(t){throw new Error("Subclasses should override _backingDomain")},e.prototype.range=function(t){return null==t?this._getRange():(this._setRange(t),this)},e.prototype._getRange=function(){throw new Error("Subclasses should override _getRange")},e.prototype._setRange=function(t){throw new Error("Subclasses should override _setRange")},e.prototype.addIncludedValuesProvider=function(t){return this._includedValuesProviders.add(t),this._autoDomainIfAutomaticMode(),this},e.prototype.removeIncludedValuesProvider=function(t){return this._includedValuesProviders.delete(t),this._autoDomainIfAutomaticMode(),this},e}();t.Scale=e}(e||(e={})),function(e){var n=function(n){function i(){n.call(this),this._tickGenerator=function(t){return t.defaultTicks()},this._padProportion=.05,this._snappingDomainEnabled=!0,this._paddingExceptionsProviders=new e.Utils.Set}return r(i,n),i.prototype.autoDomain=function(){return this._domainMin=null,this._domainMax=null,n.prototype.autoDomain.call(this),this},i.prototype._autoDomainIfAutomaticMode=function(){if(null==this._domainMin||null==this._domainMax){var t=this._getExtent();if(null!=this._domainMin){var e=t[1];return this._domainMin>=e&&(e=this._expandSingleValueDomain([this._domainMin,this._domainMin])[1]),void this._setDomain([this._domainMin,e])}if(null!=this._domainMax){var r=t[0];return this._domainMax<=r&&(r=this._expandSingleValueDomain([this._domainMax,this._domainMax])[0]),void this._setDomain([r,this._domainMax])}n.prototype._autoDomainIfAutomaticMode.call(this)}else this._setDomain([this._domainMin,this._domainMax])},i.prototype._getExtent=function(){var t=this._getAllIncludedValues(),n=this._defaultExtent();if(0!==t.length){var r=[e.Utils.Math.min(t,n[0]),e.Utils.Math.max(t,n[1])];n=this._padDomain(r)}return null!=this._domainMin&&(n[0]=this._domainMin),null!=this._domainMax&&(n[1]=this._domainMax),n},i.prototype.addPaddingExceptionsProvider=function(t){return this._paddingExceptionsProviders.add(t),this._autoDomainIfAutomaticMode(),this},i.prototype.removePaddingExceptionsProvider=function(t){return this._paddingExceptionsProviders.delete(t),this._autoDomainIfAutomaticMode(),this},i.prototype.padProportion=function(t){if(null==t)return this._padProportion;if(t<0)throw new Error("padProportion must be non-negative");return this._padProportion=t,this._autoDomainIfAutomaticMode(),this},i.prototype._padDomain=function(t){var e=this;if(t[0].valueOf()===t[1].valueOf())return this._expandSingleValueDomain(t);if(0===this._padProportion)return t;var n=this._padProportion/2,r=t[0],i=t[1],o=!1,a=!1;this._paddingExceptionsProviders.forEach((function(t){t(e).forEach((function(t){t.valueOf()===r.valueOf()&&(o=!0),t.valueOf()===i.valueOf()&&(a=!0)}))}));var s=this._backingScaleDomain();this._backingScaleDomain(t);var l=o?r:this.invert(this.scale(r)-(this.scale(i)-this.scale(r))*n),u=a?i:this.invert(this.scale(i)+(this.scale(i)-this.scale(r))*n);return this._backingScaleDomain(s),this._snappingDomainEnabled?this._niceDomain([l,u]):[l,u]},i.prototype.snappingDomainEnabled=function(t){return null==t?this._snappingDomainEnabled:(this._snappingDomainEnabled=t,this._autoDomainIfAutomaticMode(),this)},i.prototype._expandSingleValueDomain=function(t){return t},i.prototype.invert=function(t){throw new Error("Subclasses should override invert")},i.prototype.domain=function(t){return null!=t&&(this._domainMin=t[0],this._domainMax=t[1]),n.prototype.domain.call(this,t)},i.prototype.domainMin=function(t){return null==t?this.domain()[0]:(this._domainMin=t,this._autoDomainIfAutomaticMode(),this)},i.prototype.domainMax=function(t){return null==t?this.domain()[1]:(this._domainMax=t,this._autoDomainIfAutomaticMode(),this)},i.prototype.extentOfValues=function(n){var r=t.extent(n.filter((function(t){return e.Utils.Math.isValidNumber(+t)})));return null==r[0]||null==r[1]?[]:r},i.prototype._setDomain=function(t){var r=function(t){return e.Utils.Math.isNaN(t)||t===1/0||t===-1/0};r(t[0])||r(t[1])?e.Utils.Window.warn("Warning: QuantitativeScales cannot take NaN or Infinity as a domain value. Ignoring."):n.prototype._setDomain.call(this,t)},i.prototype.defaultTicks=function(){throw new Error("Subclasses should override _getDefaultTicks")},i.prototype.ticks=function(){return this._tickGenerator(this)},i.prototype._niceDomain=function(t,e){throw new Error("Subclasses should override _niceDomain")},i.prototype._defaultExtent=function(){throw new Error("Subclasses should override _defaultExtent")},i.prototype.tickGenerator=function(t){return null==t?this._tickGenerator:(this._tickGenerator=t,this)},i._DEFAULT_NUM_TICKS=10,i}(e.Scale);e.QuantitativeScale=n}(e||(e={})),function(e){var n,i;n=e.Scales||(e.Scales={}),i=function(e){function i(){e.call(this),this._d3Scale=t.scale.linear()}return r(i,e),i.prototype._defaultExtent=function(){return[0,1]},i.prototype._expandSingleValueDomain=function(t){return t[0]===t[1]?[t[0]-1,t[1]+1]:t},i.prototype.scale=function(t){return this._d3Scale(t)},i.prototype._getDomain=function(){return this._backingScaleDomain()},i.prototype._backingScaleDomain=function(t){return null==t?this._d3Scale.domain():(this._d3Scale.domain(t),this)},i.prototype._getRange=function(){return this._d3Scale.range()},i.prototype._setRange=function(t){this._d3Scale.range(t)},i.prototype.invert=function(t){return this._d3Scale.invert(t)},i.prototype.defaultTicks=function(){return this._d3Scale.ticks(n.Linear._DEFAULT_NUM_TICKS)},i.prototype._niceDomain=function(t,e){return this._d3Scale.copy().domain(t).nice(e).domain()},i}(e.QuantitativeScale),n.Linear=i}(e||(e={})),function(e){var n,i;n=e.Scales||(e.Scales={}),i=function(i){function o(e){if(void 0===e&&(e=10),i.call(this),this._d3Scale=t.scale.linear(),this._base=e,this._pivot=this._base,this._setDomain(this._defaultExtent()),e<=1)throw new Error("ModifiedLogScale: The base must be > 1")}return r(o,i),o.prototype._adjustedLog=function(t){var e=t<0?-1:1;return(t*=e)<this._pivot&&(t+=(this._pivot-t)/this._pivot),(t=Math.log(t)/Math.log(this._base))*e},o.prototype._invertedAdjustedLog=function(t){var e=t<0?-1:1;return t*=e,(t=Math.pow(this._base,t))<this._pivot&&(t=this._pivot*(t-1)/(this._pivot-1)),t*e},o.prototype.scale=function(t){return this._d3Scale(this._adjustedLog(t))},o.prototype.invert=function(t){return this._invertedAdjustedLog(this._d3Scale.invert(t))},o.prototype._getDomain=function(){return this._untransformedDomain},o.prototype._setDomain=function(t){this._untransformedDomain=t;var e=[this._adjustedLog(t[0]),this._adjustedLog(t[1])];i.prototype._setDomain.call(this,e)},o.prototype._backingScaleDomain=function(t){return null==t?this._d3Scale.domain():(this._d3Scale.domain(t),this)},o.prototype.ticks=function(){var r=function(t,e,n){return[t,e,n].sort((function(t,e){return t-e}))[1]},i=e.Utils.Math.min(this._untransformedDomain,0),o=e.Utils.Math.max(this._untransformedDomain,0),a=i,s=r(i,o,-this._pivot),l=r(i,o,this._pivot),u=o,c=this._logTicks(-s,-a).map((function(t){return-t})).reverse(),h=this._logTicks(l,u),p=Math.max(i,-this._pivot),f=Math.min(o,this._pivot),d=t.scale.linear().domain([p,f]).ticks(this._howManyTicks(p,f)),_=c.concat(d).concat(h);return _.length<=1&&(_=t.scale.linear().domain([i,o]).ticks(n.ModifiedLog._DEFAULT_NUM_TICKS)),_},o.prototype._logTicks=function(n,r){var i=this,o=this._howManyTicks(n,r);if(0===o)return[];var a=Math.floor(Math.log(n)/Math.log(this._base)),s=Math.ceil(Math.log(r)/Math.log(this._base)),l=t.range(s,a,-Math.ceil((s-a)/o)),u=t.range(this._base,1,-(this._base-1)).map(Math.floor),c=e.Utils.Array.uniq(u),h=l.map((function(t){return c.map((function(e){return Math.pow(i._base,t-1)*e}))}));return e.Utils.Array.flatten(h).filter((function(t){return n<=t&&t<=r})).sort((function(t,e){return t-e}))},o.prototype._howManyTicks=function(t,r){var i=this._adjustedLog(e.Utils.Math.min(this._untransformedDomain,0)),o=this._adjustedLog(e.Utils.Math.max(this._untransformedDomain,0)),a=this._adjustedLog(t),s=(this._adjustedLog(r)-a)/(o-i);return Math.ceil(s*n.ModifiedLog._DEFAULT_NUM_TICKS)},o.prototype._niceDomain=function(t,e){return t},o.prototype._defaultExtent=function(){return[0,this._base]},o.prototype._expandSingleValueDomain=function(t){if(t[0]===t[1]){var e=t[0];return e>0?[e/this._base,e*this._base]:0===e?[-this._base,this._base]:[e*this._base,e/this._base]}return t},o.prototype._getRange=function(){return this._d3Scale.range()},o.prototype._setRange=function(t){this._d3Scale.range(t)},o.prototype.defaultTicks=function(){return this._d3Scale.ticks(n.ModifiedLog._DEFAULT_NUM_TICKS)},o}(e.QuantitativeScale),n.ModifiedLog=i}(e||(e={})),function(e){var n,i;n=e.Scales||(e.Scales={}),i=function(n){function i(){n.call(this),this._range=[0,1],this._d3Scale=t.scale.ordinal(),this._innerPadding=i._convertToPlottableInnerPadding(.3),this._outerPadding=i._convertToPlottableOuterPadding(.5,.3)}return r(i,n),i.prototype.extentOfValues=function(t){return e.Utils.Array.uniq(t)},i.prototype._getExtent=function(){return e.Utils.Array.uniq(this._getAllIncludedValues())},i.prototype.domain=function(t){return n.prototype.domain.call(this,t)},i.prototype.range=function(t){return n.prototype.range.call(this,t)},i._convertToPlottableInnerPadding=function(t){return 1/(1-t)-1},i._convertToPlottableOuterPadding=function(t,e){return t/(1-e)},i.prototype._setBands=function(){var t=1-1/(1+this.innerPadding()),e=this.outerPadding()/(1+this.innerPadding());this._d3Scale.rangeBands(this._range,t,e)},i.prototype.rangeBand=function(){return this._d3Scale.rangeBand()},i.prototype.stepWidth=function(){return this.rangeBand()*(1+this.innerPadding())},i.prototype.innerPadding=function(t){return null==t?this._innerPadding:(this._innerPadding=t,this.range(this.range()),this._dispatchUpdate(),this)},i.prototype.outerPadding=function(t){return null==t?this._outerPadding:(this._outerPadding=t,this.range(this.range()),this._dispatchUpdate(),this)},i.prototype.scale=function(t){return this._d3Scale(t)+this.rangeBand()/2},i.prototype._getDomain=function(){return this._backingScaleDomain()},i.prototype._backingScaleDomain=function(t){return null==t?this._d3Scale.domain():(this._d3Scale.domain(t),this._setBands(),this)},i.prototype._getRange=function(){return this._range},i.prototype._setRange=function(t){this._range=t,this._setBands()},i}(e.Scale),n.Category=i}(e||(e={})),function(e){var n,i;n=e.Scales||(e.Scales={}),i=function(n){function i(e){var r;switch(n.call(this),e){case null:case void 0:null==i._plottableColorCache&&(i._plottableColorCache=i._getPlottableColors()),r=t.scale.ordinal().range(i._plottableColorCache);break;case"Category10":case"category10":case"10":r=t.scale.category10();break;case"Category20":case"category20":case"20":r=t.scale.category20();break;case"Category20b":case"category20b":case"20b":r=t.scale.category20b();break;case"Category20c":case"category20c":case"20c":r=t.scale.category20c();break;default:throw new Error("Unsupported ColorScale type")}this._d3Scale=r}return r(i,n),i.prototype.extentOfValues=function(t){return e.Utils.Array.uniq(t)},i.prototype._getExtent=function(){return e.Utils.Array.uniq(this._getAllIncludedValues())},i.invalidateColorCache=function(){i._plottableColorCache=null},i._getPlottableColors=function(){for(var n=[],r=t.select("body").append("plottable-color-tester"),i=e.Utils.Color.colorTest(r,""),o=0,a=e.Utils.Color.colorTest(r,"plottable-colors-0");null!=a&&o<this._MAXIMUM_COLORS_FROM_CSS&&(a!==i||a!==n[n.length-1]);)n.push(a),o++,a=e.Utils.Color.colorTest(r,"plottable-colors-"+o);return r.remove(),n},i.prototype.scale=function(t){var n=this._d3Scale(t),r=this.domain().indexOf(t),o=Math.floor(r/this.range().length),a=Math.log(o*i._LOOP_LIGHTEN_FACTOR+1);return e.Utils.Color.lightenColor(n,a)},i.prototype._getDomain=function(){return this._backingScaleDomain()},i.prototype._backingScaleDomain=function(t){return null==t?this._d3Scale.domain():(this._d3Scale.domain(t),this)},i.prototype._getRange=function(){return this._d3Scale.range()},i.prototype._setRange=function(t){this._d3Scale.range(t)},i._LOOP_LIGHTEN_FACTOR=1.6,i._MAXIMUM_COLORS_FROM_CSS=256,i}(e.Scale),n.Color=i}(e||(e={})),function(e){var n,i;n=e.Scales||(e.Scales={}),i=function(i){function o(){i.call(this),this._d3Scale=t.time.scale(),this.autoDomain()}return r(o,i),o.prototype.tickInterval=function(e,n){var r=t.time.scale(),i=o.timeIntervalToD3Time(e);return r.domain(this.domain()),r.range(this.range()),r.ticks(i,n)},o.prototype._setDomain=function(t){if(t[1]<t[0])throw new Error("Scale.Time domain values must be in chronological order");return i.prototype._setDomain.call(this,t)},o.prototype._defaultExtent=function(){return[new Date("1970-01-01"),new Date("1970-01-02")]},o.prototype._expandSingleValueDomain=function(t){var e=t[0].getTime(),n=t[1].getTime();if(e===n){var r=new Date(e);r.setDate(r.getDate()-1);var i=new Date(n);return i.setDate(i.getDate()+1),[r,i]}return t},o.prototype.scale=function(t){return this._d3Scale(t)},o.prototype._getDomain=function(){return this._backingScaleDomain()},o.prototype._backingScaleDomain=function(t){return null==t?this._d3Scale.domain():(this._d3Scale.domain(t),this)},o.prototype._getRange=function(){return this._d3Scale.range()},o.prototype._setRange=function(t){this._d3Scale.range(t)},o.prototype.invert=function(t){return this._d3Scale.invert(t)},o.prototype.defaultTicks=function(){return this._d3Scale.ticks(n.Time._DEFAULT_NUM_TICKS)},o.prototype._niceDomain=function(t){return this._d3Scale.copy().domain(t).nice().domain()},o.timeIntervalToD3Time=function(n){switch(n){case e.TimeInterval.second:return t.time.second;case e.TimeInterval.minute:return t.time.minute;case e.TimeInterval.hour:return t.time.hour;case e.TimeInterval.day:return t.time.day;case e.TimeInterval.week:return t.time.week;case e.TimeInterval.month:return t.time.month;case e.TimeInterval.year:return t.time.year;default:throw Error("TimeInterval specified does not exist: "+n)}},o}(e.QuantitativeScale),n.Time=i}(e||(e={})),function(e){var n,i;n=e.Scales||(e.Scales={}),i=function(n){function i(e){switch(void 0===e&&(e="linear"),n.call(this),e){case"linear":this._colorScale=t.scale.linear();break;case"log":this._colorScale=t.scale.log();break;case"sqrt":this._colorScale=t.scale.sqrt();break;case"pow":this._colorScale=t.scale.pow()}if(null==this._colorScale)throw new Error("unknown QuantitativeScale scale type "+e);this.range(i.REDS)}return r(i,n),i.prototype.extentOfValues=function(e){var n=t.extent(e);return null==n[0]||null==n[1]?[]:n},i.prototype._d3InterpolatedScale=function(){return this._colorScale.range([0,1]).interpolate(this._interpolateColors())},i.prototype._interpolateColors=function(){var e=this._colorRange;if(e.length<2)throw new Error("Color scale arrays must have at least two elements.");return function(n,r){return function(n){var r=(n=Math.max(0,Math.min(1,n)))*(e.length-1),i=Math.floor(r),o=Math.ceil(r),a=r-i;return t.interpolateLab(e[i],e[o])(a)}}},i.prototype._resetScale=function(){this._d3Scale=this._d3InterpolatedScale(),this._autoDomainIfAutomaticMode(),this._dispatchUpdate()},i.prototype.autoDomain=function(){var t=this._getAllIncludedValues();return t.length>0&&this._setDomain([e.Utils.Math.min(t,0),e.Utils.Math.max(t,0)]),this},i.prototype.scale=function(t){return this._d3Scale(t)},i.prototype._getDomain=function(){return this._backingScaleDomain()},i.prototype._backingScaleDomain=function(t){return null==t?this._d3Scale.domain():(this._d3Scale.domain(t),this)},i.prototype._getRange=function(){return this._colorRange},i.prototype._setRange=function(t){this._colorRange=t,this._resetScale()},i.REDS=["#FFFFFF","#FFF6E1","#FEF4C0","#FED976","#FEB24C","#FD8D3C","#FC4E2A","#E31A1C","#B10026"],i.BLUES=["#FFFFFF","#CCFFFF","#A5FFFD","#85F7FB","#6ED3EF","#55A7E0","#417FD0","#2545D3","#0B02E1"],i.POSNEG=["#0B02E1","#2545D3","#417FD0","#55A7E0","#6ED3EF","#85F7FB","#A5FFFD","#CCFFFF","#FFFFFF","#FFF6E1","#FEF4C0","#FED976","#FEB24C","#FD8D3C","#FC4E2A","#E31A1C","#B10026"],i}(e.Scale),n.InterpolatedColor=i}(e||(e={})),function(t){var e,n;e=t.Scales||(t.Scales={}),(n=e.TickGenerators||(e.TickGenerators={})).intervalTickGenerator=function(e){if(e<=0)throw new Error("interval must be positive number");return function(n){var r=n.domain(),i=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]),a=Math.ceil(i/e)*e,s=Math.floor((o-a)/e)+1,l=i%e==0?[]:[i],u=t.Utils.Math.range(0,s).map((function(t){return a+t*e})),c=o%e==0?[]:[o];return l.concat(u).concat(c)}},n.integerTickGenerator=function(){return function(t){var e=t.defaultTicks();return e.filter((function(t,n){return t%1==0||0===n||n===e.length-1}))}}}(e||(e={})),function(e){var n=function(){function n(t){this._cachedSelectionValid=!1,this._dataset=t}return n.prototype.renderArea=function(t){return null==t?this._renderArea:(this._renderArea=t,this._cachedSelectionValid=!1,this)},n.prototype.remove=function(){null!=this.renderArea()&&this.renderArea().remove()},n.prototype._bindSelectionData=function(t){var e=this.selection().data(t);e.enter().append(this._svgElementName),e.exit().remove(),this._applyDefaultAttributes(e)},n.prototype._applyDefaultAttributes=function(t){null!=this._className&&t.classed(this._className,!0)},n.prototype._drawStep=function(t){var e=this.selection();["fill","stroke"].forEach((function(n){null!=t.attrToAppliedProjector[n]&&e.attr(n,t.attrToAppliedProjector[n])})),t.animator.animate(e,t.attrToAppliedProjector),null!=this._className&&this.selection().classed(this._className,!0)},n.prototype._appliedProjectors=function(t){var e=this,n={};return Object.keys(t).forEach((function(r){n[r]=function(n,i){return t[r](n,i,e._dataset)}})),n},n.prototype.totalDrawTime=function(t,e){var n=0;return e.forEach((function(e,r){n+=e.animator.totalTime(t.length)})),n},n.prototype.draw=function(t,n){var r=this,i=n.map((function(t){return{attrToAppliedProjector:r._appliedProjectors(t.attrToProjector),animator:t.animator}}));this._bindSelectionData(t),this._cachedSelectionValid=!1;var o=0;return i.forEach((function(n,i){e.Utils.Window.setTimeout((function(){return r._drawStep(n)}),o),o+=n.animator.totalTime(t.length)})),this},n.prototype.selection=function(){return this._cachedSelectionValid||(this._cachedSelection=this.renderArea().selectAll(this.selector()),this._cachedSelectionValid=!0),this._cachedSelection},n.prototype.selector=function(){return this._svgElementName},n.prototype.selectionForIndex=function(e){return t.select(this.selection()[0][e])},n}();e.Drawer=n}(e||(e={})),function(e){var n,i;n=e.Drawers||(e.Drawers={}),i=function(e){function n(t){e.call(this,t),this._className="line",this._svgElementName="path"}return r(n,e),n.prototype._applyDefaultAttributes=function(t){e.prototype._applyDefaultAttributes.call(this,t),t.style("fill","none")},n.prototype.selectionForIndex=function(e){return t.select(this.selection()[0][0])},n}(e.Drawer),n.Line=i}(e||(e={})),function(e){var n,i;n=e.Drawers||(e.Drawers={}),i=function(e){function n(t){e.call(this,t),this._className="area",this._svgElementName="path"}return r(n,e),n.prototype._applyDefaultAttributes=function(t){e.prototype._applyDefaultAttributes.call(this,t),t.style("stroke","none")},n.prototype.selectionForIndex=function(e){return t.select(this.selection()[0][0])},n}(e.Drawer),n.Area=i}(e||(e={})),function(t){var e,n;e=t.Drawers||(t.Drawers={}),n=function(t){function e(e){t.call(this,e),this._svgElementName="rect"}return r(e,t),e}(t.Drawer),e.Rectangle=n}(e||(e={})),function(t){var e,n;e=t.Drawers||(t.Drawers={}),n=function(t){function e(e){t.call(this,e),this._className="arc fill",this._svgElementName="path"}return r(e,t),e.prototype._applyDefaultAttributes=function(e){t.prototype._applyDefaultAttributes.call(this,e),e.style("stroke","none")},e}(t.Drawer),e.Arc=n}(e||(e={})),function(t){var e,n;e=t.Drawers||(t.Drawers={}),n=function(t){function e(e){t.call(this,e),this._className="arc outline",this._svgElementName="path"}return r(e,t),e.prototype._applyDefaultAttributes=function(e){t.prototype._applyDefaultAttributes.call(this,e),e.style("fill","none")},e}(t.Drawer),e.ArcOutline=n}(e||(e={})),function(t){var e,n;e=t.Drawers||(t.Drawers={}),n=function(t){function e(e){t.call(this,e),this._svgElementName="path",this._className="symbol"}return r(e,t),e}(t.Drawer),e.Symbol=n}(e||(e={})),function(t){var e,n;e=t.Drawers||(t.Drawers={}),n=function(t){function e(e){t.call(this,e),this._svgElementName="line"}return r(e,t),e}(t.Drawer),e.Segment=n}(e||(e={})),function(e){var n,r;n=e.Components||(e.Components={}),r=function(){function t(){}return t.TOP="top",t.BOTTOM="bottom",t.LEFT="left",t.RIGHT="right",t.CENTER="center",t}(),n.Alignment=r;var i=function(){function n(){this._clipPathEnabled=!1,this._origin={x:0,y:0},this._xAlignment="left",this._yAlignment="top",this._isSetup=!1,this._isAnchored=!1,this._boxes=[],this._isTopLevelComponent=!1,this._cssClasses=new e.Utils.Set,this._destroyed=!1,this._onAnchorCallbacks=new e.Utils.CallbackSet,this._onDetachCallbacks=new e.Utils.CallbackSet,this._cssClasses.add("component")}return n.prototype.anchor=function(t){if(this._destroyed)throw new Error("Can't reuse destroy()-ed Components!");return this._isTopLevelComponent="svg"===t.node().nodeName.toLowerCase(),this._isTopLevelComponent&&(this._rootSVG=t,this._rootSVG.classed("plottable",!0),this._rootSVG.style("overflow","visible"),this._rootSVG.select("."+n._SAFARI_EVENT_BACKING_CLASS).empty()&&this._rootSVG.append("rect").classed(n._SAFARI_EVENT_BACKING_CLASS,!0).attr({x:0,y:0,width:"100%",height:"100%"}).style("opacity",0)),null!=this._element?t.node().appendChild(this._element.node()):(this._element=t.append("g"),this._setup()),this._isAnchored=!0,this._onAnchorCallbacks.callCallbacks(this),this},n.prototype.onAnchor=function(t){return this._isAnchored&&t(this),this._onAnchorCallbacks.add(t),this},n.prototype.offAnchor=function(t){return this._onAnchorCallbacks.delete(t),this},n.prototype._setup=function(){var t=this;this._isSetup||(this._cssClasses.forEach((function(e){t._element.classed(e,!0)})),this._cssClasses=new e.Utils.Set,this._backgroundContainer=this._element.append("g").classed("background-container",!0),this._addBox("background-fill",this._backgroundContainer),this._content=this._element.append("g").classed("content",!0),this._foregroundContainer=this._element.append("g").classed("foreground-container",!0),this._boxContainer=this._element.append("g").classed("box-container",!0),this._clipPathEnabled&&this._generateClipPath(),this._boundingBox=this._addBox("bounding-box"),this._isSetup=!0)},n.prototype.requestedSpace=function(t,e){return{minWidth:0,minHeight:0}},n.prototype.computeLayout=function(t,r,i){var o=this;if(null==t||null==r||null==i){if(null==this._element)throw new Error("anchor() must be called before computeLayout()");if(!this._isTopLevelComponent)throw new Error("null arguments cannot be passed to computeLayout() on a non-root node");t={x:0,y:0},null==this._rootSVG.attr("width")&&this._rootSVG.attr("width","100%"),null==this._rootSVG.attr("height")&&this._rootSVG.attr("height","100%");var a=this._rootSVG.node();r=e.Utils.DOM.elementWidth(a),i=e.Utils.DOM.elementHeight(a)}var s=this._sizeFromOffer(r,i);this._width=s.width,this._height=s.height;var l=n._xAlignToProportion[this._xAlignment],u=n._yAlignToProportion[this._yAlignment];return this._origin={x:t.x+(r-this.width())*l,y:t.y+(i-this.height())*u},this._element.attr("transform","translate("+this._origin.x+","+this._origin.y+")"),this._boxes.forEach((function(t){return t.attr("width",o.width()).attr("height",o.height())})),this},n.prototype._sizeFromOffer=function(t,e){var n=this.requestedSpace(t,e);return{width:this.fixedWidth()?Math.min(t,n.minWidth):t,height:this.fixedHeight()?Math.min(e,n.minHeight):e}},n.prototype.render=function(){return this._isAnchored&&this._isSetup&&this.width()>=0&&this.height()>=0&&e.RenderController.registerToRender(this),this},n.prototype._scheduleComputeLayout=function(){this._isAnchored&&this._isSetup&&e.RenderController.registerToComputeLayout(this)},n.prototype.renderImmediately=function(){return this._clipPathEnabled&&this._updateClipPath(),this},n.prototype.redraw=function(){return this._isAnchored&&this._isSetup&&(this._isTopLevelComponent?this._scheduleComputeLayout():this.parent().redraw()),this},n.prototype.renderTo=function(n){if(this.detach(),null!=n){var r=void 0;if(!(r="string"==typeof n||n instanceof Element?t.select(n):n).node()||"svg"!==r.node().nodeName.toLowerCase())throw new Error("Plottable requires a valid SVG to renderTo");this.anchor(r)}if(null==this._element)throw new Error("If a Component has never been rendered before, then renderTo must be given a node to render to, or a d3.Selection, or a selector string");return this.computeLayout(),this.render(),e.RenderController.flush(),this},n.prototype.xAlignment=function(t){if(null==t)return this._xAlignment;if(t=t.toLowerCase(),null==n._xAlignToProportion[t])throw new Error("Unsupported alignment: "+t);return this._xAlignment=t,this.redraw(),this},n.prototype.yAlignment=function(t){if(null==t)return this._yAlignment;if(t=t.toLowerCase(),null==n._yAlignToProportion[t])throw new Error("Unsupported alignment: "+t);return this._yAlignment=t,this.redraw(),this},n.prototype._addBox=function(t,e){if(null==this._element)throw new Error("Adding boxes before anchoring is currently disallowed");var n=(e=null==e?this._boxContainer:e).append("rect");return null!=t&&n.classed(t,!0),this._boxes.push(n),null!=this.width()&&null!=this.height()&&n.attr("width",this.width()).attr("height",this.height()),n},n.prototype._generateClipPath=function(){this._clipPathID=e.Utils.DOM.generateUniqueClipPathId();var t=this._boxContainer.append("clipPath").attr("id",this._clipPathID);this._addBox("clip-rect",t),this._updateClipPath()},n.prototype._updateClipPath=function(){var t=/MSIE [5-9]/.test(navigator.userAgent)?"":document.location.href;t=t.split("#")[0],this._element.attr("clip-path",'url("'+t+"#"+this._clipPathID+'")')},n.prototype.hasClass=function(t){return null!=t&&(null==this._element?this._cssClasses.has(t):this._element.classed(t))},n.prototype.addClass=function(t){return null==t||(null==this._element?this._cssClasses.add(t):this._element.classed(t,!0)),this},n.prototype.removeClass=function(t){return null==t||(null==this._element?this._cssClasses.delete(t):this._element.classed(t,!1)),this},n.prototype.fixedWidth=function(){return!1},n.prototype.fixedHeight=function(){return!1},n.prototype.detach=function(){return this.parent(null),this._isAnchored&&(this._element.remove(),this._isTopLevelComponent&&this._rootSVG.select("."+n._SAFARI_EVENT_BACKING_CLASS).remove()),this._isAnchored=!1,this._onDetachCallbacks.callCallbacks(this),this},n.prototype.onDetach=function(t){return this._onDetachCallbacks.add(t),this},n.prototype.offDetach=function(t){return this._onDetachCallbacks.delete(t),this},n.prototype.parent=function(t){if(void 0===t)return this._parent;if(null!==t&&!t.has(this))throw new Error("Passed invalid parent");return this._parent=t,this},n.prototype.destroy=function(){this._destroyed=!0,this.detach()},n.prototype.width=function(){return this._width},n.prototype.height=function(){return this._height},n.prototype.origin=function(){return{x:this._origin.x,y:this._origin.y}},n.prototype.originToSVG=function(){for(var t=this.origin(),e=this.parent();null!=e;){var n=e.origin();t.x+=n.x,t.y+=n.y,e=e.parent()}return t},n.prototype.foreground=function(){return this._foregroundContainer},n.prototype.content=function(){return this._content},n.prototype.background=function(){return this._backgroundContainer},n._xAlignToProportion={left:0,center:.5,right:1},n._yAlignToProportion={top:0,center:.5,bottom:1},n._SAFARI_EVENT_BACKING_CLASS="safari-event-backing",n}();e.Component=i}(e||(e={})),function(t){var e=function(t){function e(){var e=this;t.call(this),this._detachCallback=function(t){return e.remove(t)}}return r(e,t),e.prototype.anchor=function(e){var n=this;return t.prototype.anchor.call(this,e),this._forEach((function(t){return t.anchor(n.content())})),this},e.prototype.render=function(){return this._forEach((function(t){return t.render()})),this},e.prototype.has=function(t){throw new Error("has() is not implemented on ComponentContainer")},e.prototype._adoptAndAnchor=function(t){t.parent(this),t.onDetach(this._detachCallback),this._isAnchored&&t.anchor(this.content())},e.prototype.remove=function(t){return this.has(t)&&(t.offDetach(this._detachCallback),this._remove(t),t.detach(),this.redraw()),this},e.prototype._remove=function(t){return!1},e.prototype._forEach=function(t){throw new Error("_forEach() is not implemented on ComponentContainer")},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._forEach((function(t){return t.destroy()}))},e}(t.Component);t.ComponentContainer=e}(e||(e={})),function(t){var e,n;e=t.Components||(t.Components={}),n=function(e){function n(t){var n=this;void 0===t&&(t=[]),e.call(this),this._components=[],this.addClass("component-group"),t.forEach((function(t){return n.append(t)}))}return r(n,e),n.prototype._forEach=function(t){this.components().forEach(t)},n.prototype.has=function(t){return this._components.indexOf(t)>=0},n.prototype.requestedSpace=function(e,n){var r=this._components.map((function(t){return t.requestedSpace(e,n)}));return{minWidth:t.Utils.Math.max(r,(function(t){return t.minWidth}),0),minHeight:t.Utils.Math.max(r,(function(t){return t.minHeight}),0)}},n.prototype.computeLayout=function(t,n,r){var i=this;return e.prototype.computeLayout.call(this,t,n,r),this._forEach((function(t){t.computeLayout({x:0,y:0},i.width(),i.height())})),this},n.prototype._sizeFromOffer=function(t,e){return{width:t,height:e}},n.prototype.fixedWidth=function(){return this._components.every((function(t){return t.fixedWidth()}))},n.prototype.fixedHeight=function(){return this._components.every((function(t){return t.fixedHeight()}))},n.prototype.components=function(){return this._components.slice()},n.prototype.append=function(t){return null==t||this.has(t)||(t.detach(),this._components.push(t),this._adoptAndAnchor(t),this.redraw()),this},n.prototype._remove=function(t){var e=this._components.indexOf(t);return e>=0&&(this._components.splice(e,1),!0)},n}(t.ComponentContainer),e.Group=n}(e||(e={})),function(t){var e,n;e=t.Components||(t.Components={}),n=function(e){function n(){e.apply(this,arguments)}return r(n,e),n.prototype.entityNearest=function(e){var n,r=1/0;return this.components().forEach((function(i){var o=i.entityNearest(e);if(null!=o){var a=t.Utils.Math.distanceSquared(o.position,e);a<=r&&(r=a,n=o)}})),n},n.prototype.append=function(n){if(null!=n&&!(n instanceof t.Plot))throw new Error("Plot Group only accepts plots");return e.prototype.append.call(this,n),this},n}(e.Group),e.PlotGroup=n}(e||(e={})),function(e){var i=function(i){function o(t,n){var r=this;if(i.call(this),this._endTickLength=5,this._innerTickLength=5,this._tickLabelPadding=10,this._margin=15,this._showEndTickLabels=!1,this._annotationsEnabled=!1,this._annotationTierCount=1,null==t||null==n)throw new Error("Axis requires a scale and orientation");this._scale=t,this.orientation(n),this._setDefaultAlignment(),this.addClass("axis"),this._isHorizontal()?this.addClass("x-axis"):this.addClass("y-axis"),this.formatter(e.Formatters.identity()),this._rescaleCallback=function(t){return r._rescale()},this._scale.onUpdate(this._rescaleCallback),this._annotatedTicks=[],this._annotationFormatter=e.Formatters.identity()}return r(o,i),o.prototype.destroy=function(){i.prototype.destroy.call(this),this._scale.offUpdate(this._rescaleCallback)},o.prototype._isHorizontal=function(){return"top"===this._orientation||"bottom"===this._orientation},o.prototype._computeWidth=function(){return this._maxLabelTickLength()},o.prototype._computeHeight=function(){return this._maxLabelTickLength()},o.prototype.requestedSpace=function(t,e){var n=0,r=0;return this._isHorizontal()?(r=this._computeHeight()+this._margin,this.annotationsEnabled()&&(r+=(this._annotationMeasurer.measure().height+2*o._ANNOTATION_LABEL_PADDING)*this.annotationTierCount())):(n=this._computeWidth()+this._margin,this.annotationsEnabled()&&(n+=(this._annotationMeasurer.measure().height+2*o._ANNOTATION_LABEL_PADDING)*this.annotationTierCount())),{minWidth:n,minHeight:r}},o.prototype.fixedHeight=function(){return this._isHorizontal()},o.prototype.fixedWidth=function(){return!this._isHorizontal()},o.prototype._rescale=function(){this.render()},o.prototype.computeLayout=function(t,e,n){return i.prototype.computeLayout.call(this,t,e,n),this._isHorizontal()?this._scale.range([0,this.width()]):this._scale.range([this.height(),0]),this},o.prototype._setup=function(){i.prototype._setup.call(this),this._tickMarkContainer=this.content().append("g").classed(o.TICK_MARK_CLASS+"-container",!0),this._tickLabelContainer=this.content().append("g").classed(o.TICK_LABEL_CLASS+"-container",!0),this._baseline=this.content().append("line").classed("baseline",!0),this._annotationContainer=this.content().append("g").classed("annotation-container",!0),this._annotationContainer.append("g").classed("annotation-line-container",!0),this._annotationContainer.append("g").classed("annotation-circle-container",!0),this._annotationContainer.append("g").classed("annotation-rect-container",!0);var t=this._annotationContainer.append("g").classed("annotation-label-container",!0);this._annotationMeasurer=new n.Measurers.Measurer(t),this._annotationWriter=new n.Writers.Writer(this._annotationMeasurer)},o.prototype._getTickValues=function(){return[]},o.prototype.renderImmediately=function(){var e=this._getTickValues(),n=this._tickMarkContainer.selectAll("."+o.TICK_MARK_CLASS).data(e);return n.enter().append("line").classed(o.TICK_MARK_CLASS,!0),n.attr(this._generateTickMarkAttrHash()),t.select(n[0][0]).classed(o.END_TICK_MARK_CLASS,!0).attr(this._generateTickMarkAttrHash(!0)),t.select(n[0][e.length-1]).classed(o.END_TICK_MARK_CLASS,!0).attr(this._generateTickMarkAttrHash(!0)),n.exit().remove(),this._baseline.attr(this._generateBaselineAttrHash()),this.annotationsEnabled()?this._drawAnnotations():this._removeAnnotations(),this},o.prototype.annotatedTicks=function(t){return null==t?this._annotatedTicks:(this._annotatedTicks=t,this.render(),this)},o.prototype.annotationFormatter=function(t){return null==t?this._annotationFormatter:(this._annotationFormatter=t,this.render(),this)},o.prototype.annotationsEnabled=function(t){return null==t?this._annotationsEnabled:(this._annotationsEnabled=t,this.redraw(),this)},o.prototype.annotationTierCount=function(t){if(null==t)return this._annotationTierCount;if(t<0)throw new Error("annotationTierCount cannot be negative");return this._annotationTierCount=t,this.redraw(),this},o.prototype._drawAnnotations=function(){var n=this,r=o._ANNOTATION_LABEL_PADDING,i=new e.Utils.Map,a=this._annotatedTicksToRender();a.forEach((function(t){var e=n._annotationMeasurer.measure(n.annotationFormatter()(t)),o={width:e.width+2*r,height:e.height+2*r};i.set(t,o)}));var s=this._annotationMeasurer.measure().height+2*r,l=this._annotationToTier(i),u=new e.Utils.Set,c=this._isHorizontal()?this.height():this.width(),h=this._coreSize(),p=Math.min(this.annotationTierCount(),Math.floor((c-h)/s));l.forEach((function(t,e){(-1===t||t>=p)&&u.add(e)}));var f,d=function(t,e,n){var r=t.selectAll("."+n).data(a);return r.enter().append(e).classed(n,!0),r.exit().remove(),r},_=function(t){switch(n.orientation()){case"bottom":case"right":return l.get(t)*s+h;case"top":case"left":return c-h-l.get(t)*s}},g=function(t){return n._scale.scale(t)},y=function(t){return u.has(t)?"hidden":"visible"};switch(this.orientation()){case"bottom":case"right":f=0;break;case"top":f=this.height();break;case"left":f=this.width()}var m=this._isHorizontal();d(this._annotationContainer.select(".annotation-line-container"),"line",o.ANNOTATION_LINE_CLASS).attr({x1:m?g:f,x2:m?g:_,y1:m?f:g,y2:m?_:g,visibility:y}),d(this._annotationContainer.select(".annotation-circle-container"),"circle",o.ANNOTATION_CIRCLE_CLASS).attr({cx:m?g:f,cy:m?f:g,r:3});var v=function(t){switch(n.orientation()){case"bottom":case"right":return _(t);case"top":case"left":return _(t)-i.get(t).height}};d(this._annotationContainer.select(".annotation-rect-container"),"rect",o.ANNOTATION_RECT_CLASS).attr({x:m?g:v,y:m?v:g,width:m?function(t){return i.get(t).width}:function(t){return i.get(t).height},height:m?function(t){return i.get(t).height}:function(t){return i.get(t).width},visibility:y});var x=this._annotationWriter,b=this.annotationFormatter(),E=d(this._annotationContainer.select(".annotation-label-container"),"g",o.ANNOTATION_LABEL_CLASS);E.selectAll(".text-container").remove(),E.attr({transform:function(t){return"translate("+(m?g(t):v(t))+","+(m?v(t):g(t))+")"},visibility:y}).each((function(e){var n={selection:t.select(this),xAlign:"center",yAlign:"center",textRotation:m?0:90};x.write(b(e),m?i.get(e).width:i.get(e).height,m?i.get(e).height:i.get(e).width,n)}))},o.prototype._annotatedTicksToRender=function(){var t=this,n=this._scale.range();return e.Utils.Array.uniq(this.annotatedTicks().filter((function(r){return null!=r&&e.Utils.Math.inRange(t._scale.scale(r),n[0],n[1])})))},o.prototype._coreSize=function(){var t=this._isHorizontal()?this.height():this.width(),e=this._isHorizontal()?this._computeHeight():this._computeWidth();return Math.min(e,t)},o.prototype._annotationTierHeight=function(){return this._annotationMeasurer.measure().height+2*o._ANNOTATION_LABEL_PADDING},o.prototype._annotationToTier=function(t){var n=this,r=[[]],i=new e.Utils.Map,o=this._isHorizontal()?this.width():this.height();return this._annotatedTicksToRender().forEach((function(e){var a=n._scale.scale(e),s=t.get(e).width;if(a<0||a+s>o)i.set(e,-1);else{for(var l=0;r[l].some((function(e){var r=n._scale.scale(e),i=t.get(e).width;return a+s>=r&&a<=r+i}));)l++,r.length===l&&r.push([]);r[l].push(e),i.set(e,l)}})),i},o.prototype._removeAnnotations=function(){this._annotationContainer.selectAll(".annotation-line").remove(),this._annotationContainer.selectAll(".annotation-circle").remove(),this._annotationContainer.selectAll(".annotation-rect").remove(),this._annotationContainer.selectAll(".annotation-label").remove()},o.prototype._generateBaselineAttrHash=function(){var t={x1:0,y1:0,x2:0,y2:0};switch(this._orientation){case"bottom":t.x2=this.width();break;case"top":t.x2=this.width(),t.y1=this.height(),t.y2=this.height();break;case"left":t.x1=this.width(),t.x2=this.width(),t.y2=this.height();break;case"right":t.y2=this.height()}return t},o.prototype._generateTickMarkAttrHash=function(t){var e=this;void 0===t&&(t=!1);var n={x1:0,y1:0,x2:0,y2:0},r=function(t){return e._scale.scale(t)};this._isHorizontal()?(n.x1=r,n.x2=r):(n.y1=r,n.y2=r);var i=t?this._endTickLength:this._innerTickLength;switch(this._orientation){case"bottom":n.y2=i;break;case"top":n.y1=this.height(),n.y2=this.height()-i;break;case"left":n.x1=this.width(),n.x2=this.width()-i;break;case"right":n.x2=i}return n},o.prototype._setDefaultAlignment=function(){switch(this._orientation){case"bottom":this.yAlignment("top");break;case"top":this.yAlignment("bottom");break;case"left":this.xAlignment("right");break;case"right":this.xAlignment("left")}},o.prototype.formatter=function(t){return null==t?this._formatter:(this._formatter=t,this.redraw(),this)},o.prototype.innerTickLength=function(t){if(null==t)return this._innerTickLength;if(t<0)throw new Error("inner tick length must be positive");return this._innerTickLength=t,this.redraw(),this},o.prototype.endTickLength=function(t){if(null==t)return this._endTickLength;if(t<0)throw new Error("end tick length must be positive");return this._endTickLength=t,this.redraw(),this},o.prototype._maxLabelTickLength=function(){return this.showEndTickLabels()?Math.max(this.innerTickLength(),this.endTickLength()):this.innerTickLength()},o.prototype.tickLabelPadding=function(t){if(null==t)return this._tickLabelPadding;if(t<0)throw new Error("tick label padding must be positive");return this._tickLabelPadding=t,this.redraw(),this},o.prototype.margin=function(t){if(null==t)return this._margin;if(t<0)throw new Error("margin size must be positive");return this._margin=t,this.redraw(),this},o.prototype.orientation=function(t){if(null==t)return this._orientation;var e=t.toLowerCase();if("top"!==e&&"bottom"!==e&&"left"!==e&&"right"!==e)throw new Error("unsupported orientation");return this._orientation=e,this.redraw(),this},o.prototype.showEndTickLabels=function(t){return null==t?this._showEndTickLabels:(this._showEndTickLabels=t,this.render(),this)},o.END_TICK_MARK_CLASS="end-tick-mark",o.TICK_MARK_CLASS="tick-mark",o.TICK_LABEL_CLASS="tick-label",o.ANNOTATION_LINE_CLASS="annotation-line",o.ANNOTATION_RECT_CLASS="annotation-rect",o.ANNOTATION_CIRCLE_CLASS="annotation-circle",o.ANNOTATION_LABEL_CLASS="annotation-label",o._ANNOTATION_LABEL_PADDING=4,o}(e.Component);e.Axis=i}(e||(e={})),function(t){var e;(e=t.TimeInterval||(t.TimeInterval={})).second="second",e.minute="minute",e.hour="hour",e.day="day",e.week="week",e.month="month",e.year="year"}(e||(e={})),function(e){var i,o;i=e.Axes||(e.Axes={}),o=function(i){function o(t,n){i.call(this,t,n),this._tierLabelPositions=[],this.addClass("time-axis"),this.tickLabelPadding(5),this.axisConfigurations(o._DEFAULT_TIME_AXIS_CONFIGURATIONS),this.annotationFormatter(e.Formatters.time("%a %b %d, %Y"))}return r(o,i),o.prototype.tierLabelPositions=function(t){if(null==t)return this._tierLabelPositions;if(!t.every((function(t){return"between"===t.toLowerCase()||"center"===t.toLowerCase()})))throw new Error("Unsupported position for tier labels");return this._tierLabelPositions=t,this.redraw(),this},o.prototype.axisConfigurations=function(t){if(null==t)return this._possibleTimeAxisConfigurations;this._possibleTimeAxisConfigurations=t,this._numTiers=e.Utils.Math.max(this._possibleTimeAxisConfigurations.map((function(t){return t.length})),0),this._isAnchored&&this._setupDomElements();for(var n=this.tierLabelPositions(),r=[],i=0;i<this._numTiers;i++)r.push(n[i]||"between");return this.tierLabelPositions(r),this.redraw(),this},o.prototype._getMostPreciseConfigurationIndex=function(){var t=this,n=this._possibleTimeAxisConfigurations.length;return this._possibleTimeAxisConfigurations.forEach((function(e,r){r<n&&e.every((function(e){return t._checkTimeAxisTierConfigurationWidth(e)}))&&(n=r)})),n===this._possibleTimeAxisConfigurations.length&&(e.Utils.Window.warn("zoomed out too far: could not find suitable interval to display labels"),--n),n},o.prototype.orientation=function(t){if(t&&("right"===t.toLowerCase()||"left"===t.toLowerCase()))throw new Error(t+" is not a supported orientation for TimeAxis - only horizontal orientations are supported");return i.prototype.orientation.call(this,t)},o.prototype._computeHeight=function(){var e=this._measurer.measure().height;this._tierHeights=[];for(var n=0;n<this._numTiers;n++)this._tierHeights.push(e+this.tickLabelPadding()+("between"===this._tierLabelPositions[n]?0:this._maxLabelTickLength()));return t.sum(this._tierHeights)},o.prototype._getIntervalLength=function(t){var n=this._scale.domain()[0],r=e.Scales.Time.timeIntervalToD3Time(t.interval).offset(n,t.step);return r>this._scale.domain()[1]?this.width():Math.abs(this._scale.scale(r)-this._scale.scale(n))},o.prototype._maxWidthForInterval=function(t){return this._measurer.measure(t.formatter(o._LONG_DATE)).width},o.prototype._checkTimeAxisTierConfigurationWidth=function(t){var e=this._maxWidthForInterval(t)+2*this.tickLabelPadding();return Math.min(this._getIntervalLength(t),this.width())>=e},o.prototype._sizeFromOffer=function(t,e){var n=i.prototype._sizeFromOffer.call(this,t,e),r=this._tierHeights.reduce((function(t,e,r,i){return t+e>n.height?t:t+e})),o=this.margin()+(this.annotationsEnabled()?this.annotationTierCount()*this._annotationTierHeight():0);return n.height=Math.min(n.height,r+o),n},o.prototype._setup=function(){i.prototype._setup.call(this),this._setupDomElements()},o.prototype._setupDomElements=function(){this.content().selectAll("."+o.TIME_AXIS_TIER_CLASS).remove(),this._tierLabelContainers=[],this._tierMarkContainers=[],this._tierBaselines=[],this._tickLabelContainer.remove(),this._baseline.remove();for(var t=0;t<this._numTiers;++t){var r=this.content().append("g").classed(o.TIME_AXIS_TIER_CLASS,!0);this._tierLabelContainers.push(r.append("g").classed(e.Axis.TICK_LABEL_CLASS+"-container",!0)),this._tierMarkContainers.push(r.append("g").classed(e.Axis.TICK_MARK_CLASS+"-container",!0)),this._tierBaselines.push(r.append("line").classed("baseline",!0))}this._measurer=new n.Measurers.Measurer(this._tierLabelContainers[0])},o.prototype._getTickIntervalValues=function(t){return this._scale.tickInterval(t.interval,t.step)},o.prototype._getTickValues=function(){var t=this;return this._possibleTimeAxisConfigurations[this._mostPreciseConfigIndex].reduce((function(e,n){return e.concat(t._getTickIntervalValues(n))}),[])},o.prototype._cleanTiers=function(){for(var t=0;t<this._tierLabelContainers.length;t++)this._tierLabelContainers[t].selectAll("."+e.Axis.TICK_LABEL_CLASS).remove(),this._tierMarkContainers[t].selectAll("."+e.Axis.TICK_MARK_CLASS).remove(),this._tierBaselines[t].style("visibility","hidden")},o.prototype._getTickValuesForConfiguration=function(t){var e=this._scale.tickInterval(t.interval,t.step),n=this._scale.domain(),r=e.map((function(t){return t.valueOf()}));return-1===r.indexOf(n[0].valueOf())&&e.unshift(n[0]),-1===r.indexOf(n[1].valueOf())&&e.push(n[1]),e},o.prototype._renderTierLabels=function(n,r,i){var o=this,a=this._getTickValuesForConfiguration(r),s=[];"between"===this._tierLabelPositions[i]&&1===r.step?a.map((function(t,e){e+1>=a.length||s.push(new Date((a[e+1].valueOf()-a[e].valueOf())/2+a[e].valueOf()))})):s=a;var l=n.selectAll("."+e.Axis.TICK_LABEL_CLASS).data(s,(function(t){return String(t.valueOf())}));l.enter().append("g").classed(e.Axis.TICK_LABEL_CLASS,!0).append("text");var u,c="center"===this._tierLabelPositions[i]||1===r.step?0:this.tickLabelPadding();u="bottom"===this.orientation()?t.sum(this._tierHeights.slice(0,i+1))-this.tickLabelPadding():"center"===this._tierLabelPositions[i]?this.height()-t.sum(this._tierHeights.slice(0,i))-this.tickLabelPadding()-this._maxLabelTickLength():this.height()-t.sum(this._tierHeights.slice(0,i))-this.tickLabelPadding();var h=l.selectAll("text");h.size()>0&&e.Utils.DOM.translate(h,c,u),l.exit().remove(),l.attr("transform",(function(t){return"translate("+o._scale.scale(t)+",0)"}));var p="center"===this._tierLabelPositions[i]||1===r.step?"middle":"start";l.selectAll("text").text(r.formatter).style("text-anchor",p)},o.prototype._renderTickMarks=function(n,r){var i=this._tierMarkContainers[r].selectAll("."+e.Axis.TICK_MARK_CLASS).data(n);i.enter().append("line").classed(e.Axis.TICK_MARK_CLASS,!0);var o=this._generateTickMarkAttrHash(),a=this._tierHeights.slice(0,r).reduce((function(t,e){return t+e}),0);"bottom"===this.orientation()?(o.y1=a,o.y2=a+("center"===this._tierLabelPositions[r]?this.innerTickLength():this._tierHeights[r])):(o.y1=this.height()-a,o.y2=this.height()-(a+("center"===this._tierLabelPositions[r]?this.innerTickLength():this._tierHeights[r]))),i.attr(o),"bottom"===this.orientation()?(o.y1=a,o.y2=a+("center"===this._tierLabelPositions[r]?this.endTickLength():this._tierHeights[r])):(o.y1=this.height()-a,o.y2=this.height()-(a+("center"===this._tierLabelPositions[r]?this.endTickLength():this._tierHeights[r]))),t.select(i[0][0]).attr(o),t.select(i[0][i.size()-1]).attr(o),t.select(i[0][0]).classed(e.Axis.END_TICK_MARK_CLASS,!0),t.select(i[0][i.size()-1]).classed(e.Axis.END_TICK_MARK_CLASS,!0),i.exit().remove()},o.prototype._renderLabellessTickMarks=function(t){var n=this._tickMarkContainer.selectAll("."+e.Axis.TICK_MARK_CLASS).data(t);n.enter().append("line").classed(e.Axis.TICK_MARK_CLASS,!0);var r=this._generateTickMarkAttrHash();r.y2="bottom"===this.orientation()?this.tickLabelPadding():this.height()-this.tickLabelPadding(),n.attr(r),n.exit().remove()},o.prototype._generateLabellessTicks=function(){return this._mostPreciseConfigIndex<1?[]:this._getTickIntervalValues(this._possibleTimeAxisConfigurations[this._mostPreciseConfigIndex-1][0])},o.prototype.renderImmediately=function(){var t=this;this._mostPreciseConfigIndex=this._getMostPreciseConfigurationIndex();var e=this._possibleTimeAxisConfigurations[this._mostPreciseConfigIndex];this._cleanTiers(),e.forEach((function(e,n){return t._renderTierLabels(t._tierLabelContainers[n],e,n)}));for(var n=e.map((function(e,n){return t._getTickValuesForConfiguration(e)})),r=0,i=0;i<Math.max(e.length,1);++i){var o=this._generateBaselineAttrHash();o.y1+="bottom"===this.orientation()?r:-r,o.y2=o.y1,this._tierBaselines[i].attr(o).style("visibility","inherit"),r+=this._tierHeights[i]}var a=[],s=this._scale.domain(),l=this._scale.scale(s[1])-this._scale.scale(s[0]);for(1.5*this._getIntervalLength(e[0])>=l&&(a=this._generateLabellessTicks()),this._renderLabellessTickMarks(a),this._hideOverflowingTiers(),i=0;i<e.length;++i)this._renderTickMarks(n[i],i),this._hideOverlappingAndCutOffLabels(i);return this.annotationsEnabled()?this._drawAnnotations():this._removeAnnotations(),this},o.prototype._hideOverflowingTiers=function(){var t=this,e=this.height(),n=0;this.content().selectAll("."+o.TIME_AXIS_TIER_CLASS).attr("visibility",(function(r,i){return(n+=t._tierHeights[i])<=e?"inherit":"hidden"}))},o.prototype._hideOverlappingAndCutOffLabels=function(n){var r,i=this,o=this._boundingBox.node().getBoundingClientRect(),a=this._tierMarkContainers[n].selectAll("."+e.Axis.TICK_MARK_CLASS).filter((function(e,n){var r=t.select(this).style("visibility");return"visible"===r||"inherit"===r}))[0].map((function(t){return t.getBoundingClientRect()}));this._tierLabelContainers[n].selectAll("."+e.Axis.TICK_LABEL_CLASS).filter((function(e,n){var r=t.select(this).style("visibility");return"visible"===r||"inherit"===r})).each((function(n,s){var l,u=this.getBoundingClientRect(),c=t.select(this),h=a[s],p=a[s+1],f=null!=r&&e.Utils.DOM.clientRectsOverlap(u,r),d=null!=h&&e.Utils.DOM.clientRectsOverlap(u,h),_=null!=p&&e.Utils.DOM.clientRectsOverlap(u,p);l=u,!(Math.floor(o.left)<=Math.ceil(l.left)&&Math.floor(o.top)<=Math.ceil(l.top)&&Math.floor(l.right)<=Math.ceil(o.left+i.width())&&Math.floor(l.bottom)<=Math.ceil(o.top+i.height()))||f||d||_?c.style("visibility","hidden"):(r=u,c.style("visibility","inherit"))}))},o.TIME_AXIS_TIER_CLASS="time-axis-tier",o._DEFAULT_TIME_AXIS_CONFIGURATIONS=[[{interval:e.TimeInterval.second,step:1,formatter:e.Formatters.time("%I:%M:%S %p")},{interval:e.TimeInterval.day,step:1,formatter:e.Formatters.time("%B %e, %Y")}],[{interval:e.TimeInterval.second,step:5,formatter:e.Formatters.time("%I:%M:%S %p")},{interval:e.TimeInterval.day,step:1,formatter:e.Formatters.time("%B %e, %Y")}],[{interval:e.TimeInterval.second,step:10,formatter:e.Formatters.time("%I:%M:%S %p")},{interval:e.TimeInterval.day,step:1,formatter:e.Formatters.time("%B %e, %Y")}],[{interval:e.TimeInterval.second,step:15,formatter:e.Formatters.time("%I:%M:%S %p")},{interval:e.TimeInterval.day,step:1,formatter:e.Formatters.time("%B %e, %Y")}],[{interval:e.TimeInterval.second,step:30,formatter:e.Formatters.time("%I:%M:%S %p")},{interval:e.TimeInterval.day,step:1,formatter:e.Formatters.time("%B %e, %Y")}],[{interval:e.TimeInterval.minute,step:1,formatter:e.Formatters.time("%I:%M %p")},{interval:e.TimeInterval.day,step:1,formatter:e.Formatters.time("%B %e, %Y")}],[{interval:e.TimeInterval.minute,step:5,formatter:e.Formatters.time("%I:%M %p")},{interval:e.TimeInterval.day,step:1,formatter:e.Formatters.time("%B %e, %Y")}],[{interval:e.TimeInterval.minute,step:10,formatter:e.Formatters.time("%I:%M %p")},{interval:e.TimeInterval.day,step:1,formatter:e.Formatters.time("%B %e, %Y")}],[{interval:e.TimeInterval.minute,step:15,formatter:e.Formatters.time("%I:%M %p")},{interval:e.TimeInterval.day,step:1,formatter:e.Formatters.time("%B %e, %Y")}],[{interval:e.TimeInterval.minute,step:30,formatter:e.Formatters.time("%I:%M %p")},{interval:e.TimeInterval.day,step:1,formatter:e.Formatters.time("%B %e, %Y")}],[{interval:e.TimeInterval.hour,step:1,formatter:e.Formatters.time("%I %p")},{interval:e.TimeInterval.day,step:1,formatter:e.Formatters.time("%B %e, %Y")}],[{interval:e.TimeInterval.hour,step:3,formatter:e.Formatters.time("%I %p")},{interval:e.TimeInterval.day,step:1,formatter:e.Formatters.time("%B %e, %Y")}],[{interval:e.TimeInterval.hour,step:6,formatter:e.Formatters.time("%I %p")},{interval:e.TimeInterval.day,step:1,formatter:e.Formatters.time("%B %e, %Y")}],[{interval:e.TimeInterval.hour,step:12,formatter:e.Formatters.time("%I %p")},{interval:e.TimeInterval.day,step:1,formatter:e.Formatters.time("%B %e, %Y")}],[{interval:e.TimeInterval.day,step:1,formatter:e.Formatters.time("%a %e")},{interval:e.TimeInterval.month,step:1,formatter:e.Formatters.time("%B %Y")}],[{interval:e.TimeInterval.day,step:1,formatter:e.Formatters.time("%e")},{interval:e.TimeInterval.month,step:1,formatter:e.Formatters.time("%B %Y")}],[{interval:e.TimeInterval.month,step:1,formatter:e.Formatters.time("%B")},{interval:e.TimeInterval.year,step:1,formatter:e.Formatters.time("%Y")}],[{interval:e.TimeInterval.month,step:1,formatter:e.Formatters.time("%b")},{interval:e.TimeInterval.year,step:1,formatter:e.Formatters.time("%Y")}],[{interval:e.TimeInterval.month,step:3,formatter:e.Formatters.time("%b")},{interval:e.TimeInterval.year,step:1,formatter:e.Formatters.time("%Y")}],[{interval:e.TimeInterval.month,step:6,formatter:e.Formatters.time("%b")},{interval:e.TimeInterval.year,step:1,formatter:e.Formatters.time("%Y")}],[{interval:e.TimeInterval.year,step:1,formatter:e.Formatters.time("%Y")}],[{interval:e.TimeInterval.year,step:1,formatter:e.Formatters.time("%y")}],[{interval:e.TimeInterval.year,step:5,formatter:e.Formatters.time("%Y")}],[{interval:e.TimeInterval.year,step:25,formatter:e.Formatters.time("%Y")}],[{interval:e.TimeInterval.year,step:50,formatter:e.Formatters.time("%Y")}],[{interval:e.TimeInterval.year,step:100,formatter:e.Formatters.time("%Y")}],[{interval:e.TimeInterval.year,step:200,formatter:e.Formatters.time("%Y")}],[{interval:e.TimeInterval.year,step:500,formatter:e.Formatters.time("%Y")}],[{interval:e.TimeInterval.year,step:1e3,formatter:e.Formatters.time("%Y")}]],o._LONG_DATE=new Date(9999,8,29,12,59,9999),o}(e.Axis),i.Time=o}(e||(e={})),function(e){var i,o;i=e.Axes||(e.Axes={}),o=function(i){function o(t,n){i.call(this,t,n),this._tickLabelPositioning="center",this._usesTextWidthApproximation=!1,this.formatter(e.Formatters.general())}return r(o,i),o.prototype._setup=function(){i.prototype._setup.call(this),this._measurer=new n.Measurers.Measurer(this._tickLabelContainer,e.Axis.TICK_LABEL_CLASS),this._wrapper=(new n.Wrappers.Wrapper).maxLines(1)},o.prototype._computeWidth=function(){var t=this._usesTextWidthApproximation?this._computeApproximateTextWidth():this._computeExactTextWidth();return"center"===this._tickLabelPositioning?this._maxLabelTickLength()+this.tickLabelPadding()+t:Math.max(this._maxLabelTickLength(),this.tickLabelPadding()+t)},o.prototype._computeExactTextWidth=function(){var t=this,n=this._getTickValues().map((function(e){var n=t.formatter()(e);return t._measurer.measure(n).width}));return e.Utils.Math.max(n,0)},o.prototype._computeApproximateTextWidth=function(){var t=this,n=this._getTickValues(),r=this._measurer.measure("M").width,i=n.map((function(e){return t.formatter()(e).length*r}));return e.Utils.Math.max(i,0)},o.prototype._computeHeight=function(){var t=this._measurer.measure().height;return"center"===this._tickLabelPositioning?this._maxLabelTickLength()+this.tickLabelPadding()+t:Math.max(this._maxLabelTickLength(),this.tickLabelPadding()+t)},o.prototype._getTickValues=function(){var t=this._scale,e=t.domain(),n=e[0]<=e[1]?e[0]:e[1],r=e[0]>=e[1]?e[0]:e[1];return n===e[0]?t.ticks().filter((function(t){return t>=n&&t<=r})):t.ticks().filter((function(t){return t>=n&&t<=r})).reverse()},o.prototype._rescale=function(){if(this._isSetup){if(!this._isHorizontal()){var t=this._computeWidth();if(t>this.width()||t<this.width()-this.margin())return void this.redraw()}this.render()}},o.prototype.renderImmediately=function(){var t=this;i.prototype.renderImmediately.call(this);var n={x:0,y:0,dx:"0em",dy:"0.3em"},r=this._maxLabelTickLength(),o=this.tickLabelPadding(),a="middle",s=0,l=0,u=0,c=0;if(this._isHorizontal())switch(this._tickLabelPositioning){case"left":a="end",s=-o,c=o;break;case"center":c=r+o;break;case"right":a="start",s=o,c=o}else switch(this._tickLabelPositioning){case"top":n.dy="-0.3em",u=o,l=-o;break;case"center":u=r+o;break;case"bottom":n.dy="1em",u=o,l=o}var h=this._generateTickMarkAttrHash();switch(this.orientation()){case"bottom":n.x=h.x1,n.dy="0.95em",l=h.y1+c;break;case"top":n.x=h.x1,n.dy="-.25em",l=h.y1-c;break;case"left":a="end",s=h.x1-u,n.y=h.y1;break;case"right":a="start",s=h.x1+u,n.y=h.y1}var p=this._getTickValues(),f=this._tickLabelContainer.selectAll("."+e.Axis.TICK_LABEL_CLASS).data(p);f.enter().append("text").classed(e.Axis.TICK_LABEL_CLASS,!0),f.exit().remove(),f.style("text-anchor",a).style("visibility","inherit").attr(n).text((function(e){return t.formatter()(e)}));var d="translate("+s+", "+l+")";return this._tickLabelContainer.attr("transform",d),this._showAllTickMarks(),this.showEndTickLabels()||this._hideEndTickLabels(),this._hideOverflowingTickLabels(),this._hideOverlappingTickLabels(),"bottom"!==this._tickLabelPositioning&&"top"!==this._tickLabelPositioning&&"left"!==this._tickLabelPositioning&&"right"!==this._tickLabelPositioning||this._hideTickMarksWithoutLabel(),this},o.prototype._showAllTickMarks=function(){this._tickMarkContainer.selectAll("."+e.Axis.TICK_MARK_CLASS).each((function(){t.select(this).style("visibility","inherit")}))},o.prototype._hideTickMarksWithoutLabel=function(){var n=this._tickMarkContainer.selectAll("."+e.Axis.TICK_MARK_CLASS),r=this._tickLabelContainer.selectAll("."+e.Axis.TICK_LABEL_CLASS).filter((function(e,n){var r=t.select(this).style("visibility");return"inherit"===r||"visible"===r})),i=[];r.each((function(t){return i.push(t)})),n.each((function(e,n){-1===i.indexOf(e)&&t.select(this).style("visibility","hidden")}))},o.prototype.tickLabelPosition=function(t){if(null==t)return this._tickLabelPositioning;var e=t.toLowerCase();if(this._isHorizontal()){if("left"!==e&&"center"!==e&&"right"!==e)throw new Error(e+" is not a valid tick label position for a horizontal NumericAxis")}else if("top"!==e&&"center"!==e&&"bottom"!==e)throw new Error(e+" is not a valid tick label position for a vertical NumericAxis");return this._tickLabelPositioning=e,this.redraw(),this},o.prototype.usesTextWidthApproximation=function(t){return null==t?this._usesTextWidthApproximation:(this._usesTextWidthApproximation=t,this)},o.prototype._hideEndTickLabels=function(){var n=this._boundingBox.node().getBoundingClientRect(),r=this._tickLabelContainer.selectAll("."+e.Axis.TICK_LABEL_CLASS);if(0!==r[0].length){var i=r[0][0];e.Utils.DOM.clientRectInside(i.getBoundingClientRect(),n)||t.select(i).style("visibility","hidden");var o=r[0][r[0].length-1];e.Utils.DOM.clientRectInside(o.getBoundingClientRect(),n)||t.select(o).style("visibility","hidden")}},o.prototype._hideOverflowingTickLabels=function(){var n=this._boundingBox.node().getBoundingClientRect(),r=this._tickLabelContainer.selectAll("."+e.Axis.TICK_LABEL_CLASS);r.empty()||r.each((function(r,i){e.Utils.DOM.clientRectInside(this.getBoundingClientRect(),n)||t.select(this).style("visibility","hidden")}))},o.prototype._hideOverlappingTickLabels=function(){for(var n=this._tickLabelContainer.selectAll("."+e.Axis.TICK_LABEL_CLASS).filter((function(e,n){var r=t.select(this).style("visibility");return"inherit"===r||"visible"===r})),r=n[0].map((function(t){return t.getBoundingClientRect()})),i=1;!this._hasOverlapWithInterval(i,r)&&i<r.length;)i+=1;n.each((function(e,n){var r=t.select(this);n%i!=0&&r.style("visibility","hidden")}))},o.prototype._hasOverlapWithInterval=function(t,e){var n=this.tickLabelPadding();"bottom"!==this._tickLabelPositioning&&"top"!==this._tickLabelPositioning&&"left"!==this._tickLabelPositioning&&"right"!==this._tickLabelPositioning||(n*=3);for(var r=0;r<e.length-t;r+=t){var i=e[r],o=e[r+t];if(this._isHorizontal()){if(i.right+n>=o.left)return!1}else if(i.top-n<=o.bottom)return!1}return!0},o}(e.Axis),i.Numeric=o}(e||(e={})),function(e){var i,o;i=e.Axes||(e.Axes={}),o=function(i){function o(t,e){void 0===e&&(e="bottom"),i.call(this,t,e),this._tickLabelAngle=0,this.addClass("category-axis")}return r(o,i),Object.defineProperty(o.prototype,"_wrapper",{get:function(){var t=new n.Wrappers.Wrapper;return null!=this._tickLabelMaxWidth&&t.maxLines(1),t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"_writer",{get:function(){return new n.Writers.Writer(this._measurer,this._wrapper)},enumerable:!0,configurable:!0}),o.prototype._setup=function(){i.prototype._setup.call(this),this._measurer=new n.Measurers.CacheCharacterMeasurer(this._tickLabelContainer)},o.prototype._rescale=function(){return this.redraw()},o.prototype.requestedSpace=function(t,e){var n=this._isHorizontal()?0:this._tickSpaceRequired()+this.margin(),r=this._isHorizontal()?this._tickSpaceRequired()+this.margin():0;if(0===this._scale.domain().length)return{minWidth:0,minHeight:0};if(this.annotationsEnabled()){var i=this._annotationTierHeight()*this.annotationTierCount();this._isHorizontal()?r+=i:n+=i}var o=this._scale,a=this._measureTickLabels(t,e,o,o.domain());return{minWidth:a.usedWidth+n,minHeight:a.usedHeight+r}},o.prototype._coreSize=function(){var t=this._isHorizontal()?this.height():this.width(),e=(this._isHorizontal()?this.requestedSpace(this.width(),this.height()).minHeight:this.requestedSpace(this.width(),this.height()).minWidth)-(this.margin()+this._annotationTierHeight());return Math.min(e,t)},o.prototype._getTickValues=function(){return this._scale.domain()},o.prototype.tickLabelAngle=function(t){if(null==t)return this._tickLabelAngle;if(0!==t&&90!==t&&-90!==t)throw new Error("Angle "+t+" not supported; only 0, 90, and -90 are valid values");return this._tickLabelAngle=t,this.redraw(),this},o.prototype.tickLabelMaxWidth=function(t){return 0===arguments.length?this._tickLabelMaxWidth:(this._tickLabelMaxWidth=t,this.redraw(),this)},o.prototype._tickSpaceRequired=function(){return this._maxLabelTickLength()+this.tickLabelPadding()},o.prototype._drawTicks=function(e,n){var r,i,o=this;switch(this.tickLabelAngle()){case 0:r={left:"right",right:"left",top:"center",bottom:"center"},i={left:"center",right:"center",top:"bottom",bottom:"top"};break;case 90:r={left:"center",right:"center",top:"right",bottom:"left"},i={left:"top",right:"bottom",top:"center",bottom:"center"};break;case-90:r={left:"center",right:"center",top:"left",bottom:"right"},i={left:"bottom",right:"top",top:"center",bottom:"center"}}n.each((function(n){var a=e.stepWidth(),s=o._isHorizontal()?a:o.width()-o._tickSpaceRequired(),l=o._isHorizontal()?o.height()-o._tickSpaceRequired():a,u={selection:t.select(this),xAlign:r[o.orientation()],yAlign:i[o.orientation()],textRotation:o.tickLabelAngle()};null!=o._tickLabelMaxWidth&&(s=Math.min(s,o._tickLabelMaxWidth)),o._writer.write(o.formatter()(n),s,l,u)}))},o.prototype._measureTickLabels=function(n,r,i,o){var a,s=this,l=(this._isHorizontal()?n:r)/(2*i.outerPadding()+(o.length-1)*i.innerPadding()+o.length)*(1+i.innerPadding()),u=o.map((function(t){var e=n-s._tickSpaceRequired();s._isHorizontal()&&(e=l,0!==s._tickLabelAngle&&(e=r-s._tickSpaceRequired()),e=Math.max(e,0));var i=l;return s._isHorizontal()&&(i=r-s._tickSpaceRequired(),0!==s._tickLabelAngle&&(i=n-s._tickSpaceRequired()),i=Math.max(i,0)),null!=s._tickLabelMaxWidth&&(e=Math.min(e,s._tickLabelMaxWidth)),s._wrapper.wrap(s.formatter()(t),s._measurer,e,i)})),c=this._isHorizontal()&&0===this._tickLabelAngle?t.sum:e.Utils.Math.max,h=this._isHorizontal()&&0===this._tickLabelAngle?e.Utils.Math.max:t.sum,p=c(u,(function(t){return s._measurer.measure(t.wrappedText).width}),0),f=h(u,(function(t){return s._measurer.measure(t.wrappedText).height}),0);return 0!==this._tickLabelAngle&&(p=(a=[f,p])[0],f=a[1]),{usedWidth:p,usedHeight:f}},o.prototype.renderImmediately=function(){var t=this;i.prototype.renderImmediately.call(this);var n=this._scale,r=this._tickLabelContainer.selectAll("."+e.Axis.TICK_LABEL_CLASS).data(this._scale.domain(),(function(t){return t}));r.enter().append("g").classed(e.Axis.TICK_LABEL_CLASS,!0),r.exit().remove(),r.attr("transform",(function(e,r){var i=n.stepWidth()-n.rangeBand(),o=n.scale(e)-n.rangeBand()/2-i/2;return"translate("+(t._isHorizontal()?o:0)+","+(t._isHorizontal()?0:o)+")"})),r.text(""),this._drawTicks(n,r);var o="right"===this.orientation()?this._tickSpaceRequired():0,a="bottom"===this.orientation()?this._tickSpaceRequired():0;return e.Utils.DOM.translate(this._tickLabelContainer,o,a),this},o.prototype.computeLayout=function(t,e,n){return this._measurer.reset(),i.prototype.computeLayout.call(this,t,e,n),this._isHorizontal()||this._scale.range([0,this.height()]),this},o}(e.Axis),i.Category=o}(e||(e={})),function(t){!function(e){var i=function(t){function e(e,n){void 0===e&&(e=""),void 0===n&&(n=0),t.call(this),this.addClass("label"),this.text(e),this.angle(n),this.xAlignment("center").yAlignment("center"),this._padding=0}return r(e,t),e.prototype.requestedSpace=function(t,e){var n=this._measurer.measure(this._text);return{minWidth:(0===this.angle()?n.width:n.height)+2*this.padding(),minHeight:(0===this.angle()?n.height:n.width)+2*this.padding()}},e.prototype._setup=function(){t.prototype._setup.call(this),this._textContainer=this.content().append("g"),this._measurer=new n.Measurers.Measurer(this._textContainer),this._wrapper=new n.Wrappers.Wrapper,this._writer=new n.Writers.Writer(this._measurer,this._wrapper),this.text(this._text)},e.prototype.text=function(t){if(null==t)return this._text;if("string"!=typeof t)throw new Error("Label.text() only takes strings as input");return this._text=t,this.redraw(),this},e.prototype.angle=function(t){if(null==t)return this._angle;if((t%=360)>180?t-=360:t<-180&&(t+=360),-90!==t&&0!==t&&90!==t)throw new Error(t+" is not a valid angle for Label");return this._angle=t,this.redraw(),this},e.prototype.padding=function(t){if(null==t)return this._padding;if((t=+t)<0)throw new Error(t+" is not a valid padding value. Cannot be less than 0.");return this._padding=t,this.redraw(),this},e.prototype.fixedWidth=function(){return!0},e.prototype.fixedHeight=function(){return!0},e.prototype.renderImmediately=function(){t.prototype.renderImmediately.call(this),this._textContainer.selectAll("g").remove();var e=this._measurer.measure(this._text),n=Math.max(Math.min((this.height()-e.height)/2,this.padding()),0),r=Math.max(Math.min((this.width()-e.width)/2,this.padding()),0);this._textContainer.attr("transform","translate("+r+","+n+")");var i=this.width()-2*r,o=this.height()-2*n,a={selection:this._textContainer,xAlign:this.xAlignment(),yAlign:this.yAlignment(),textRotation:this.angle()};return this._writer.write(this._text,i,o,a),this},e}(t.Component);e.Label=i;var o=function(t){function e(n,r){t.call(this,n,r),this.addClass(e.TITLE_LABEL_CLASS)}return r(e,t),e.TITLE_LABEL_CLASS="title-label",e}(i);e.TitleLabel=o;var a=function(t){function e(n,r){t.call(this,n,r),this.addClass(e.AXIS_LABEL_CLASS)}return r(e,t),e.AXIS_LABEL_CLASS="axis-label",e}(i);e.AxisLabel=a}(t.Components||(t.Components={}))}(e||(e={})),function(e){var i,o;i=e.Components||(e.Components={}),o=function(i){function o(t){var n=this;if(i.call(this),this._padding=5,this.addClass("legend"),this.maxEntriesPerRow(1),null==t)throw new Error("Legend requires a colorScale");this._colorScale=t,this._redrawCallback=function(t){return n.redraw()},this._colorScale.onUpdate(this._redrawCallback),this._formatter=e.Formatters.identity(),this.xAlignment("right").yAlignment("top"),this.comparator((function(t,e){var r=n._colorScale.domain().slice().map((function(t){return n._formatter(t)}));return r.indexOf(t)-r.indexOf(e)})),this._symbolFactoryAccessor=function(){return e.SymbolFactories.circle()},this._symbolOpacityAccessor=function(){return 1}}return r(o,i),o.prototype._setup=function(){i.prototype._setup.call(this);var t=this.content().append("g").classed(o.LEGEND_ROW_CLASS,!0);t.append("g").classed(o.LEGEND_ENTRY_CLASS,!0).append("text"),this._measurer=new n.Measurers.Measurer(t),this._wrapper=(new n.Wrappers.Wrapper).maxLines(1),this._writer=new n.Writers.Writer(this._measurer,this._wrapper).addTitleElement(e.Configs.ADD_TITLE_ELEMENTS)},o.prototype.formatter=function(t){return null==t?this._formatter:(this._formatter=t,this.redraw(),this)},o.prototype.maxEntriesPerRow=function(t){return null==t?this._maxEntriesPerRow:(this._maxEntriesPerRow=t,this.redraw(),this)},o.prototype.comparator=function(t){return null==t?this._comparator:(this._comparator=t,this.redraw(),this)},o.prototype.colorScale=function(t){return null!=t?(this._colorScale.offUpdate(this._redrawCallback),this._colorScale=t,this._colorScale.onUpdate(this._redrawCallback),this.redraw(),this):this._colorScale},o.prototype.destroy=function(){i.prototype.destroy.call(this),this._colorScale.offUpdate(this._redrawCallback)},o.prototype._calculateLayoutInfo=function(e,n){var r=this,i=this._measurer.measure().height,o=Math.max(0,e-this._padding),a=this._colorScale.domain().slice().sort((function(t,e){return r._comparator(r._formatter(t),r._formatter(e))})),s=t.map(),l=t.map();a.forEach((function(t){var e=i+r._measurer.measure(r._formatter(t)).width+r._padding,n=Math.min(e,o);s.set(t,n),l.set(t,e)}));var u=this._packRows(o,a,s),c=Math.floor((n-2*this._padding)/i);return c!=c&&(c=0),{textHeight:i,entryLengths:s,untruncatedEntryLengths:l,rows:u,numRowsToDraw:Math.max(Math.min(c,u.length),0)}},o.prototype.requestedSpace=function(n,r){var i=this._calculateLayoutInfo(n,r),o=i.rows.map((function(e){return t.sum(e,(function(t){return i.untruncatedEntryLengths.get(t)}))})),a=e.Utils.Math.max(o,0);return{minWidth:this._padding+a,minHeight:i.rows.length*i.textHeight+2*this._padding}},o.prototype._packRows=function(t,e,n){var r=this,i=[],o=[],a=t;return e.forEach((function(e){var s=n.get(e);(s>a||o.length===r._maxEntriesPerRow)&&(i.push(o),o=[],a=t),o.push(e),a-=s})),0!==o.length&&i.push(o),i},o.prototype.entitiesAt=function(e){if(!this._isSetup)return[];var n=[],r=this._calculateLayoutInfo(this.width(),this.height()),i=this._padding,a=this;return this.content().selectAll("g."+o.LEGEND_ROW_CLASS).each((function(s,l){var u=l*r.textHeight+i,c=(l+1)*r.textHeight+i,h=(u+c)/2,p=i,f=i;t.select(this).selectAll("g."+o.LEGEND_ENTRY_CLASS).each((function(i){f+=r.entryLengths.get(i);var o=p+r.textHeight/2;if(f>=e.x&&p<=e.x&&c>=e.y&&u<=e.y){var s=t.select(this),l=s.datum();n.push({datum:l,position:{x:o,y:h},selection:s,component:a})}p+=r.entryLengths.get(i)}))})),n},o.prototype.renderImmediately=function(){var e=this;i.prototype.renderImmediately.call(this);var n=this._calculateLayoutInfo(this.width(),this.height()),r=n.rows.slice(0,n.numRowsToDraw),a=this.content().selectAll("g."+o.LEGEND_ROW_CLASS).data(r);a.enter().append("g").classed(o.LEGEND_ROW_CLASS,!0),a.exit().remove(),a.attr("transform",(function(t,r){return"translate(0, "+(r*n.textHeight+e._padding)+")"}));var s=a.selectAll("g."+o.LEGEND_ENTRY_CLASS).data((function(t){return t})),l=s.enter().append("g").classed(o.LEGEND_ENTRY_CLASS,!0);l.append("path"),l.append("g").classed("text-container",!0),s.exit().remove();var u=this._padding;a.each((function(e){var r=u;t.select(this).selectAll("g."+o.LEGEND_ENTRY_CLASS).attr("transform",(function(t,e){var i="translate("+r+", 0)";return r+=n.entryLengths.get(t),i}))})),s.select("path").attr("d",(function(t,r,i){return e.symbol()(t,i)(.6*n.textHeight)})).attr("transform","translate("+n.textHeight/2+","+n.textHeight/2+")").attr("fill",(function(t){return e._colorScale.scale(t)})).attr("opacity",(function(t,n,r){return e.symbolOpacity()(t,r)})).classed(o.LEGEND_SYMBOL_CLASS,!0);var c=this._padding,h=s.select("g.text-container");h.text("");var p=this;return h.attr("transform","translate("+n.textHeight+", 0)").each((function(e){var r=t.select(this),i=n.entryLengths.get(e)-n.textHeight-c,o={selection:r,xAlign:"left",yAlign:"top",textRotation:0};p._writer.write(p._formatter(e),i,p.height(),o)})),this},o.prototype.symbol=function(t){return null==t?this._symbolFactoryAccessor:(this._symbolFactoryAccessor=t,this.render(),this)},o.prototype.symbolOpacity=function(t){return null==t?this._symbolOpacityAccessor:(this._symbolOpacityAccessor="number"==typeof t?function(){return t}:t,this.render(),this)},o.prototype.fixedWidth=function(){return!0},o.prototype.fixedHeight=function(){return!0},o.LEGEND_ROW_CLASS="legend-row",o.LEGEND_ENTRY_CLASS="legend-entry",o.LEGEND_SYMBOL_CLASS="legend-symbol",o}(e.Component),i.Legend=o}(e||(e={})),function(t){var e,i;e=t.Components||(t.Components={}),i=function(e){function i(n){var r=this;if(e.call(this),this._textPadding=5,null==n)throw new Error("InterpolatedColorLegend requires a interpolatedColorScale");this._scale=n,this._redrawCallback=function(t){return r.redraw()},this._scale.onUpdate(this._redrawCallback),this._formatter=t.Formatters.general(),this._orientation="horizontal",this._expands=!1,this.addClass("legend"),this.addClass("interpolated-color-legend")}return r(i,e),i.prototype.destroy=function(){e.prototype.destroy.call(this),this._scale.offUpdate(this._redrawCallback)},i.prototype.formatter=function(t){return void 0===t?this._formatter:(this._formatter=t,this.redraw(),this)},i.prototype.expands=function(t){return null==t?this._expands:(this._expands=t,this.redraw(),this)},i._ensureOrientation=function(t){if("horizontal"===(t=t.toLowerCase())||"left"===t||"right"===t)return t;throw new Error('"'+t+'" is not a valid orientation for InterpolatedColorLegend')},i.prototype.orientation=function(t){return null==t?this._orientation:(this._orientation=i._ensureOrientation(t),this.redraw(),this)},i.prototype.fixedWidth=function(){return!this.expands()||this._isVertical()},i.prototype.fixedHeight=function(){return!this.expands()||!this._isVertical()},i.prototype._generateTicks=function(t){void 0===t&&(t=i._DEFAULT_NUM_SWATCHES);var e=this._scale.domain();if(1===t)return[e[0]];for(var n=(e[1]-e[0])/(t-1),r=[],o=0;o<t;o++)r.push(e[0]+n*o);return r},i.prototype._setup=function(){e.prototype._setup.call(this),this._swatchContainer=this.content().append("g").classed("swatch-container",!0),this._swatchBoundingBox=this.content().append("rect").classed("swatch-bounding-box",!0),this._lowerLabel=this.content().append("g").classed(i.LEGEND_LABEL_CLASS,!0),this._upperLabel=this.content().append("g").classed(i.LEGEND_LABEL_CLASS,!0),this._measurer=new n.Measurers.Measurer(this.content()),this._wrapper=new n.Wrappers.Wrapper,this._writer=new n.Writers.Writer(this._measurer,this._wrapper)},i.prototype.requestedSpace=function(e,n){var r,o,a=this,s=this._measurer.measure().height,l=s,u=this._scale.domain().map((function(t){return a._measurer.measure(a._formatter(t)).width})),c=i._DEFAULT_NUM_SWATCHES;if(this._isVertical()){var h=t.Utils.Math.max(u,0);o=l+s+this._textPadding+h+this._textPadding,r=c*s}else r=l+s+l,o=this._textPadding+u[0]+c*s+u[1]+this._textPadding;return{minWidth:o,minHeight:r}},i.prototype._isVertical=function(){return"horizontal"!==this._orientation},i.prototype.renderImmediately=function(){var n=this;e.prototype.renderImmediately.call(this);var r,i,o,a,s,l,u=this._scale.domain(),c=this._formatter(u[0]),h=this._measurer.measure(c).width,p=this._formatter(u[1]),f=this._measurer.measure(p).width,d=this._measurer.measure().height,_=this._textPadding,g={x:0,y:0},y={x:0,y:0},m={selection:this._lowerLabel,xAlign:"center",yAlign:"center",textRotation:0},v={selection:this._upperLabel,xAlign:"center",yAlign:"center",textRotation:0},x={x:0,y:0,width:0,height:0};if(this._isVertical()){l=Math.floor(this.height());var b=Math.max(h,f);s=(this.width()-b-2*this._textPadding)/2,r=Math.max(this.width()-s-2*_-b,0),i=1,a=function(t,e){return n.height()-(e+1)},v.yAlign="top",g.y=0,m.yAlign="bottom",y.y=0,"left"===this._orientation?(o=function(t,e){return _+b+_},v.xAlign="right",g.x=-(s+r+_),m.xAlign="right",y.x=-(s+r+_)):(o=function(t,e){return s},v.xAlign="left",g.x=s+r+_,m.xAlign="left",y.x=s+r+_),x.width=r,x.height=l*i}else s=Math.max(_,(this.height()-d)/2),l=Math.max(Math.floor(this.width()-4*_-h-f),0),r=1,i=Math.max(this.height()-2*s,0),o=function(t,e){return Math.floor(h+2*_)+e},a=function(t,e){return s},v.xAlign="right",g.x=-_,m.xAlign="left",y.x=_,x.y=s,x.width=l*r,x.height=i;x.x=o(null,0),this._upperLabel.text(""),this._writer.write(p,this.width(),this.height(),v);var E="translate("+g.x+", "+g.y+")";this._upperLabel.attr("transform",E),this._lowerLabel.text(""),this._writer.write(c,this.width(),this.height(),m);var w="translate("+y.x+", "+y.y+")";this._lowerLabel.attr("transform",w),this._swatchBoundingBox.attr(x);var A=this._generateTicks(l),M=this._swatchContainer.selectAll("rect.swatch").data(A),C=M.enter().append("rect").classed("swatch",!0);return M.exit().remove(),M.attr({fill:function(t,e){return n._scale.scale(t)},width:r,height:i,x:o,y:a,"shape-rendering":"crispEdges"}),t.Configs.ADD_TITLE_ELEMENTS&&C.append("title").text((function(t){return n._formatter(t)})),this},i._DEFAULT_NUM_SWATCHES=11,i.LEGEND_LABEL_CLASS="legend-label",i}(t.Component),e.InterpolatedColorLegend=i}(e||(e={})),function(t){var e,n;e=t.Components||(t.Components={}),n=function(e){function n(n,r){var i=this;if(null!=n&&!t.QuantitativeScale.prototype.isPrototypeOf(n))throw new Error("xScale needs to inherit from Scale.QuantitativeScale");if(null!=r&&!t.QuantitativeScale.prototype.isPrototypeOf(r))throw new Error("yScale needs to inherit from Scale.QuantitativeScale");e.call(this),this.addClass("gridlines"),this._xScale=n,this._yScale=r,this._renderCallback=function(t){return i.render()},this._xScale&&this._xScale.onUpdate(this._renderCallback),this._yScale&&this._yScale.onUpdate(this._renderCallback)}return r(n,e),n.prototype.destroy=function(){return e.prototype.destroy.call(this),this._xScale&&this._xScale.offUpdate(this._renderCallback),this._yScale&&this._yScale.offUpdate(this._renderCallback),this},n.prototype._setup=function(){e.prototype._setup.call(this),this._xLinesContainer=this.content().append("g").classed("x-gridlines",!0),this._yLinesContainer=this.content().append("g").classed("y-gridlines",!0)},n.prototype.renderImmediately=function(){return e.prototype.renderImmediately.call(this),this._redrawXLines(),this._redrawYLines(),this},n.prototype.computeLayout=function(t,n,r){return e.prototype.computeLayout.call(this,t,n,r),null!=this._xScale&&this._xScale.range([0,this.width()]),null!=this._yScale&&this._yScale.range([this.height(),0]),this},n.prototype._redrawXLines=function(){var t=this;if(this._xScale){var e=this._xScale.ticks(),n=function(e){return t._xScale.scale(e)},r=this._xLinesContainer.selectAll("line").data(e);r.enter().append("line"),r.attr("x1",n).attr("y1",0).attr("x2",n).attr("y2",this.height()).classed("zeroline",(function(t){return 0===t})),r.exit().remove()}},n.prototype._redrawYLines=function(){var t=this;if(this._yScale){var e=this._yScale.ticks(),n=function(e){return t._yScale.scale(e)},r=this._yLinesContainer.selectAll("line").data(e);r.enter().append("line"),r.attr("x1",0).attr("y1",n).attr("x2",this.width()).attr("y2",n).classed("zeroline",(function(t){return 0===t})),r.exit().remove()}},n}(t.Component),e.Gridlines=n}(e||(e={})),function(e){var n,i;n=e.Components||(e.Components={}),i=function(n){function i(t){var e=this;void 0===t&&(t=[]),n.call(this),this._rowPadding=0,this._columnPadding=0,this._rows=[],this._rowWeights=[],this._columnWeights=[],this._nRows=0,this._nCols=0,this._calculatedLayout=null,this.addClass("table"),t.forEach((function(t,n){t.forEach((function(t,r){null!=t&&e.add(t,n,r)}))}))}return r(i,n),i.prototype._forEach=function(t){for(var e=0;e<this._nRows;e++)for(var n=0;n<this._nCols;n++)null!=this._rows[e][n]&&t(this._rows[e][n])},i.prototype.has=function(t){for(var e=0;e<this._nRows;e++)for(var n=0;n<this._nCols;n++)if(this._rows[e][n]===t)return!0;return!1},i.prototype.componentAt=function(t,e){return t<0||t>=this._nRows||e<0||e>=this._nCols?null:this._rows[t][e]},i.prototype.add=function(t,e,n){if(null==t)throw Error("Cannot add null to a table cell");if(!this.has(t)){if(null!=(this._rows[e]&&this._rows[e][n]))throw new Error("cell is occupied");t.detach(),this._nRows=Math.max(e+1,this._nRows),this._nCols=Math.max(n+1,this._nCols),this._padTableToSize(this._nRows,this._nCols),this._rows[e][n]=t,this._adoptAndAnchor(t),this.redraw()}return this},i.prototype._remove=function(t){for(var e=0;e<this._nRows;e++)for(var n=0;n<this._nCols;n++)if(this._rows[e][n]===t)return this._rows[e][n]=null,!0;return!1},i.prototype._iterateLayout=function(n,r,o){void 0===o&&(o=!1);for(var a,s,l,u,c,h=this._rows,p=t.transpose(this._rows),f=n-this._columnPadding*(this._nCols-1),d=r-this._rowPadding*(this._nRows-1),_=i._calcComponentWeights(this._rowWeights,h,(function(t){return null==t||t.fixedHeight()})),g=i._calcComponentWeights(this._columnWeights,p,(function(t){return null==t||t.fixedWidth()})),y=g.map((function(t){return 0===t?.5:t})),m=_.map((function(t){return 0===t?.5:t})),v=i._calcProportionalSpace(y,f),x=i._calcProportionalSpace(m,d),b=e.Utils.Array.createFilledArray(0,this._nCols),E=e.Utils.Array.createFilledArray(0,this._nRows),w=0;;){var A=e.Utils.Array.add(E,x),M=e.Utils.Array.add(b,v);b=(l=this._determineGuarantees(M,A,o)).guaranteedWidths,E=l.guaranteedHeights,u=l.wantsWidthArr.some((function(t){return t})),c=l.wantsHeightArr.some((function(t){return t}));var C=a,S=s;a=f-t.sum(l.guaranteedWidths),s=d-t.sum(l.guaranteedHeights);var k=void 0;u?(k=l.wantsWidthArr.map((function(t){return t?.1:0})),k=e.Utils.Array.add(k,g)):k=g;var T=void 0;if(c?(T=l.wantsHeightArr.map((function(t){return t?.1:0})),T=e.Utils.Array.add(T,_)):T=_,v=i._calcProportionalSpace(k,a),x=i._calcProportionalSpace(T,s),w++,!(a>0&&a!==C||s>0&&s!==S))break;if(w>5)break}return a=f-t.sum(l.guaranteedWidths),s=d-t.sum(l.guaranteedHeights),{colProportionalSpace:v=i._calcProportionalSpace(g,a),rowProportionalSpace:x=i._calcProportionalSpace(_,s),guaranteedWidths:l.guaranteedWidths,guaranteedHeights:l.guaranteedHeights,wantsWidth:u,wantsHeight:c}},i.prototype._determineGuarantees=function(t,n,r){void 0===r&&(r=!1);var i=e.Utils.Array.createFilledArray(0,this._nCols),o=e.Utils.Array.createFilledArray(0,this._nRows),a=e.Utils.Array.createFilledArray(!1,this._nCols),s=e.Utils.Array.createFilledArray(!1,this._nRows);return this._rows.forEach((function(e,l){e.forEach((function(e,u){var c;c=null!=e?e.requestedSpace(t[u],n[l]):{minWidth:0,minHeight:0};var h=r?Math.min(c.minWidth,t[u]):c.minWidth;i[u]=Math.max(i[u],h);var p=r?Math.min(c.minHeight,n[l]):c.minHeight;o[l]=Math.max(o[l],p);var f=c.minWidth>t[u];a[u]=a[u]||f;var d=c.minHeight>n[l];s[l]=s[l]||d}))})),{guaranteedWidths:i,guaranteedHeights:o,wantsWidthArr:a,wantsHeightArr:s}},i.prototype.requestedSpace=function(e,n){return this._calculatedLayout=this._iterateLayout(e,n),{minWidth:t.sum(this._calculatedLayout.guaranteedWidths),minHeight:t.sum(this._calculatedLayout.guaranteedHeights)}},i.prototype.computeLayout=function(r,i,o){var a=this;n.prototype.computeLayout.call(this,r,i,o);var s=t.sum(this._calculatedLayout.guaranteedWidths),l=t.sum(this._calculatedLayout.guaranteedHeights),u=this._calculatedLayout;(s>this.width()||l>this.height())&&(u=this._iterateLayout(this.width(),this.height(),!0));var c=0,h=e.Utils.Array.add(u.rowProportionalSpace,u.guaranteedHeights),p=e.Utils.Array.add(u.colProportionalSpace,u.guaranteedWidths);return this._rows.forEach((function(t,e){var n=0;t.forEach((function(t,r){null!=t&&t.computeLayout({x:n,y:c},p[r],h[e]),n+=p[r]+a._columnPadding})),c+=h[e]+a._rowPadding})),this},i.prototype.rowPadding=function(t){if(null==t)return this._rowPadding;if(!e.Utils.Math.isValidNumber(t)||t<0)throw Error("rowPadding must be a non-negative finite value");return this._rowPadding=t,this.redraw(),this},i.prototype.columnPadding=function(t){if(null==t)return this._columnPadding;if(!e.Utils.Math.isValidNumber(t)||t<0)throw Error("columnPadding must be a non-negative finite value");return this._columnPadding=t,this.redraw(),this},i.prototype.rowWeight=function(t,n){if(null==n)return this._rowWeights[t];if(!e.Utils.Math.isValidNumber(n)||n<0)throw Error("rowWeight must be a non-negative finite value");return this._rowWeights[t]=n,this.redraw(),this},i.prototype.columnWeight=function(t,n){if(null==n)return this._columnWeights[t];if(!e.Utils.Math.isValidNumber(n)||n<0)throw Error("columnWeight must be a non-negative finite value");return this._columnWeights[t]=n,this.redraw(),this},i.prototype.fixedWidth=function(){var e=t.transpose(this._rows);return i._fixedSpace(e,(function(t){return null==t||t.fixedWidth()}))},i.prototype.fixedHeight=function(){return i._fixedSpace(this._rows,(function(t){return null==t||t.fixedHeight()}))},i.prototype._padTableToSize=function(t,e){for(var n=0;n<t;n++){void 0===this._rows[n]&&(this._rows[n]=[],this._rowWeights[n]=null);for(var r=0;r<e;r++)void 0===this._rows[n][r]&&(this._rows[n][r]=null)}for(r=0;r<e;r++)void 0===this._columnWeights[r]&&(this._columnWeights[r]=null)},i._calcComponentWeights=function(t,e,n){return t.map((function(t,r){return null!=t?t:e[r].map(n).reduce((function(t,e){return t&&e}),!0)?0:1}))},i._calcProportionalSpace=function(n,r){var i=t.sum(n);return 0===i?e.Utils.Array.createFilledArray(0,n.length):n.map((function(t){return r*t/i}))},i._fixedSpace=function(t,e){var n=function(t){return t.reduce((function(t,e){return t&&e}),!0)};return n(t.map((function(t){return n(t.map(e))})))},i}(e.ComponentContainer),n.Table=i}(e||(e={})),function(t){!function(e){!function(t){t[t.VALUE=0]="VALUE",t[t.PIXEL=1]="PIXEL"}(e.PropertyMode||(e.PropertyMode={}));var n=e.PropertyMode,i=function(e){function i(){var t=this;e.call(this),this._boxVisible=!1,this._boxBounds={topLeft:{x:0,y:0},bottomRight:{x:0,y:0}},this._xBoundsMode=n.PIXEL,this._yBoundsMode=n.PIXEL,this.addClass("selection-box-layer"),this._adjustBoundsCallback=function(){t.render()},this._clipPathEnabled=!0,this._xExtent=[void 0,void 0],this._yExtent=[void 0,void 0]}return r(i,e),i.prototype._setup=function(){e.prototype._setup.call(this),this._box=this.content().append("g").classed("selection-box",!0).remove(),this._boxArea=this._box.append("rect").classed("selection-area",!0)},i.prototype._sizeFromOffer=function(t,e){return{width:t,height:e}},i.prototype.bounds=function(t){return null==t?this._getBounds():(this._setBounds(t),this._xBoundsMode=n.PIXEL,this._yBoundsMode=n.PIXEL,this.render(),this)},i.prototype._setBounds=function(t){var e={x:Math.min(t.topLeft.x,t.bottomRight.x),y:Math.min(t.topLeft.y,t.bottomRight.y)},n={x:Math.max(t.topLeft.x,t.bottomRight.x),y:Math.max(t.topLeft.y,t.bottomRight.y)};this._boxBounds={topLeft:e,bottomRight:n}},i.prototype._getBounds=function(){return{topLeft:{x:this._xBoundsMode===n.PIXEL?this._boxBounds.topLeft.x:null==this._xScale?0:Math.min(this.xScale().scale(this.xExtent()[0]),this.xScale().scale(this.xExtent()[1])),y:this._yBoundsMode===n.PIXEL?this._boxBounds.topLeft.y:null==this._yScale?0:Math.min(this.yScale().scale(this.yExtent()[0]),this.yScale().scale(this.yExtent()[1]))},bottomRight:{x:this._xBoundsMode===n.PIXEL?this._boxBounds.bottomRight.x:null==this._xScale?0:Math.max(this.xScale().scale(this.xExtent()[0]),this.xScale().scale(this.xExtent()[1])),y:this._yBoundsMode===n.PIXEL?this._boxBounds.bottomRight.y:null==this._yScale?0:Math.max(this.yScale().scale(this.yExtent()[0]),this.yScale().scale(this.yExtent()[1]))}}},i.prototype.renderImmediately=function(){if(e.prototype.renderImmediately.call(this),this._boxVisible){var n=this.bounds(),r=n.topLeft.y,i=n.bottomRight.y,o=n.topLeft.x,a=n.bottomRight.x;if(!(t.Utils.Math.isValidNumber(r)&&t.Utils.Math.isValidNumber(i)&&t.Utils.Math.isValidNumber(o)&&t.Utils.Math.isValidNumber(a)))throw new Error("bounds have not been properly set");this._boxArea.attr({x:o,y:r,width:a-o,height:i-r}),this.content().node().appendChild(this._box.node())}else this._box.remove();return this},i.prototype.boxVisible=function(t){return null==t?this._boxVisible:(this._boxVisible=t,this.render(),this)},i.prototype.fixedWidth=function(){return!0},i.prototype.fixedHeight=function(){return!0},i.prototype.xScale=function(t){return null==t?this._xScale:(null!=this._xScale&&this._xScale.offUpdate(this._adjustBoundsCallback),this._xScale=t,this._xBoundsMode=n.VALUE,this._xScale.onUpdate(this._adjustBoundsCallback),this.render(),this)},i.prototype.yScale=function(t){return null==t?this._yScale:(null!=this._yScale&&this._yScale.offUpdate(this._adjustBoundsCallback),this._yScale=t,this._yBoundsMode=n.VALUE,this._yScale.onUpdate(this._adjustBoundsCallback),this.render(),this)},i.prototype.xExtent=function(t){return null==t?this._getXExtent():(this._setXExtent(t),this._xBoundsMode=n.VALUE,this.render(),this)},i.prototype._getXExtent=function(){return this._xBoundsMode===n.VALUE?this._xExtent:null==this._xScale?[void 0,void 0]:[this._xScale.invert(this._boxBounds.topLeft.x),this._xScale.invert(this._boxBounds.bottomRight.x)]},i.prototype._setXExtent=function(t){this._xExtent=t},i.prototype.yExtent=function(t){return null==t?this._getYExtent():(this._setYExtent(t),this._yBoundsMode=n.VALUE,this.render(),this)},i.prototype._getYExtent=function(){return this._yBoundsMode===n.VALUE?this._yExtent:null==this._yScale?[void 0,void 0]:[this._yScale.invert(this._boxBounds.topLeft.y),this._yScale.invert(this._boxBounds.bottomRight.y)]},i.prototype._setYExtent=function(t){this._yExtent=t},i.prototype.destroy=function(){e.prototype.destroy.call(this),null!=this._xScale&&this.xScale().offUpdate(this._adjustBoundsCallback),null!=this._yScale&&this.yScale().offUpdate(this._adjustBoundsCallback)},i}(t.Component);e.SelectionBoxLayer=i}(t.Components||(t.Components={}))}(e||(e={})),function(t){!function(e){var n;!function(t){t[t.VALUE=0]="VALUE",t[t.PIXEL=1]="PIXEL"}(n||(n={}));var i=function(e){function i(t){var r=this;if(e.call(this),this._mode=n.VALUE,t!==i.ORIENTATION_VERTICAL&&t!==i.ORIENTATION_HORIZONTAL)throw new Error(t+" is not a valid orientation for GuideLineLayer");this._orientation=t,this._clipPathEnabled=!0,this.addClass("guide-line-layer"),this._isVertical()?this.addClass("vertical"):this.addClass("horizontal"),this._scaleUpdateCallback=function(){r._syncPixelPositionAndValue(),r.render()}}return r(i,e),i.prototype._setup=function(){e.prototype._setup.call(this),this._guideLine=this.content().append("line").classed("guide-line",!0)},i.prototype._sizeFromOffer=function(t,e){return{width:t,height:e}},i.prototype._isVertical=function(){return this._orientation===i.ORIENTATION_VERTICAL},i.prototype.fixedWidth=function(){return!0},i.prototype.fixedHeight=function(){return!0},i.prototype.computeLayout=function(t,n,r){return e.prototype.computeLayout.call(this,t,n,r),null!=this.scale()&&(this._isVertical()?this.scale().range([0,this.width()]):this.scale().range([this.height(),0])),this},i.prototype.renderImmediately=function(){return e.prototype.renderImmediately.call(this),this._syncPixelPositionAndValue(),this._guideLine.attr({x1:this._isVertical()?this.pixelPosition():0,y1:this._isVertical()?0:this.pixelPosition(),x2:this._isVertical()?this.pixelPosition():this.width(),y2:this._isVertical()?this.height():this.pixelPosition()}),this},i.prototype._syncPixelPositionAndValue=function(){null!=this.scale()&&(this._mode===n.VALUE&&null!=this.value()?this._pixelPosition=this.scale().scale(this.value()):this._mode===n.PIXEL&&null!=this.pixelPosition()&&(this._value=this.scale().invert(this.pixelPosition())))},i.prototype._setPixelPositionWithoutChangingMode=function(t){this._pixelPosition=t,null!=this.scale()&&(this._value=this.scale().invert(this.pixelPosition())),this.render()},i.prototype.scale=function(t){if(null==t)return this._scale;var e=this._scale;return null!=e&&e.offUpdate(this._scaleUpdateCallback),this._scale=t,this._scale.onUpdate(this._scaleUpdateCallback),this._syncPixelPositionAndValue(),this.redraw(),this},i.prototype.value=function(t){return null==t?this._value:(this._value=t,this._mode=n.VALUE,this._syncPixelPositionAndValue(),this.render(),this)},i.prototype.pixelPosition=function(e){if(null==e)return this._pixelPosition;if(!t.Utils.Math.isValidNumber(e))throw new Error("pixelPosition must be a finite number");return this._pixelPosition=e,this._mode=n.PIXEL,this._syncPixelPositionAndValue(),this.render(),this},i.prototype.destroy=function(){e.prototype.destroy.call(this),null!=this.scale()&&this.scale().offUpdate(this._scaleUpdateCallback)},i.ORIENTATION_VERTICAL="vertical",i.ORIENTATION_HORIZONTAL="horizontal",i}(t.Component);e.GuideLineLayer=i}(t.Components||(t.Components={}))}(e||(e={})),function(t){var e,n;e=t.Plots||(t.Plots={}),(n=e.Animator||(e.Animator={})).MAIN="main",n.RESET="reset"}(e||(e={})),function(e){var n=function(n){function i(){var r=this;n.call(this),this._dataChanged=!1,this._animate=!1,this._animators={},this._clipPathEnabled=!0,this.addClass("plot"),this._datasetToDrawer=new e.Utils.Map,this._attrBindings=t.map(),this._attrExtents=t.map(),this._includedValuesProvider=function(t){return r._includedValuesForScale(t)},this._renderCallback=function(t){return r.render()},this._onDatasetUpdateCallback=function(){return r._onDatasetUpdate()},this._propertyBindings=t.map(),this._propertyExtents=t.map();var o=(new e.Animators.Easing).maxTotalDuration(i._ANIMATION_MAX_DURATION);this.animator(e.Plots.Animator.MAIN,o),this.animator(e.Plots.Animator.RESET,new e.Animators.Null)}return r(i,n),i.prototype.anchor=function(t){return n.prototype.anchor.call(this,t),this._dataChanged=!0,this._updateExtents(),this},i.prototype._setup=function(){var t=this;n.prototype._setup.call(this),this._renderArea=this.content().append("g").classed("render-area",!0),this.datasets().forEach((function(e){return t._createNodesForDataset(e)}))},i.prototype.destroy=function(){var t=this;n.prototype.destroy.call(this),this._scales().forEach((function(e){return e.offUpdate(t._renderCallback)})),this.datasets([])},i.prototype._createNodesForDataset=function(t){var e=this._datasetToDrawer.get(t);return e.renderArea(this._renderArea.append("g")),e},i.prototype._createDrawer=function(t){return new e.Drawer(t)},i.prototype._getAnimator=function(t){return this._animateOnNextRender()&&this._animators[t]||new e.Animators.Null},i.prototype._onDatasetUpdate=function(){this._updateExtents(),this._dataChanged=!0,this.render()},i.prototype.attr=function(t,e,n){return null==e?this._attrBindings.get(t):(this._bindAttr(t,e,n),this.render(),this)},i.prototype._bindProperty=function(e,n,r){var i=this._propertyBindings.get(e),o=null!=i?i.scale:null;this._propertyBindings.set(e,{accessor:t.functor(n),scale:r}),this._updateExtentsForProperty(e),null!=o&&this._uninstallScaleForKey(o,e),null!=r&&this._installScaleForKey(r,e)},i.prototype._bindAttr=function(e,n,r){var i=this._attrBindings.get(e),o=null!=i?i.scale:null;this._attrBindings.set(e,{accessor:t.functor(n),scale:r}),this._updateExtentsForAttr(e),null!=o&&this._uninstallScaleForKey(o,e),null!=r&&this._installScaleForKey(r,e)},i.prototype._generateAttrToProjector=function(){var t={};this._attrBindings.forEach((function(e,n){var r=n.accessor,i=n.scale,o=i?function(t,e,n){return i.scale(r(t,e,n))}:r;t[e]=o}));var e=this._propertyProjectors();return Object.keys(e).forEach((function(n){null==t[n]&&(t[n]=e[n])})),t},i.prototype.renderImmediately=function(){return n.prototype.renderImmediately.call(this),this._isAnchored&&(this._paint(),this._dataChanged=!1),this},i.prototype.animated=function(t){return null==t?this._animate:(this._animate=t,this)},i.prototype.detach=function(){return n.prototype.detach.call(this),this._updateExtents(),this},i.prototype._scales=function(){var t=[];return this._attrBindings.forEach((function(e,n){var r=n.scale;null!=r&&-1===t.indexOf(r)&&t.push(r)})),this._propertyBindings.forEach((function(e,n){var r=n.scale;null!=r&&-1===t.indexOf(r)&&t.push(r)})),t},i.prototype._updateExtents=function(){var t=this;this._attrBindings.forEach((function(e){return t._updateExtentsForAttr(e)})),this._propertyExtents.forEach((function(e){return t._updateExtentsForProperty(e)})),this._scales().forEach((function(e){return e.addIncludedValuesProvider(t._includedValuesProvider)}))},i.prototype._updateExtentsForAttr=function(t){this._updateExtentsForKey(t,this._attrBindings,this._attrExtents,null)},i.prototype._updateExtentsForProperty=function(t){this._updateExtentsForKey(t,this._propertyBindings,this._propertyExtents,this._filterForProperty(t))},i.prototype._filterForProperty=function(t){return null},i.prototype._updateExtentsForKey=function(t,e,n,r){var i=this,o=e.get(t);null!=o&&null!=o.accessor&&n.set(t,this.datasets().map((function(t){return i._computeExtent(t,o,r)})))},i.prototype._computeExtent=function(t,e,n){var r=e.accessor,i=e.scale;if(null==i)return[];var o=t.data();null!=n&&(o=o.filter((function(e,r){return n(e,r,t)})));var a=o.map((function(e,n){return r(e,n,t)}));return i.extentOfValues(a)},i.prototype._extentsForProperty=function(t){return this._propertyExtents.get(t)},i.prototype._includedValuesForScale=function(e){var n=this;if(!this._isAnchored)return[];var r=[];return this._attrBindings.forEach((function(i,o){if(o.scale===e){var a=n._attrExtents.get(i);null!=a&&(r=r.concat(t.merge(a)))}})),this._propertyBindings.forEach((function(i,o){if(o.scale===e){var a=n._extentsForProperty(i);null!=a&&(r=r.concat(t.merge(a)))}})),r},i.prototype.animator=function(t,e){return void 0===e?this._animators[t]:(this._animators[t]=e,this)},i.prototype.addDataset=function(t){return this._addDataset(t),this._onDatasetUpdate(),this},i.prototype._addDataset=function(t){this._removeDataset(t);var e=this._createDrawer(t);return this._datasetToDrawer.set(t,e),this._isSetup&&this._createNodesForDataset(t),t.onUpdate(this._onDatasetUpdateCallback),this},i.prototype.removeDataset=function(t){return this._removeDataset(t),this._onDatasetUpdate(),this},i.prototype._removeDataset=function(t){return-1===this.datasets().indexOf(t)||(this._removeDatasetNodes(t),t.offUpdate(this._onDatasetUpdateCallback),this._datasetToDrawer.delete(t)),this},i.prototype._removeDatasetNodes=function(t){this._datasetToDrawer.get(t).remove()},i.prototype.datasets=function(t){var e=this,n=[];return this._datasetToDrawer.forEach((function(t,e){return n.push(e)})),null==t?n:(n.forEach((function(t){return e._removeDataset(t)})),t.forEach((function(t){return e._addDataset(t)})),this._onDatasetUpdate(),this)},i.prototype._getDrawersInOrder=function(){var t=this;return this.datasets().map((function(e){return t._datasetToDrawer.get(e)}))},i.prototype._generateDrawSteps=function(){return[{attrToProjector:this._generateAttrToProjector(),animator:new e.Animators.Null}]},i.prototype._additionalPaint=function(t){},i.prototype._getDataToDraw=function(){var t=new e.Utils.Map;return this.datasets().forEach((function(e){return t.set(e,e.data())})),t},i.prototype._paint=function(){var t=this._generateDrawSteps(),n=this._getDataToDraw(),r=this._getDrawersInOrder();this.datasets().forEach((function(e,i){return r[i].draw(n.get(e),t)}));var i=this.datasets().map((function(e,i){return r[i].totalDrawTime(n.get(e),t)})),o=e.Utils.Math.max(i,0);this._additionalPaint(o)},i.prototype.selections=function(e){var n=this;void 0===e&&(e=this.datasets());var r=[];return e.forEach((function(t){var e=n._datasetToDrawer.get(t);null!=e&&e.renderArea().selectAll(e.selector()).each((function(){r.push(this)}))})),t.selectAll(r)},i.prototype.entities=function(t){var e=this;return void 0===t&&(t=this.datasets()),this._lightweightEntities(t).map((function(t){return e._lightweightPlotEntityToPlotEntity(t)}))},i.prototype._lightweightEntities=function(t){var n=this;void 0===t&&(t=this.datasets());var r=[];return t.forEach((function(t,i){var o=n._datasetToDrawer.get(t),a=0;t.data().forEach((function(s,l){var u=n._pixelPoint(s,l,t);e.Utils.Math.isNaN(u.x)||e.Utils.Math.isNaN(u.y)||(r.push({datum:s,index:l,dataset:t,datasetIndex:i,position:u,component:n,drawer:o,validDatumIndex:a}),a++)}))})),r},i.prototype._lightweightPlotEntityToPlotEntity=function(t){return{datum:t.datum,position:t.position,dataset:t.dataset,datasetIndex:t.datasetIndex,index:t.index,component:t.component,selection:t.drawer.selectionForIndex(t.validDatumIndex)}},i.prototype.entitiesAt=function(t){throw new Error("plots must implement entitiesAt")},i.prototype.entityNearest=function(t){var n,r=this,i=1/0;if(this._lightweightEntities().forEach((function(o){if(r._entityVisibleOnPlot(o.position,o.datum,o.index,o.dataset)){var a=e.Utils.Math.distanceSquared(o.position,t);a<i&&(i=a,n=o)}})),void 0!==n)return this._lightweightPlotEntityToPlotEntity(n)},i.prototype._entityVisibleOnPlot=function(t,e,n,r){return!(t.x<0||t.y<0||t.x>this.width()||t.y>this.height())},i.prototype._uninstallScaleForKey=function(t,e){t.offUpdate(this._renderCallback),t.removeIncludedValuesProvider(this._includedValuesProvider)},i.prototype._installScaleForKey=function(t,e){t.onUpdate(this._renderCallback),t.addIncludedValuesProvider(this._includedValuesProvider)},i.prototype._propertyProjectors=function(){return{}},i._scaledAccessor=function(t){return null==t.scale?t.accessor:function(e,n,r){return t.scale.scale(t.accessor(e,n,r))}},i.prototype._pixelPoint=function(t,e,n){return{x:0,y:0}},i.prototype._animateOnNextRender=function(){return this._animate&&this._dataChanged},i._ANIMATION_MAX_DURATION=600,i}(e.Component);e.Plot=n}(e||(e={})),function(e){var i,o;i=e.Plots||(e.Plots={}),o=function(i){function o(){var t=this;i.call(this),this._labelFormatter=e.Formatters.identity(),this._labelsEnabled=!1,this.innerRadius(0),this.outerRadius((function(){return Math.min(t.width(),t.height())/2})),this.addClass("pie-plot"),this.attr("fill",(function(t,e){return String(e)}),new e.Scales.Color),this._strokeDrawers=new e.Utils.Map}return r(o,i),o.prototype._setup=function(){var t=this;i.prototype._setup.call(this),this._strokeDrawers.forEach((function(e){return e.renderArea(t._renderArea.append("g"))}))},o.prototype.computeLayout=function(t,e,n){i.prototype.computeLayout.call(this,t,e,n),this._renderArea.attr("transform","translate("+this.width()/2+","+this.height()/2+")");var r=Math.min(this.width(),this.height())/2;return null!=this.innerRadius().scale&&this.innerRadius().scale.range([0,r]),null!=this.outerRadius().scale&&this.outerRadius().scale.range([0,r]),this},o.prototype.addDataset=function(t){return i.prototype.addDataset.call(this,t),this},o.prototype._addDataset=function(t){if(1===this.datasets().length)return e.Utils.Window.warn("Only one dataset is supported in Pie plots"),this;this._updatePieAngles();var n=new e.Drawers.ArcOutline(t);return this._isSetup&&n.renderArea(this._renderArea.append("g")),this._strokeDrawers.set(t,n),i.prototype._addDataset.call(this,t),this},o.prototype.removeDataset=function(t){return i.prototype.removeDataset.call(this,t),this},o.prototype._removeDatasetNodes=function(t){i.prototype._removeDatasetNodes.call(this,t),this._strokeDrawers.get(t).remove()},o.prototype._removeDataset=function(t){return i.prototype._removeDataset.call(this,t),this._startAngles=[],this._endAngles=[],this},o.prototype.selections=function(e){var n=this;void 0===e&&(e=this.datasets());var r=i.prototype.selections.call(this,e)[0];return e.forEach((function(t){var e=n._strokeDrawers.get(t);null!=e&&e.renderArea().selectAll(e.selector()).each((function(){r.push(this)}))})),t.selectAll(r)},o.prototype._onDatasetUpdate=function(){i.prototype._onDatasetUpdate.call(this),this._updatePieAngles(),this.render()},o.prototype._createDrawer=function(t){return new e.Drawers.Arc(t)},o.prototype.entities=function(t){var e=this;void 0===t&&(t=this.datasets());var n=i.prototype.entities.call(this,t);return n.forEach((function(t){t.position.x+=e.width()/2,t.position.y+=e.height()/2;var n=e._strokeDrawers.get(t.dataset).selectionForIndex(t.index);t.selection[0].push(n[0][0])})),n},o.prototype.sectorValue=function(t,e){return null==t?this._propertyBindings.get(o._SECTOR_VALUE_KEY):(this._bindProperty(o._SECTOR_VALUE_KEY,t,e),this._updatePieAngles(),this.render(),this)},o.prototype.innerRadius=function(t,e){return null==t?this._propertyBindings.get(o._INNER_RADIUS_KEY):(this._bindProperty(o._INNER_RADIUS_KEY,t,e),this.render(),this)},o.prototype.outerRadius=function(t,e){return null==t?this._propertyBindings.get(o._OUTER_RADIUS_KEY):(this._bindProperty(o._OUTER_RADIUS_KEY,t,e),this.render(),this)},o.prototype.labelsEnabled=function(t){return null==t?this._labelsEnabled:(this._labelsEnabled=t,this.render(),this)},o.prototype.labelFormatter=function(t){return null==t?this._labelFormatter:(this._labelFormatter=t,this.render(),this)},o.prototype.entitiesAt=function(t){var e=this.width()/2,n=this.height()/2,r={x:t.x-e,y:t.y-n},i=this._sliceIndexForPoint(r);return null==i?[]:[this.entities()[i]]},o.prototype._propertyProjectors=function(){var n=this,r=i.prototype._propertyProjectors.call(this),o=e.Plot._scaledAccessor(this.innerRadius()),a=e.Plot._scaledAccessor(this.outerRadius());return r.d=function(e,r,i){return t.svg.arc().innerRadius(o(e,r,i)).outerRadius(a(e,r,i)).startAngle(n._startAngles[r]).endAngle(n._endAngles[r])(e,r)},r},o.prototype._updatePieAngles=function(){if(null!=this.sectorValue()&&0!==this.datasets().length){var n=e.Plot._scaledAccessor(this.sectorValue()),r=this.datasets()[0],i=this._getDataToDraw().get(r),o=t.layout.pie().sort(null).value((function(t,e){return n(t,e,r)}))(i);this._startAngles=o.map((function(t){return t.startAngle})),this._endAngles=o.map((function(t){return t.endAngle}))}},o.prototype._getDataToDraw=function(){var t=i.prototype._getDataToDraw.call(this);if(0===this.datasets().length)return t;var n=e.Plot._scaledAccessor(this.sectorValue()),r=this.datasets()[0],a=t.get(r).filter((function(t,e){return o._isValidData(n(t,e,r))}));return t.set(r,a),t},o._isValidData=function(t){return e.Utils.Math.isValidNumber(t)&&t>=0},o.prototype._pixelPoint=function(n,r,i){var a=e.Plot._scaledAccessor(this.sectorValue());if(!o._isValidData(a(n,r,i)))return{x:NaN,y:NaN};var s=(e.Plot._scaledAccessor(this.innerRadius())(n,r,i)+e.Plot._scaledAccessor(this.outerRadius())(n,r,i))/2,l=t.layout.pie().sort(null).value((function(t,e){var n=a(t,e,i);return o._isValidData(n)?n:0}))(i.data()),u=(l[r].startAngle+l[r].endAngle)/2;return{x:s*Math.sin(u),y:-s*Math.cos(u)}},o.prototype._additionalPaint=function(t){var n=this;this._renderArea.select(".label-area").remove(),this._labelsEnabled&&e.Utils.Window.setTimeout((function(){return n._drawLabels()}),t);var r=this._generateStrokeDrawSteps(),i=this._getDataToDraw();this.datasets().forEach((function(t){return n._strokeDrawers.get(t).draw(i.get(t),r)}))},o.prototype._generateStrokeDrawSteps=function(){return[{attrToProjector:this._generateAttrToProjector(),animator:new e.Animators.Null}]},o.prototype._sliceIndexForPoint=function(t){var e,n=Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2)),r=Math.acos(-t.y/n);t.x<0&&(r=2*Math.PI-r);for(var i=0;i<this._startAngles.length;i++)if(this._startAngles[i]<r&&this._endAngles[i]>r){e=i;break}if(void 0!==e){var o=this.datasets()[0],a=o.data()[e],s=this.innerRadius().accessor(a,e,o),l=this.outerRadius().accessor(a,e,o);if(n>s&&n<l)return e}return null},o.prototype._drawLabels=function(){var t=this,r=this._generateAttrToProjector(),i=this._renderArea.append("g").classed("label-area",!0),o=new n.Measurers.Measurer(i),a=new n.Writers.Writer(o),s=this.datasets()[0];this._getDataToDraw().get(s).forEach((function(n,l){var u=t.sectorValue().accessor(n,l,s);if(e.Utils.Math.isValidNumber(u)){u=t._labelFormatter(u);var c=o.measure(u),h=(t._endAngles[l]+t._startAngles[l])/2,p=t.outerRadius().accessor(n,l,s);t.outerRadius().scale&&(p=t.outerRadius().scale.scale(p));var f=t.innerRadius().accessor(n,l,s);t.innerRadius().scale&&(f=t.innerRadius().scale.scale(f));var d=(p+f)/2,_=Math.sin(h)*d-c.width/2,g=-Math.cos(h)*d-c.height/2,y=[{x:_,y:g},{x:_,y:g+c.height},{x:_+c.width,y:g},{x:_+c.width,y:g+c.height}],m=y.every((function(e){return Math.abs(e.x)<=t.width()/2&&Math.abs(e.y)<=t.height()/2}));m&&(m=y.map((function(e){return t._sliceIndexForPoint(e)})).every((function(t){return t===l})));var v=r.fill(n,l,s),x=1.6*e.Utils.Color.contrast("white",v)<e.Utils.Color.contrast("black",v),b=i.append("g").attr("transform","translate("+_+","+g+")"),E=x?"dark-label":"light-label";b.classed(E,!0),b.style("visibility",m?"inherit":"hidden"),a.write(u,c.width,c.height,{selection:b,xAlign:"center",yAlign:"center",textRotation:0})}}))},o._INNER_RADIUS_KEY="inner-radius",o._OUTER_RADIUS_KEY="outer-radius",o._SECTOR_VALUE_KEY="sector-value",o}(e.Plot),i.Pie=o}(e||(e={})),function(t){var e=function(e){function n(){var t=this;e.call(this),this._autoAdjustXScaleDomain=!1,this._autoAdjustYScaleDomain=!1,this._deferredRendering=!1,this._cachedDomainX=[null,null],this._cachedDomainY=[null,null],this.addClass("xy-plot"),this._adjustYDomainOnChangeFromXCallback=function(e){return t._adjustYDomainOnChangeFromX()},this._adjustXDomainOnChangeFromYCallback=function(e){return t._adjustXDomainOnChangeFromY()};var n=0,r=0,i=1,o=1,a=[null,null],s=[null,null],l=0,u=function(){null!=t._renderArea&&(t._renderArea.attr("transform","translate("+n+", "+r+")scale("+i+", "+o+")"),clearTimeout(l),l=setTimeout((function(){t._cachedDomainX=a,t._cachedDomainY=s,n=0,r=0,i=1,o=1,t.render(),t._renderArea.attr("transform","translate(0, 0) scale(1, 1)")}),500))};this._renderCallback=function(e){t.deferredRendering()&&t.x()&&t.x().scale===e?function(e){t._isAnchored&&(a=e.domain(),i=(e.scale(t._cachedDomainX[1])-e.scale(t._cachedDomainX[0]))/(e.scale(a[1])-e.scale(a[0]))||1,n=e.scale(t._cachedDomainX[0])-e.scale(a[0])||0,u())}(e):t.deferredRendering()&&t.y()&&t.y().scale===e?function(e){t._isAnchored&&(s=e.domain(),o=(e.scale(t._cachedDomainY[1])-e.scale(t._cachedDomainY[0]))/(e.scale(s[1])-e.scale(s[0]))||1,r=e.scale(t._cachedDomainY[0])-e.scale(s[0])*o||0,u())}(e):t.render()}}return r(n,e),n.prototype.deferredRendering=function(t){return null==t?this._deferredRendering:(t&&this._isAnchored&&(this.x()&&this.x().scale&&(this._cachedDomainX=this.x().scale.domain()),this.y()&&this.y().scale&&(this._cachedDomainY=this.y().scale.domain())),this._deferredRendering=t,this)},n.prototype.x=function(t,e){if(null==t)return this._propertyBindings.get(n._X_KEY);this._bindProperty(n._X_KEY,t,e);var r=this.width();return null!=e&&null!=r&&e.range([0,r]),this._autoAdjustYScaleDomain&&this._updateYExtentsAndAutodomain(),this.render(),this},n.prototype.y=function(e,r){if(null==e)return this._propertyBindings.get(n._Y_KEY);this._bindProperty(n._Y_KEY,e,r);var i=this.height();return null!=r&&null!=i&&(r instanceof t.Scales.Category?r.range([0,i]):r.range([i,0])),this._autoAdjustXScaleDomain&&this._updateXExtentsAndAutodomain(),this.render(),this},n.prototype._filterForProperty=function(t){return"x"===t&&this._autoAdjustXScaleDomain?this._makeFilterByProperty("y"):"y"===t&&this._autoAdjustYScaleDomain?this._makeFilterByProperty("x"):null},n.prototype._makeFilterByProperty=function(e){var n=this._propertyBindings.get(e);if(null!=n){var r=n.accessor,i=n.scale;if(null!=i)return function(e,n,o){var a=i.range();return t.Utils.Math.inRange(i.scale(r(e,n,o)),a[0],a[1])}}return null},n.prototype._uninstallScaleForKey=function(t,r){e.prototype._uninstallScaleForKey.call(this,t,r);var i=r===n._X_KEY?this._adjustYDomainOnChangeFromXCallback:this._adjustXDomainOnChangeFromYCallback;t.offUpdate(i)},n.prototype._installScaleForKey=function(t,r){e.prototype._installScaleForKey.call(this,t,r);var i=r===n._X_KEY?this._adjustYDomainOnChangeFromXCallback:this._adjustXDomainOnChangeFromYCallback;t.onUpdate(i)},n.prototype.destroy=function(){return e.prototype.destroy.call(this),this.x().scale&&this.x().scale.offUpdate(this._adjustYDomainOnChangeFromXCallback),this.y().scale&&this.y().scale.offUpdate(this._adjustXDomainOnChangeFromYCallback),this},n.prototype.autorangeMode=function(t){if(null==t)return this._autoAdjustXScaleDomain?"x":this._autoAdjustYScaleDomain?"y":"none";switch(t){case"x":this._autoAdjustXScaleDomain=!0,this._autoAdjustYScaleDomain=!1,this._adjustXDomainOnChangeFromY();break;case"y":this._autoAdjustXScaleDomain=!1,this._autoAdjustYScaleDomain=!0,this._adjustYDomainOnChangeFromX();break;case"none":this._autoAdjustXScaleDomain=!1,this._autoAdjustYScaleDomain=!1;break;default:throw new Error("Invalid scale name '"+t+"', must be 'x', 'y' or 'none'")}return this},n.prototype.computeLayout=function(n,r,i){e.prototype.computeLayout.call(this,n,r,i);var o=this.x(),a=o&&o.scale;null!=a&&a.range([0,this.width()]);var s=this.y(),l=s&&s.scale;return null!=l&&(l instanceof t.Scales.Category?l.range([0,this.height()]):l.range([this.height(),0])),this},n.prototype._updateXExtentsAndAutodomain=function(){this._updateExtentsForProperty("x");var t=this.x().scale;null!=t&&t.autoDomain()},n.prototype._updateYExtentsAndAutodomain=function(){this._updateExtentsForProperty("y");var t=this.y().scale;null!=t&&t.autoDomain()},n.prototype.showAllData=function(){return this._updateXExtentsAndAutodomain(),this._updateYExtentsAndAutodomain(),this},n.prototype._adjustYDomainOnChangeFromX=function(){this._projectorsReady()&&this._autoAdjustYScaleDomain&&this._updateYExtentsAndAutodomain()},n.prototype._adjustXDomainOnChangeFromY=function(){this._projectorsReady()&&this._autoAdjustXScaleDomain&&this._updateXExtentsAndAutodomain()},n.prototype._projectorsReady=function(){var t=this.x(),e=this.y();return null!=t&&null!=t.accessor&&null!=e&&null!=e.accessor},n.prototype._pixelPoint=function(e,n,r){var i=t.Plot._scaledAccessor(this.x()),o=t.Plot._scaledAccessor(this.y());return{x:i(e,n,r),y:o(e,n,r)}},n.prototype._getDataToDraw=function(){var n=this,r=e.prototype._getDataToDraw.call(this);return this.datasets().forEach((function(e){r.set(e,r.get(e).filter((function(r,i){return function(e,r,i){var o=t.Plot._scaledAccessor(n.x())(e,r,i),a=t.Plot._scaledAccessor(n.y())(e,r,i);return t.Utils.Math.isValidNumber(o)&&t.Utils.Math.isValidNumber(a)}(r,i,e)})))})),r},n._X_KEY="x",n._Y_KEY="y",n}(t.Plot);t.XYPlot=e}(e||(e={})),function(e){var i,o;i=e.Plots||(e.Plots={}),o=function(i){function o(){i.call(this),this._labelsEnabled=!1,this._label=null,this.animator("rectangles",new e.Animators.Null),this.addClass("rectangle-plot"),this.attr("fill",(new e.Scales.Color).range()[0])}return r(o,i),o.prototype._createDrawer=function(t){return new e.Drawers.Rectangle(t)},o.prototype._generateAttrToProjector=function(){var t=this,n=i.prototype._generateAttrToProjector.call(this),r=e.Plot._scaledAccessor(this.x()),a=n[o._X2_KEY],s=e.Plot._scaledAccessor(this.y()),l=n[o._Y2_KEY],u=this.x().scale,c=this.y().scale;return null!=a?(n.width=function(t,e,n){return Math.abs(a(t,e,n)-r(t,e,n))},n.x=function(t,e,n){return Math.min(a(t,e,n),r(t,e,n))}):(n.width=function(e,n,r){return t._rectangleWidth(u)},n.x=function(t,e,i){return r(t,e,i)-.5*n.width(t,e,i)}),null!=l?(n.height=function(t,e,n){return Math.abs(l(t,e,n)-s(t,e,n))},n.y=function(t,e,r){return Math.max(l(t,e,r),s(t,e,r))-n.height(t,e,r)}):(n.height=function(e,n,r){return t._rectangleWidth(c)},n.y=function(t,e,r){return s(t,e,r)-.5*n.height(t,e,r)}),delete n[o._X2_KEY],delete n[o._Y2_KEY],n},o.prototype._generateDrawSteps=function(){return[{attrToProjector:this._generateAttrToProjector(),animator:this._getAnimator("rectangles")}]},o.prototype._updateExtentsForProperty=function(t){i.prototype._updateExtentsForProperty.call(this,t),"x"===t?i.prototype._updateExtentsForProperty.call(this,"x2"):"y"===t&&i.prototype._updateExtentsForProperty.call(this,"y2")},o.prototype._filterForProperty=function(t){return"x2"===t?i.prototype._filterForProperty.call(this,"x"):"y2"===t?i.prototype._filterForProperty.call(this,"y"):i.prototype._filterForProperty.call(this,t)},o.prototype.x=function(t,n){if(null==t)return i.prototype.x.call(this);if(null==n?i.prototype.x.call(this,t):i.prototype.x.call(this,t,n),null!=n){var r=this.x2(),a=r&&r.accessor;null!=a&&this._bindProperty(o._X2_KEY,a,n)}return n instanceof e.Scales.Category&&n.innerPadding(0).outerPadding(0),this},o.prototype.x2=function(t){if(null==t)return this._propertyBindings.get(o._X2_KEY);var e=this.x(),n=e&&e.scale;return this._bindProperty(o._X2_KEY,t,n),this.render(),this},o.prototype.y=function(t,n){if(null==t)return i.prototype.y.call(this);if(null==n?i.prototype.y.call(this,t):i.prototype.y.call(this,t,n),null!=n){var r=this.y2(),a=r&&r.accessor;null!=a&&this._bindProperty(o._Y2_KEY,a,n)}return n instanceof e.Scales.Category&&n.innerPadding(0).outerPadding(0),this},o.prototype.y2=function(t){if(null==t)return this._propertyBindings.get(o._Y2_KEY);var e=this.y(),n=e&&e.scale;return this._bindProperty(o._Y2_KEY,t,n),this.render(),this},o.prototype.entitiesAt=function(t){var e=this._generateAttrToProjector();return this.entities().filter((function(n){var r=n.datum,i=n.index,o=n.dataset,a=e.x(r,i,o),s=e.y(r,i,o),l=e.width(r,i,o),u=e.height(r,i,o);return a<=t.x&&t.x<=a+l&&s<=t.y&&t.y<=s+u}))},o.prototype.entitiesIn=function(t,e){var n,r;if(null==e){var i=t;n={min:i.topLeft.x,max:i.bottomRight.x},r={min:i.topLeft.y,max:i.bottomRight.y}}else n=t,r=e;return this._entitiesIntersecting(n,r)},o.prototype._entityBBox=function(t,e,n,r){return{x:r.x(t,e,n),y:r.y(t,e,n),width:r.width(t,e,n),height:r.height(t,e,n)}},o.prototype._entitiesIntersecting=function(t,n){var r=this,i=[],o=this._generateAttrToProjector();return this.entities().forEach((function(a){e.Utils.DOM.intersectsBBox(t,n,r._entityBBox(a.datum,a.index,a.dataset,o))&&i.push(a)})),i},o.prototype.label=function(t){return null==t?this._label:(this._label=t,this.render(),this)},o.prototype.labelsEnabled=function(t){return null==t?this._labelsEnabled:(this._labelsEnabled=t,this.render(),this)},o.prototype._propertyProjectors=function(){var t=i.prototype._propertyProjectors.call(this);return null!=this.x2()&&(t.x2=e.Plot._scaledAccessor(this.x2())),null!=this.y2()&&(t.y2=e.Plot._scaledAccessor(this.y2())),t},o.prototype._pixelPoint=function(t,e,n){var r=this._generateAttrToProjector(),i=r.x(t,e,n),o=r.y(t,e,n);return{x:i+r.width(t,e,n)/2,y:o+r.height(t,e,n)/2}},o.prototype._rectangleWidth=function(n){if(n instanceof e.Scales.Category)return n.rangeBand();var r=n===this.x().scale?this.x().accessor:this.y().accessor,i=t.set(e.Utils.Array.flatten(this.datasets().map((function(t){return t.data().map((function(e,n){return r(e,n,t).valueOf()}))})))).values().map((function(t){return+t})),o=e.Utils.Math.min(i,0),a=e.Utils.Math.max(i,0),s=n.scale(o);return(n.scale(a)-s)/Math.abs(a-o)},o.prototype._getDataToDraw=function(){var t=new e.Utils.Map,n=this._generateAttrToProjector();return this.datasets().forEach((function(r){var i=r.data().filter((function(t,i){return e.Utils.Math.isValidNumber(n.x(t,i,r))&&e.Utils.Math.isValidNumber(n.y(t,i,r))&&e.Utils.Math.isValidNumber(n.width(t,i,r))&&e.Utils.Math.isValidNumber(n.height(t,i,r))}));t.set(r,i)})),t},o.prototype._additionalPaint=function(t){var n=this;this._renderArea.selectAll(".label-area").remove(),this._labelsEnabled&&null!=this.label()&&e.Utils.Window.setTimeout((function(){return n._drawLabels()}),t)},o.prototype._drawLabels=function(){var t=this,e=this._getDataToDraw();this.datasets().forEach((function(n,r){return t._drawLabel(e,n,r)}))},o.prototype._drawLabel=function(t,r,i){var o=this,a=this._generateAttrToProjector(),s=this._renderArea.append("g").classed("label-area",!0),l=new n.Measurers.Measurer(s),u=new n.Writers.Writer(l),c=this.x().scale.range(),h=this.y().scale.range(),p=Math.min.apply(null,c),f=Math.max.apply(null,c),d=Math.min.apply(null,h),_=Math.max.apply(null,h);t.get(r).forEach((function(n,c){var h=""+o.label()(n,c,r),g=l.measure(h),y=a.x(n,c,r),m=a.y(n,c,r),v=a.width(n,c,r),x=a.height(n,c,r);if(g.height<=x&&g.width<=v){var b=(v-g.width)/2;m+=(x-g.height)/2;var E={min:y+=b,max:y+g.width},w={min:m,max:m+g.height};if(E.min<p||E.max>f||w.min<d||w.max>_)return;if(o._overlayLabel(E,w,c,i,t))return;var A=a.fill(n,c,r),M=1.6*e.Utils.Color.contrast("white",A)<e.Utils.Color.contrast("black",A),C=s.append("g").attr("transform","translate("+y+","+m+")"),S=M?"dark-label":"light-label";C.classed(S,!0),u.write(h,g.width,g.height,{selection:C,xAlign:"center",yAlign:"center",textRotation:0})}}))},o.prototype._overlayLabel=function(t,n,r,i,o){for(var a=this._generateAttrToProjector(),s=this.datasets(),l=i;l<s.length;l++)for(var u=s[l],c=o.get(u),h=l===i?r+1:0;h<c.length;h++)if(e.Utils.DOM.intersectsBBox(t,n,this._entityBBox(c[h],h,u,a)))return!0;return!1},o._X2_KEY="x2",o._Y2_KEY="y2",o}(e.XYPlot),i.Rectangle=o}(e||(e={})),function(t){var e,n;e=t.Plots||(t.Plots={}),n=function(n){function i(){n.call(this),this.addClass("scatter-plot");var r=new t.Animators.Easing;r.startDelay(5),r.stepDuration(250),r.maxTotalDuration(t.Plot._ANIMATION_MAX_DURATION),this.animator(e.Animator.MAIN,r),this.attr("opacity",.6),this.attr("fill",(new t.Scales.Color).range()[0]),this.size(6);var i=t.SymbolFactories.circle();this.symbol((function(){return i}))}return r(i,n),i.prototype._createDrawer=function(e){return new t.Drawers.Symbol(e)},i.prototype.size=function(t,e){return null==t?this._propertyBindings.get(i._SIZE_KEY):(this._bindProperty(i._SIZE_KEY,t,e),this.render(),this)},i.prototype.symbol=function(t){return null==t?this._propertyBindings.get(i._SYMBOL_KEY):(this._propertyBindings.set(i._SYMBOL_KEY,{accessor:t}),this.render(),this)},i.prototype._generateDrawSteps=function(){var n=[];if(this._animateOnNextRender()){var r=this._generateAttrToProjector(),i=t.Plot._scaledAccessor(this.symbol());r.d=function(t,e,n){return i(t,e,n)(0)},n.push({attrToProjector:r,animator:this._getAnimator(e.Animator.RESET)})}return n.push({attrToProjector:this._generateAttrToProjector(),animator:this._getAnimator(e.Animator.MAIN)}),n},i.prototype._entityVisibleOnPlot=function(e,n,r,i){var o={min:0,max:this.width()},a={min:0,max:this.height()},s=t.Plot._scaledAccessor(this.size())(n,r,i),l={x:e.x-s,y:e.y-s,width:s,height:s};return t.Utils.DOM.intersectsBBox(o,a,l)},i.prototype._propertyProjectors=function(){var e=n.prototype._propertyProjectors.call(this),r=t.Plot._scaledAccessor(this.x()),i=t.Plot._scaledAccessor(this.y()),o=t.Plot._scaledAccessor(this.size());e.transform=function(t,e,n){return"translate("+r(t,e,n)+","+i(t,e,n)+")"};var a=t.Plot._scaledAccessor(this.symbol());return e.d=function(t,e,n){return a(t,e,n)(o(t,e,n))},e},i.prototype.entitiesIn=function(e,n){var r,i;if(null==n){var o=e;r={min:o.topLeft.x,max:o.bottomRight.x},i={min:o.topLeft.y,max:o.bottomRight.y}}else r=e,i=n;var a=t.Plot._scaledAccessor(this.x()),s=t.Plot._scaledAccessor(this.y());return this.entities().filter((function(t){var e=t.datum,n=t.index,o=t.dataset,l=a(e,n,o),u=s(e,n,o);return r.min<=l&&l<=r.max&&i.min<=u&&u<=i.max}))},i.prototype.entitiesAt=function(e){var n=t.Plot._scaledAccessor(this.x()),r=t.Plot._scaledAccessor(this.y()),i=t.Plot._scaledAccessor(this.size());return this.entities().filter((function(t){var o=t.datum,a=t.index,s=t.dataset,l=n(o,a,s),u=r(o,a,s),c=i(o,a,s);return l-c/2<=e.x&&e.x<=l+c/2&&u-c/2<=e.y&&e.y<=u+c/2}))},i._SIZE_KEY="size",i._SYMBOL_KEY="symbol",i}(t.XYPlot),e.Scatter=n}(e||(e={})),function(e){var i,o;i=e.Plots||(e.Plots={}),o=function(o){function a(t){var n=this;if(void 0===t&&(t=a.ORIENTATION_VERTICAL),o.call(this),this._labelFormatter=e.Formatters.identity(),this._labelsEnabled=!1,this._hideBarsIfAnyAreTooWide=!0,this._barPixelWidth=0,this.addClass("bar-plot"),t!==a.ORIENTATION_VERTICAL&&t!==a.ORIENTATION_HORIZONTAL)throw new Error(t+" is not a valid orientation for Plots.Bar");this._isVertical=t===a.ORIENTATION_VERTICAL,this.animator("baseline",new e.Animators.Null),this.attr("fill",(new e.Scales.Color).range()[0]),this.attr("width",(function(){return n._barPixelWidth})),this._labelConfig=new e.Utils.Map,this._baselineValueProvider=function(){return[n.baselineValue()]},this._updateBarPixelWidthCallback=function(){return n._updateBarPixelWidth()}}return r(a,o),a.prototype.x=function(t,e){return null==t?o.prototype.x.call(this):(null==e?o.prototype.x.call(this,t):(o.prototype.x.call(this,t,e),e.onUpdate(this._updateBarPixelWidthCallback)),this._updateValueScale(),this)},a.prototype.y=function(t,e){return null==t?o.prototype.y.call(this):(null==e?o.prototype.y.call(this,t):(o.prototype.y.call(this,t,e),e.onUpdate(this._updateBarPixelWidthCallback)),this._updateValueScale(),this)},a.prototype.orientation=function(){return this._isVertical?a.ORIENTATION_VERTICAL:a.ORIENTATION_HORIZONTAL},a.prototype.render=function(){return this._updateBarPixelWidth(),this._updateExtents(),o.prototype.render.call(this),this},a.prototype._createDrawer=function(t){return new e.Drawers.Rectangle(t)},a.prototype._setup=function(){o.prototype._setup.call(this),this._baseline=this._renderArea.append("line").classed("baseline",!0)},a.prototype.baselineValue=function(t){if(null==t){if(null!=this._baselineValue)return this._baselineValue;if(!this._projectorsReady())return 0;var n=this._isVertical?this.y().scale:this.x().scale;return n&&n instanceof e.Scales.Time?new Date(0):0}return this._baselineValue=t,this._updateValueScale(),this.render(),this},a.prototype.addDataset=function(t){return o.prototype.addDataset.call(this,t),this._updateBarPixelWidth(),this},a.prototype._addDataset=function(t){return t.onUpdate(this._updateBarPixelWidthCallback),o.prototype._addDataset.call(this,t),this},a.prototype.removeDataset=function(t){return t.offUpdate(this._updateBarPixelWidthCallback),o.prototype.removeDataset.call(this,t),this._updateBarPixelWidth(),this},a.prototype._removeDataset=function(t){return t.offUpdate(this._updateBarPixelWidthCallback),o.prototype._removeDataset.call(this,t),this},a.prototype.datasets=function(t){return null==t?o.prototype.datasets.call(this):(o.prototype.datasets.call(this,t),this._updateBarPixelWidth(),this)},a.prototype.labelsEnabled=function(t){return null==t?this._labelsEnabled:(this._labelsEnabled=t,this.render(),this)},a.prototype.labelFormatter=function(t){return null==t?this._labelFormatter:(this._labelFormatter=t,this.render(),this)},a.prototype._createNodesForDataset=function(t){var e=o.prototype._createNodesForDataset.call(this,t);e.renderArea().classed(a._BAR_AREA_CLASS,!0);var r=this._renderArea.append("g").classed(a._LABEL_AREA_CLASS,!0),i=new n.Measurers.CacheCharacterMeasurer(r),s=new n.Writers.Writer(i);return this._labelConfig.set(t,{labelArea:r,measurer:i,writer:s}),e},a.prototype._removeDatasetNodes=function(t){o.prototype._removeDatasetNodes.call(this,t);var e=this._labelConfig.get(t);null!=e&&(e.labelArea.remove(),this._labelConfig.delete(t))},a.prototype.entityNearest=function(t){var n,r=this,i=1/0,o=1/0,a=this._isVertical?t.x:t.y,s=this._isVertical?t.y:t.x;return this.entities().forEach((function(l){if(r._entityVisibleOnPlot(l.position,l.datum,l.index,l.dataset)){var u=0,c=0,h=l.position,p=e.Utils.DOM.elementBBox(l.selection);if(!e.Utils.DOM.intersectsBBox(t.x,t.y,p,.5)){var f=r._isVertical?h.x:h.y;u=Math.abs(a-f);var d=r._isVertical?p.y:p.x,_=d+(r._isVertical?p.height:p.width);if(s>=d-.5&&s<=_+.5)c=0;else{var g=r._isVertical?h.y:h.x;c=Math.abs(s-g)}}(u<i||u===i&&c<o)&&(n=l,i=u,o=c)}})),n},a.prototype._entityVisibleOnPlot=function(t,n,r,i){var o={min:0,max:this.width()},a={min:0,max:this.height()},s=this._generateAttrToProjector(),l={x:s.x(n,r,i),y:s.y(n,r,i),width:s.width(n,r,i),height:s.height(n,r,i)};return e.Utils.DOM.intersectsBBox(o,a,l)},a.prototype.entitiesAt=function(t){return this._entitiesIntersecting(t.x,t.y)},a.prototype.entitiesIn=function(t,e){var n,r;if(null==e){var i=t;n={min:i.topLeft.x,max:i.bottomRight.x},r={min:i.topLeft.y,max:i.bottomRight.y}}else n=t,r=e;return this._entitiesIntersecting(n,r)},a.prototype._entitiesIntersecting=function(t,n){var r=[];return this.entities().forEach((function(i){e.Utils.DOM.intersectsBBox(t,n,e.Utils.DOM.elementBBox(i.selection))&&r.push(i)})),r},a.prototype._updateValueScale=function(){if(this._projectorsReady()){var t=this._isVertical?this.y().scale:this.x().scale;if(t instanceof e.QuantitativeScale){var n=t;n.addPaddingExceptionsProvider(this._baselineValueProvider),n.addIncludedValuesProvider(this._baselineValueProvider)}}},a.prototype._additionalPaint=function(t){var n=this,r=(this._isVertical?this.y().scale:this.x().scale).scale(this.baselineValue()),i={x1:this._isVertical?0:r,y1:this._isVertical?r:0,x2:this._isVertical?this.width():r,y2:this._isVertical?r:this.height()};this._getAnimator("baseline").animate(this._baseline,i),this.datasets().forEach((function(t){return n._labelConfig.get(t).labelArea.selectAll("g").remove()})),this._labelsEnabled&&e.Utils.Window.setTimeout((function(){return n._drawLabels()}),t)},a.prototype._extentsForProperty=function(n){var r,i=this,a=o.prototype._extentsForProperty.call(this,n);if("x"===n&&this._isVertical)r=this.x();else{if("y"!==n||this._isVertical)return a;r=this.y()}if(!(r&&r.scale&&r.scale instanceof e.QuantitativeScale))return a;var s=r.scale;return a.map((function(e){return t.extent([s.invert(s.scale(e[0])-i._barPixelWidth/2),s.invert(s.scale(e[0])+i._barPixelWidth/2),s.invert(s.scale(e[1])-i._barPixelWidth/2),s.invert(s.scale(e[1])+i._barPixelWidth/2)])}))},a.prototype._drawLabels=function(){var t=this,e=this._getDataToDraw(),n=!1;this.datasets().forEach((function(r){return n=n||t._drawLabel(e.get(r),r)})),this._hideBarsIfAnyAreTooWide&&n&&this.datasets().forEach((function(e){return t._labelConfig.get(e).labelArea.selectAll("g").remove()}))},a.prototype._drawLabel=function(t,n){var r=this,i=this._generateAttrToProjector(),o=this._labelConfig.get(n),s=o.labelArea,l=o.measurer,u=o.writer;return t.map((function(t,o){var c,h=r._isVertical?r.y().accessor:r.x().accessor,p=h(t,o,n),f=r._isVertical?r.y().scale:r.x().scale,d=null!=f?f.scale(p):p,_=null!=f?f.scale(r.baselineValue()):r.baselineValue(),g=i.width(t,o,n),y=i.height(t,o,n),m=r._labelFormatter(h(t,o,n)),v=l.measure(m),x="center",b="center",E={x:i.x(t,o,n),y:i.y(t,o,n)},w=g,A=y,M={x:E.x,y:E.y};if(r._isVertical){M.x+=w/2-v.width/2;var C=i.y(t,o,n),S=y;C+y>r.height()?S=r.height()-C:C<0&&(S=C+y);var k=a._LABEL_VERTICAL_PADDING;(c=v.height+2*k<=S)?d<_?(E.y+=k,b="top",M.y+=k):(E.y-=k,b="bottom",M.y+=A-k-v.height):(A=y+k+v.height,d<=_?(E.y-=k+v.height,b="top",M.y-=k+v.height):(b="bottom",M.y+=y+k))}else{M.y+=A/2-v.height/2;var T=i.x(t,o,n),D=g;T+g>r.width()?D=r.width()-T:T<0&&(D=T+g),k=a._LABEL_HORIZONTAL_PADDING,(c=v.width+2*k<=D)?d<_?(E.x+=k,x="left",M.x+=k):(E.x-=k,x="right",M.x+=w-k-v.width):(w=g+k+v.width,d<_?(E.x-=k+v.width,x="left",M.x-=k+v.width):(x="right",M.x+=g+k))}var L=s.append("g").attr("transform","translate("+E.x+", "+E.y+")");if(c){L.classed("on-bar-label",!0);var P=i.fill(t,o,n),N=1.6*e.Utils.Color.contrast("white",P)<e.Utils.Color.contrast("black",P);L.classed(N?"dark-label":"light-label",!0)}else L.classed("off-bar-label",!0);var I=M.x<0||M.y<0||M.x+v.width>r.width()||M.y+v.height>r.height();L.style("visibility",I?"hidden":"inherit");var R={selection:L,xAlign:x,yAlign:b,textRotation:0};return u.write(m,w,A,R),r._isVertical?g<v.width:y<v.height})).some((function(t){return t}))},a.prototype._generateDrawSteps=function(){var t=[];if(this._animateOnNextRender()){var e=this._generateAttrToProjector(),n=(this._isVertical?this.y().scale:this.x().scale).scale(this.baselineValue()),r=this._isVertical?"y":"x",o=this._isVertical?"height":"width";e[r]=function(){return n},e[o]=function(){return 0},t.push({attrToProjector:e,animator:this._getAnimator(i.Animator.RESET)})}return t.push({attrToProjector:this._generateAttrToProjector(),animator:this._getAnimator(i.Animator.MAIN)}),t},a.prototype._generateAttrToProjector=function(){var t=o.prototype._generateAttrToProjector.call(this),n=this._isVertical?this.y().scale:this.x().scale,r=this._isVertical?"y":"x",i=this._isVertical?"x":"y",a=n.scale(this.baselineValue()),s=this._isVertical?e.Plot._scaledAccessor(this.x()):e.Plot._scaledAccessor(this.y()),l=t.width,u=this._isVertical?e.Plot._scaledAccessor(this.y()):e.Plot._scaledAccessor(this.x()),c=function(t,e,n){return Math.abs(a-u(t,e,n))};return t.width=this._isVertical?l:c,t.height=this._isVertical?c:l,t[i]=function(t,e,n){return s(t,e,n)-l(t,e,n)/2},t[r]=function(t,e,n){var r=u(t,e,n);return r>a?a:r},t},a.prototype._getBarPixelWidth=function(){if(!this._projectorsReady())return 0;var n,r=this._isVertical?this.x().scale:this.y().scale;if(r instanceof e.Scales.Category)n=r.rangeBand();else{var i=this._isVertical?this.x().accessor:this.y().accessor,o=t.set(e.Utils.Array.flatten(this.datasets().map((function(t){return t.data().map((function(e,n){return i(e,n,t)})).filter((function(t){return null!=t})).map((function(t){return t.valueOf()}))})))).values().map((function(t){return+t}));o.sort((function(t,e){return t-e}));var s=o.map((function(t){return r.scale(t)})),l=t.pairs(s),u=this._isVertical?this.width():this.height();n=e.Utils.Math.min(l,(function(t,e){return Math.abs(t[1]-t[0])}),u*a._SINGLE_BAR_DIMENSION_RATIO),n*=a._BAR_WIDTH_RATIO}return n},a.prototype._updateBarPixelWidth=function(){this._barPixelWidth=this._getBarPixelWidth()},a.prototype.entities=function(t){return void 0===t&&(t=this.datasets()),this._projectorsReady()?o.prototype.entities.call(this,t):[]},a.prototype._pixelPoint=function(t,n,r){var i,o,a=this._generateAttrToProjector(),s=a.x(t,n,r),l=a.y(t,n,r),u=a.width(t,n,r),c=a.height(t,n,r),h=(this._isVertical?e.Plot._scaledAccessor(this.y()):e.Plot._scaledAccessor(this.x()))(t,n,r),p=(this._isVertical?this.y().scale:this.x().scale).scale(this.baselineValue());return this._isVertical?(i=s+u/2,o=h<=p?l:l+c):(i=h>=p?s+u:s,o=l+c/2),{x:i,y:o}},a.prototype._uninstallScaleForKey=function(t,e){t.offUpdate(this._updateBarPixelWidthCallback),o.prototype._uninstallScaleForKey.call(this,t,e)},a.prototype._getDataToDraw=function(){var t=new e.Utils.Map,n=this._generateAttrToProjector();return this.datasets().forEach((function(r){var i=r.data().filter((function(t,i){return e.Utils.Math.isValidNumber(n.x(t,i,r))&&e.Utils.Math.isValidNumber(n.y(t,i,r))&&e.Utils.Math.isValidNumber(n.width(t,i,r))&&e.Utils.Math.isValidNumber(n.height(t,i,r))}));t.set(r,i)})),t},a.ORIENTATION_VERTICAL="vertical",a.ORIENTATION_HORIZONTAL="horizontal",a._BAR_WIDTH_RATIO=.95,a._SINGLE_BAR_DIMENSION_RATIO=.4,a._BAR_AREA_CLASS="bar-area",a._LABEL_AREA_CLASS="bar-label-text-area",a._LABEL_VERTICAL_PADDING=5,a._LABEL_HORIZONTAL_PADDING=5,a}(e.XYPlot),i.Bar=o}(e||(e={})),function(e){var n,i;n=e.Plots||(e.Plots={}),i=function(i){function o(){i.call(this),this._interpolator="linear",this._autorangeSmooth=!1,this._croppedRenderingEnabled=!0,this._downsamplingEnabled=!1,this.addClass("line-plot");var t=new e.Animators.Easing;t.stepDuration(e.Plot._ANIMATION_MAX_DURATION),t.easingMode("exp-in-out"),t.maxTotalDuration(e.Plot._ANIMATION_MAX_DURATION),this.animator(n.Animator.MAIN,t),this.attr("stroke",(new e.Scales.Color).range()[0]),this.attr("stroke-width","2px")}return r(o,i),o.prototype.x=function(t,e){return null==t?i.prototype.x.call(this):(null==e?i.prototype.x.call(this,t):i.prototype.x.call(this,t,e),this._setScaleSnapping(),this)},o.prototype.y=function(t,e){return null==t?i.prototype.y.call(this):(i.prototype.y.call(this,t,e),this._setScaleSnapping(),this)},o.prototype.autorangeMode=function(t){return null==t?i.prototype.autorangeMode.call(this):(i.prototype.autorangeMode.call(this,t),this._setScaleSnapping(),this)},o.prototype.autorangeSmooth=function(t){return null==t?this._autorangeSmooth:(this._autorangeSmooth=t,this._setScaleSnapping(),this)},o.prototype._setScaleSnapping=function(){"x"===this.autorangeMode()&&this.x()&&this.x().scale&&this.x().scale instanceof e.QuantitativeScale&&this.x().scale.snappingDomainEnabled(!this.autorangeSmooth()),"y"===this.autorangeMode()&&this.y()&&this.y().scale&&this.y().scale instanceof e.QuantitativeScale&&this.y().scale.snappingDomainEnabled(!this.autorangeSmooth())},o.prototype.interpolator=function(t){return null==t?this._interpolator:(this._interpolator=t,this.render(),this)},o.prototype.downsamplingEnabled=function(t){return null==t?this._downsamplingEnabled:(this._downsamplingEnabled=t,this)},o.prototype.croppedRenderingEnabled=function(t){return null==t?this._croppedRenderingEnabled:(this._croppedRenderingEnabled=t,this.render(),this)},o.prototype._createDrawer=function(t){return new e.Drawers.Line(t)},o.prototype._extentsForProperty=function(e){var n=i.prototype._extentsForProperty.call(this,e);if(!this._autorangeSmooth)return n;if(this.autorangeMode()!==e)return n;if("x"!==this.autorangeMode()&&"y"!==this.autorangeMode())return n;var r,o=this._getEdgeIntersectionPoints();return r="y"===this.autorangeMode()?o.left.concat(o.right).map((function(t){return t.y})):o.top.concat(o.bottom).map((function(t){return t.x})),n.map((function(e){return t.extent(t.merge([e,r]))}))},o.prototype._getEdgeIntersectionPoints=function(){var t=this;if(!(this.y().scale instanceof e.QuantitativeScale&&this.x().scale instanceof e.QuantitativeScale))return{left:[],right:[],top:[],bottom:[]};var n=this.y().scale,r=this.x().scale,i={left:[],right:[],top:[],bottom:[]},o=r.scale(r.domain()[0]),a=r.scale(r.domain()[1]),s=n.scale(n.domain()[0]),l=n.scale(n.domain()[1]);return this.datasets().forEach((function(e){for(var u,c,h,p,f,d,_=e.data(),g=1;g<_.length;g++)h=f||r.scale(t.x().accessor(_[g-1],g-1,e)),p=d||n.scale(t.y().accessor(_[g-1],g-1,e)),f=r.scale(t.x().accessor(_[g],g,e)),d=n.scale(t.y().accessor(_[g],g,e)),h<o==o<=f&&(c=(u=o-h)*(d-p)/(f-h),i.left.push({x:o,y:n.invert(p+c)})),h<a==a<=f&&(c=(u=a-h)*(d-p)/(f-h),i.right.push({x:a,y:n.invert(p+c)})),p<l==l<=d&&(u=(c=l-p)*(f-h)/(d-p),i.top.push({x:r.invert(h+u),y:l})),p<s==s<=d&&(u=(c=s-p)*(f-h)/(d-p),i.bottom.push({x:r.invert(h+u),y:s}))})),i},o.prototype._getResetYFunction=function(){var t=this.y().scale.domain(),e=Math.max(t[0],t[1]),n=Math.min(t[0],t[1]),r=e<0&&e||n>0&&n||0,i=this.y().scale.scale(r);return function(t,e,n){return i}},o.prototype._generateDrawSteps=function(){var t=[];if(this._animateOnNextRender()){var r=this._generateAttrToProjector();r.d=this._constructLineProjector(e.Plot._scaledAccessor(this.x()),this._getResetYFunction()),t.push({attrToProjector:r,animator:this._getAnimator(n.Animator.RESET)})}return t.push({attrToProjector:this._generateAttrToProjector(),animator:this._getAnimator(n.Animator.MAIN)}),t},o.prototype._generateAttrToProjector=function(){var t=i.prototype._generateAttrToProjector.call(this);return Object.keys(t).forEach((function(e){if("d"!==e){var n=t[e];t[e]=function(t,e,r){return t.length>0?n(t[0],e,r):null}}})),t},o.prototype.entitiesAt=function(t){var e=this.entityNearestByXThenY(t);return null!=e?[e]:[]},o.prototype.entityNearestByXThenY=function(t){var e,n=this,r=1/0,i=1/0;return this.entities().forEach((function(o){if(n._entityVisibleOnPlot(o.position,o.datum,o.index,o.dataset)){var a=Math.abs(t.x-o.position.x),s=Math.abs(t.y-o.position.y);(a<r||a===r&&s<i)&&(e=o,r=a,i=s)}})),e},o.prototype._propertyProjectors=function(){var t=i.prototype._propertyProjectors.call(this);return t.d=this._constructLineProjector(e.Plot._scaledAccessor(this.x()),e.Plot._scaledAccessor(this.y())),t},o.prototype._constructLineProjector=function(n,r){var i=this;return function(o,a,s){return t.svg.line().x((function(t,e){return n(t,e,s)})).y((function(t,e){return r(t,e,s)})).interpolate(i.interpolator()).defined((function(t,n){return function(t,n,r){var o=e.Plot._scaledAccessor(i.x())(t,n,r),a=e.Plot._scaledAccessor(i.y())(t,n,r);return null!=o&&!e.Utils.Math.isNaN(o)&&null!=a&&!e.Utils.Math.isNaN(a)}(t,n,s)}))(o)}},o.prototype._getDataToDraw=function(){var t=this,n=new e.Utils.Map;return this.datasets().forEach((function(e){var r=e.data();if(t._croppedRenderingEnabled||t._downsamplingEnabled){var i=r.map((function(t,e){return e}));t._croppedRenderingEnabled&&(i=t._filterCroppedRendering(e,i)),t._downsamplingEnabled&&(i=t._filterDownsampling(e,i)),n.set(e,[i.map((function(t,e){return r[t]}))])}else n.set(e,[r])})),n},o.prototype._filterCroppedRendering=function(t,n){for(var r=this,i=e.Plot._scaledAccessor(this.x()),o=e.Plot._scaledAccessor(this.y()),a=t.data(),s=[],l=function(t,n){return e.Utils.Math.inRange(t,0,r.width())&&e.Utils.Math.inRange(n,0,r.height())},u=0;u<n.length;u++){var c=l(i(a[n[u]],n[u],t),o(a[n[u]],n[u],t));if(!c&&null!=n[u-1]&&null!=a[n[u-1]]){var h=i(a[n[u-1]],n[u-1],t),p=o(a[n[u-1]],n[u-1],t);c=c||l(h,p)}if(!c&&null!=n[u+1]&&null!=a[n[u+1]]){var f=i(a[n[u+1]],n[u+1],t),d=o(a[n[u+1]],n[u+1],t);c=c||l(f,d)}c&&s.push(n[u])}return s},o.prototype._filterDownsampling=function(t,n){if(0===n.length)return[];for(var r=t.data(),i=e.Plot._scaledAccessor(this.x()),o=e.Plot._scaledAccessor(this.y()),a=[n[0]],s=function(e,a){var s=i(r[n[e]],n[e],t),l=o(r[n[e]],n[e],t),u=i(r[n[e+1]],n[e+1],t),c=o(r[n[e+1]],n[e+1],t);if(a===1/0)return Math.floor(s)===Math.floor(u);var h=l+(u-s)*a;return Math.floor(c)===Math.floor(h)},l=0;l<n.length-1;){for(var u=n[l],c=i(r[n[l]],n[l],t),h=o(r[n[l]],n[l],t),p=i(r[n[l+1]],n[l+1],t),f=o(r[n[l+1]],n[l+1],t),d=Math.floor(c)===Math.floor(p)?1/0:(f-h)/(p-c),_=n[l],g=d===1/0?h:c,y=_,m=g,v=!0;l<n.length-1&&(v||s(l,d));){l++,v=!1;var x=d===1/0?o(r[n[l]],n[l],t):i(r[n[l]],n[l],t);x>m&&(m=x,y=n[l]),x<g&&(g=x,_=n[l])}var b=n[l];_!==u&&a.push(_),y!==_&&y!==u&&a.push(y),b!==u&&b!==_&&b!==y&&a.push(b)}return a},o}(e.XYPlot),n.Line=i}(e||(e={})),function(e){var n,i;n=e.Plots||(e.Plots={}),i=function(i){function o(){i.call(this),this.addClass("area-plot"),this.y0(0),this.attr("fill-opacity",.25),this.attr("fill",(new e.Scales.Color).range()[0]),this._lineDrawers=new e.Utils.Map}return r(o,i),o.prototype._setup=function(){var t=this;i.prototype._setup.call(this),this._lineDrawers.forEach((function(e){return e.renderArea(t._renderArea.append("g"))}))},o.prototype.y=function(t,e){if(null==t)return i.prototype.y.call(this);if(null==e?i.prototype.y.call(this,t):i.prototype.y.call(this,t,e),null!=e){var n=this.y0().accessor;null!=n&&this._bindProperty(o._Y0_KEY,n,e),this._updateYScale()}return this},o.prototype.y0=function(t){if(null==t)return this._propertyBindings.get(o._Y0_KEY);var e=this.y(),n=e&&e.scale;return this._bindProperty(o._Y0_KEY,t,n),this._updateYScale(),this.render(),this},o.prototype._onDatasetUpdate=function(){i.prototype._onDatasetUpdate.call(this),this._updateYScale()},o.prototype.addDataset=function(t){return i.prototype.addDataset.call(this,t),this},o.prototype._addDataset=function(t){var n=new e.Drawers.Line(t);return this._isSetup&&n.renderArea(this._renderArea.append("g")),this._lineDrawers.set(t,n),i.prototype._addDataset.call(this,t),this},o.prototype._removeDatasetNodes=function(t){i.prototype._removeDatasetNodes.call(this,t),this._lineDrawers.get(t).remove()},o.prototype._additionalPaint=function(){var t=this,e=this._generateLineDrawSteps(),n=this._getDataToDraw();this.datasets().forEach((function(r){return t._lineDrawers.get(r).draw(n.get(r),e)}))},o.prototype._generateLineDrawSteps=function(){var t=[];if(this._animateOnNextRender()){var r=this._generateLineAttrToProjector();r.d=this._constructLineProjector(e.Plot._scaledAccessor(this.x()),this._getResetYFunction()),t.push({attrToProjector:r,animator:this._getAnimator(n.Animator.RESET)})}return t.push({attrToProjector:this._generateLineAttrToProjector(),animator:this._getAnimator(n.Animator.MAIN)}),t},o.prototype._generateLineAttrToProjector=function(){var t=this._generateAttrToProjector();return t.d=this._constructLineProjector(e.Plot._scaledAccessor(this.x()),e.Plot._scaledAccessor(this.y())),t},o.prototype._createDrawer=function(t){return new e.Drawers.Area(t)},o.prototype._generateDrawSteps=function(){var t=[];if(this._animateOnNextRender()){var r=this._generateAttrToProjector();r.d=this._constructAreaProjector(e.Plot._scaledAccessor(this.x()),this._getResetYFunction(),e.Plot._scaledAccessor(this.y0())),t.push({attrToProjector:r,animator:this._getAnimator(n.Animator.RESET)})}return t.push({attrToProjector:this._generateAttrToProjector(),animator:this._getAnimator(n.Animator.MAIN)}),t},o.prototype._updateYScale=function(){var t=this._propertyExtents.get("y0"),n=e.Utils.Array.flatten(t),r=e.Utils.Array.uniq(n),i=1===r.length?r[0]:null,o=this.y(),a=o&&o.scale;null!=a&&(null!=this._constantBaselineValueProvider&&(a.removePaddingExceptionsProvider(this._constantBaselineValueProvider),this._constantBaselineValueProvider=null),null!=i&&(this._constantBaselineValueProvider=function(){return[i]},a.addPaddingExceptionsProvider(this._constantBaselineValueProvider)))},o.prototype._getResetYFunction=function(){return e.Plot._scaledAccessor(this.y0())},o.prototype._propertyProjectors=function(){var t=i.prototype._propertyProjectors.call(this);return t.d=this._constructAreaProjector(e.Plot._scaledAccessor(this.x()),e.Plot._scaledAccessor(this.y()),e.Plot._scaledAccessor(this.y0())),t},o.prototype.selections=function(e){var n=this;void 0===e&&(e=this.datasets());var r=i.prototype.selections.call(this,e)[0];return e.map((function(t){return n._lineDrawers.get(t)})).filter((function(t){return null!=t})).forEach((function(t,e){return r.push(t.selectionForIndex(e).node())})),t.selectAll(r)},o.prototype._constructAreaProjector=function(n,r,i){var o=this;return function(a,s,l){return t.svg.area().x((function(t,e){return n(t,e,l)})).y1((function(t,e){return r(t,e,l)})).y0((function(t,e){return i(t,e,l)})).interpolate(o.interpolator()).defined((function(t,n){return function(t,n,r){var i=e.Plot._scaledAccessor(o.x())(t,n,r),a=e.Plot._scaledAccessor(o.y())(t,n,r);return e.Utils.Math.isValidNumber(i)&&e.Utils.Math.isValidNumber(a)}(t,n,l)}))(a)}},o._Y0_KEY="y0",o}(n.Line),n.Area=i}(e||(e={})),function(t){var e,n;e=t.Plots||(t.Plots={}),n=function(n){function i(r){void 0===r&&(r=e.Bar.ORIENTATION_VERTICAL),n.call(this,r),this._clusterOffsets=new t.Utils.Map}return r(i,n),i.prototype._generateAttrToProjector=function(){var t=this,e=n.prototype._generateAttrToProjector.call(this),r=this._makeInnerScale(),i=function(t,e){return r.rangeBand()};e.width=this._isVertical?i:e.width,e.height=this._isVertical?e.height:i;var o=e.x,a=e.y;return e.x=this._isVertical?function(e,n,r){return o(e,n,r)+t._clusterOffsets.get(r)}:function(t,e,n){return o(t,e,n)},e.y=this._isVertical?function(t,e,n){return a(t,e,n)}:function(e,n,r){return a(e,n,r)+t._clusterOffsets.get(r)},e},i.prototype._updateClusterPosition=function(){var t=this,e=this._makeInnerScale();this.datasets().forEach((function(n,r){return t._clusterOffsets.set(n,e.scale(String(r))-e.rangeBand()/2)}))},i.prototype._makeInnerScale=function(){var e=new t.Scales.Category;e.domain(this.datasets().map((function(t,e){return String(e)})));var n=t.Plot._scaledAccessor(this.attr("width"));return e.range([0,n(null,0,null)]),e},i.prototype._getDataToDraw=function(){return this._updateClusterPosition(),n.prototype._getDataToDraw.call(this)},i}(e.Bar),e.ClusteredBar=n}(e||(e={})),function(e){var n,i;n=e.Plots||(e.Plots={}),i=function(n){function i(){var t=this;n.call(this),this._baselineValue=0,this.addClass("stacked-area-plot"),this.attr("fill-opacity",1),this._stackingResult=new e.Utils.Map,this._stackedExtent=[],this._baselineValueProvider=function(){return[t._baselineValue]},this.croppedRenderingEnabled(!1)}return r(i,n),i.prototype.croppedRenderingEnabled=function(t){return null==t?n.prototype.croppedRenderingEnabled.call(this):!0===t?(e.Utils.Window.warn("Warning: Stacked Area Plot does not support cropped rendering."),this):n.prototype.croppedRenderingEnabled.call(this,t)},i.prototype._getAnimator=function(t){return new e.Animators.Null},i.prototype._setup=function(){n.prototype._setup.call(this),this._baseline=this._renderArea.append("line").classed("baseline",!0)},i.prototype.x=function(t,e){return null==t?n.prototype.x.call(this):(null==e?n.prototype.x.call(this,t):n.prototype.x.call(this,t,e),this._updateStackExtentsAndOffsets(),this)},i.prototype.y=function(t,e){return null==t?n.prototype.y.call(this):(null==e?n.prototype.y.call(this,t):n.prototype.y.call(this,t,e),this._updateStackExtentsAndOffsets(),this)},i.prototype.downsamplingEnabled=function(t){return null==t?n.prototype.downsamplingEnabled.call(this):(e.Utils.Window.warn("Warning: Stacked Area Plot does not support downsampling"),this)},i.prototype._additionalPaint=function(){var t=this.y().scale.scale(this._baselineValue),e={x1:0,y1:t,x2:this.width(),y2:t};this._getAnimator("baseline").animate(this._baseline,e)},i.prototype._updateYScale=function(){var t=this.y(),e=t&&t.scale;null!=e&&(e.addPaddingExceptionsProvider(this._baselineValueProvider),e.addIncludedValuesProvider(this._baselineValueProvider))},i.prototype._onDatasetUpdate=function(){return this._updateStackExtentsAndOffsets(),n.prototype._onDatasetUpdate.call(this),this},i.prototype._updateExtentsForProperty=function(t){n.prototype._updateExtentsForProperty.call(this,t),"x"!==t&&"y"!==t||!this._projectorsReady()||this._updateStackExtentsAndOffsets()},i.prototype._extentsForProperty=function(t){return"y"===t?[this._stackedExtent]:n.prototype._extentsForProperty.call(this,t)},i.prototype._updateStackExtentsAndOffsets=function(){if(this._projectorsReady()){var t=this.datasets(),n=this.x().accessor,r=this.y().accessor,i=this._filterForProperty("y");this._checkSameDomain(t,n),this._stackingResult=e.Utils.Stacking.stack(t,n,r),this._stackedExtent=e.Utils.Stacking.stackedExtent(this._stackingResult,n,i)}},i.prototype._checkSameDomain=function(n,r){var o=n.map((function(e){return t.set(e.data().map((function(t,n){return r(t,n,e).toString()}))).values()})),a=i._domainKeys(n,r);o.some((function(t){return t.length!==a.length}))&&e.Utils.Window.warn("the domains across the datasets are not the same. Plot may produce unintended behavior.")},i._domainKeys=function(e,n){var r=t.set();return e.forEach((function(t){t.data().forEach((function(e,i){r.add(n(e,i,t))}))})),r.values()},i.prototype._propertyProjectors=function(){var t=this,r=n.prototype._propertyProjectors.call(this),i=this.y().accessor,o=this.x().accessor,a=function(t,n,r){return e.Utils.Stacking.normalizeKey(o(t,n,r))};return r.d=this._constructAreaProjector(e.Plot._scaledAccessor(this.x()),(function(e,n,r){return t.y().scale.scale(+i(e,n,r)+t._stackingResult.get(r).get(a(e,n,r)).offset)}),(function(e,n,r){return t.y().scale.scale(t._stackingResult.get(r).get(a(e,n,r)).offset)})),r},i.prototype._pixelPoint=function(t,r,i){var o=n.prototype._pixelPoint.call(this,t,r,i),a=this.x().accessor(t,r,i),s=this.y().accessor(t,r,i),l=this.y().scale.scale(+s+this._stackingResult.get(i).get(e.Utils.Stacking.normalizeKey(a)).offset);return{x:o.x,y:l}},i}(n.Area),n.StackedArea=i}(e||(e={})),function(t){var e,n;e=t.Plots||(t.Plots={}),n=function(n){function i(r){void 0===r&&(r=e.Bar.ORIENTATION_VERTICAL),n.call(this,r),this.addClass("stacked-bar-plot"),this._stackingResult=new t.Utils.Map,this._stackedExtent=[]}return r(i,n),i.prototype.x=function(t,e){return null==t?n.prototype.x.call(this):(null==e?n.prototype.x.call(this,t):n.prototype.x.call(this,t,e),this._updateStackExtentsAndOffsets(),this)},i.prototype.y=function(t,e){return null==t?n.prototype.y.call(this):(null==e?n.prototype.y.call(this,t):n.prototype.y.call(this,t,e),this._updateStackExtentsAndOffsets(),this)},i.prototype._generateAttrToProjector=function(){var e=this,r=n.prototype._generateAttrToProjector.call(this),i=this._isVertical?"y":"x",o=this._isVertical?"x":"y",a=this._isVertical?this.y().scale:this.x().scale,s=this._propertyBindings.get(i).accessor,l=this._propertyBindings.get(o).accessor,u=function(e,n,r){return t.Utils.Stacking.normalizeKey(l(e,n,r))},c=function(t,n,r){return a.scale(e._stackingResult.get(r).get(u(t,n,r)).offset)},h=function(t,n,r){return a.scale(+s(t,n,r)+e._stackingResult.get(r).get(u(t,n,r)).offset)},p=function(t,e,n){return Math.abs(h(t,e,n)-c(t,e,n))};r[this._isVertical?"height":"width"]=p;var f=function(t,e,n){return+s(t,e,n)<0?c(t,e,n):h(t,e,n)};return r[i]=function(t,n,r){return e._isVertical?f(t,n,r):f(t,n,r)-p(t,n,r)},r},i.prototype._onDatasetUpdate=function(){return this._updateStackExtentsAndOffsets(),n.prototype._onDatasetUpdate.call(this),this},i.prototype._updateExtentsForProperty=function(t){n.prototype._updateExtentsForProperty.call(this,t),"x"!==t&&"y"!==t||!this._projectorsReady()||this._updateStackExtentsAndOffsets()},i.prototype._extentsForProperty=function(t){return t===(this._isVertical?"y":"x")?[this._stackedExtent]:n.prototype._extentsForProperty.call(this,t)},i.prototype._updateStackExtentsAndOffsets=function(){if(this._projectorsReady()){var e=this.datasets(),n=this._isVertical?this.x().accessor:this.y().accessor,r=this._isVertical?this.y().accessor:this.x().accessor,i=this._filterForProperty(this._isVertical?"y":"x");this._stackingResult=t.Utils.Stacking.stack(e,n,r),this._stackedExtent=t.Utils.Stacking.stackedExtent(this._stackingResult,n,i)}},i}(e.Bar),e.StackedBar=n}(e||(e={})),function(t){var e,n;e=t.Plots||(t.Plots={}),n=function(e){function n(){e.call(this),this.addClass("segment-plot"),this.attr("stroke",(new t.Scales.Color).range()[0]),this.attr("stroke-width","2px")}return r(n,e),n.prototype._createDrawer=function(e){return new t.Drawers.Segment(e)},n.prototype._generateDrawSteps=function(){return[{attrToProjector:this._generateAttrToProjector(),animator:new t.Animators.Null}]},n.prototype._updateExtentsForProperty=function(t){e.prototype._updateExtentsForProperty.call(this,t),"x"===t?e.prototype._updateExtentsForProperty.call(this,"x2"):"y"===t&&e.prototype._updateExtentsForProperty.call(this,"y2")},n.prototype._filterForProperty=function(t){return"x2"===t?e.prototype._filterForProperty.call(this,"x"):"y2"===t?e.prototype._filterForProperty.call(this,"y"):e.prototype._filterForProperty.call(this,t)},n.prototype.x=function(t,r){if(null==t)return e.prototype.x.call(this);if(null==r)e.prototype.x.call(this,t);else{e.prototype.x.call(this,t,r);var i=this.x2(),o=i&&i.accessor;null!=o&&this._bindProperty(n._X2_KEY,o,r)}return this},n.prototype.x2=function(t){if(null==t)return this._propertyBindings.get(n._X2_KEY);var e=this.x(),r=e&&e.scale;return this._bindProperty(n._X2_KEY,t,r),this.render(),this},n.prototype.y=function(t,r){if(null==t)return e.prototype.y.call(this);if(null==r)e.prototype.y.call(this,t);else{e.prototype.y.call(this,t,r);var i=this.y2(),o=i&&i.accessor;null!=o&&this._bindProperty(n._Y2_KEY,o,r)}return this},n.prototype.y2=function(t){if(null==t)return this._propertyBindings.get(n._Y2_KEY);var e=this.y(),r=e&&e.scale;return this._bindProperty(n._Y2_KEY,t,r),this.render(),this},n.prototype._propertyProjectors=function(){var n=e.prototype._propertyProjectors.call(this);return n.x1=t.Plot._scaledAccessor(this.x()),n.x2=null==this.x2()?t.Plot._scaledAccessor(this.x()):t.Plot._scaledAccessor(this.x2()),n.y1=t.Plot._scaledAccessor(this.y()),n.y2=null==this.y2()?t.Plot._scaledAccessor(this.y()):t.Plot._scaledAccessor(this.y2()),n},n.prototype.entitiesAt=function(t){var e=this.entityNearest(t);return null!=e?[e]:[]},n.prototype.entitiesIn=function(t,e){var n,r;if(null==e){var i=t;n={min:i.topLeft.x,max:i.bottomRight.x},r={min:i.topLeft.y,max:i.bottomRight.y}}else n=t,r=e;return this._entitiesIntersecting(n,r)},n.prototype._entitiesIntersecting=function(t,e){var n=this,r=[],i=this._generateAttrToProjector();return this.entities().forEach((function(o){n._lineIntersectsBox(o,t,e,i)&&r.push(o)})),r},n.prototype._lineIntersectsBox=function(t,e,n,r){var i=this,o=r.x1(t.datum,t.index,t.dataset),a=r.x2(t.datum,t.index,t.dataset),s=r.y1(t.datum,t.index,t.dataset),l=r.y2(t.datum,t.index,t.dataset);if(e.min<=o&&o<=e.max&&n.min<=s&&s<=n.max||e.min<=a&&a<=e.max&&n.min<=l&&l<=n.max)return!0;var u={x:o,y:s},c={x:a,y:l},h=[{x:e.min,y:n.min},{x:e.min,y:n.max},{x:e.max,y:n.max},{x:e.max,y:n.min}];return h.filter((function(t,e){return 0!==e&&i._lineIntersectsSegment(u,c,t,h[e-1])&&i._lineIntersectsSegment(t,h[e-1],u,c)})).length>0},n.prototype._lineIntersectsSegment=function(t,e,n,r){var i=function(t,e,n){return(e.x-t.x)*(n.y-e.y)-(e.y-t.y)*(n.x-e.x)};return i(t,e,n)*i(t,e,r)<0},n._X2_KEY="x2",n._Y2_KEY="y2",n}(t.XYPlot),e.Segment=n}(e||(e={})),function(t){var e,n;e=t.Plots||(t.Plots={}),n=function(e){function n(){e.call(this),this._connectorsEnabled=!1,this.addClass("waterfall-plot")}return r(n,e),n.prototype.connectorsEnabled=function(t){return null==t?this._connectorsEnabled:(this._connectorsEnabled=t,this)},n.prototype.total=function(t){return null==t?this._propertyBindings.get(n._TOTAL_KEY):(this._bindProperty(n._TOTAL_KEY,t,null),this)},n.prototype._additionalPaint=function(e){var n=this;this._connectorArea.selectAll("line").remove(),this._connectorsEnabled&&t.Utils.Window.setTimeout((function(){return n._drawConnectors()}),e)},n.prototype._createNodesForDataset=function(t){var r=e.prototype._createNodesForDataset.call(this,t);return this._connectorArea=this._renderArea.append("g").classed(n._CONNECTOR_AREA_CLASS,!0),r},n.prototype._extentsForProperty=function(t){return"y"===t?[this._extent]:e.prototype._extentsForProperty.call(this,t)},n.prototype._generateAttrToProjector=function(){var r=this,i=e.prototype._generateAttrToProjector.call(this),o=this.y().scale,a=t.Plot._scaledAccessor(this.total());return null==this.attr("y")&&(i.y=function(t,e,n){var i=r.y().accessor(t,e,n);if(a(t,e,n))return Math.min(o.scale(i),o.scale(0));var s=r._subtotals[e];if(0===e)return i<0?o.scale(s-i):o.scale(s);var l=r._subtotals[e-1];return s>l?o.scale(s):o.scale(l)}),null==this.attr("height")&&(i.height=function(t,e,n){var i=a(t,e,n),s=r.y().accessor(t,e,n);if(i)return Math.abs(o.scale(s)-o.scale(0));var l=r._subtotals[e];if(0===e)return Math.abs(o.scale(l)-o.scale(l-s));var u=r._subtotals[e-1];return Math.abs(o.scale(l)-o.scale(u))}),i.class=function(t,e,i){var o="";return null!=r.attr("class")&&(o=r.attr("class").accessor(t,e,i)+" "),a(t,e,i)?o+n._BAR_TOTAL_CLASS:o+(r.y().accessor(t,e,i)>0?n._BAR_GROWTH_CLASS:n._BAR_DECLINE_CLASS)},i},n.prototype._onDatasetUpdate=function(){return this._updateSubtotals(),e.prototype._onDatasetUpdate.call(this),this},n.prototype._calculateSubtotalsAndExtent=function(t){var e=this,n=Number.MAX_VALUE,r=Number.MIN_VALUE,i=0,o=!1;t.data().forEach((function(a,s){var l=e.y().accessor(a,s,t),u=e.total().accessor(a,s,t);if(u&&0!==s||(i+=l),e._subtotals.push(i),i<n&&(n=i),i>r&&(r=i),u&&(l<n&&(n=l),l>r&&(r=l)),!o&&u){for(var c=l-i,h=0;h<e._subtotals.length;h++)e._subtotals[h]+=c;o=!0,i+=c,n+=c,r+=c}})),this._extent=[n,r]},n.prototype._drawConnectors=function(){for(var t=this._generateAttrToProjector(),e=this.datasets()[0],r=1;r<e.data().length;r++){var i=r-1,o=e.data()[r],a=e.data()[i],s=t.x(a,i,e),l=t.x(o,r,e)+t.width(o,r,e),u=t.y(o,r,e);(this._subtotals[r]>0&&this._subtotals[r]>this._subtotals[i]||this._subtotals[r]<0&&this._subtotals[r]>=this._subtotals[i])&&(u=t.y(o,r,e)+t.height(o,r,e)),this._connectorArea.append("line").classed(n._CONNECTOR_CLASS,!0).attr("x1",s).attr("x2",l).attr("y1",u).attr("y2",u)}},n.prototype._updateSubtotals=function(){var t=this.datasets();if(t.length>0){var e=t[t.length-1];this._subtotals=new Array,this._calculateSubtotalsAndExtent(e)}},n._BAR_DECLINE_CLASS="waterfall-decline",n._BAR_GROWTH_CLASS="waterfall-growth",n._BAR_TOTAL_CLASS="waterfall-total",n._CONNECTOR_CLASS="connector",n._CONNECTOR_AREA_CLASS="connector-area",n._TOTAL_KEY="total",n}(e.Bar),e.Waterfall=n}(e||(e={})),function(t){var e,n;e=t.Animators||(t.Animators={}),n=function(){function t(){}return t.prototype.totalTime=function(t){return 0},t.prototype.animate=function(t,e){return t.attr(e)},t}(),e.Null=n}(e||(e={})),function(t){var e,n;e=t.Animators||(t.Animators={}),n=function(){function t(){this._startDelay=t._DEFAULT_START_DELAY_MILLISECONDS,this._stepDuration=t._DEFAULT_STEP_DURATION_MILLISECONDS,this._stepDelay=t._DEFAULT_ITERATIVE_DELAY_MILLISECONDS,this._maxTotalDuration=t._DEFAULT_MAX_TOTAL_DURATION_MILLISECONDS,this._easingMode=t._DEFAULT_EASING_MODE}return t.prototype.totalTime=function(t){var e=this._getAdjustedIterativeDelay(t);return this.startDelay()+e*Math.max(t-1,0)+this.stepDuration()},t.prototype.animate=function(t,e){var n=this,r=t[0].length,i=this._getAdjustedIterativeDelay(r);return t.transition().ease(this.easingMode()).duration(this.stepDuration()).delay((function(t,e){return n.startDelay()+i*e})).attr(e)},t.prototype.startDelay=function(t){return null==t?this._startDelay:(this._startDelay=t,this)},t.prototype.stepDuration=function(t){return null==t?Math.min(this._stepDuration,this._maxTotalDuration):(this._stepDuration=t,this)},t.prototype.stepDelay=function(t){return null==t?this._stepDelay:(this._stepDelay=t,this)},t.prototype.maxTotalDuration=function(t){return null==t?this._maxTotalDuration:(this._maxTotalDuration=t,this)},t.prototype.easingMode=function(t){return null==t?this._easingMode:(this._easingMode=t,this)},t.prototype._getAdjustedIterativeDelay=function(t){var e=this.maxTotalDuration()-this.stepDuration(),n=(e=Math.max(e,0))/Math.max(t-1,1);return Math.min(this.stepDelay(),n)},t._DEFAULT_START_DELAY_MILLISECONDS=0,t._DEFAULT_STEP_DURATION_MILLISECONDS=300,t._DEFAULT_ITERATIVE_DELAY_MILLISECONDS=15,t._DEFAULT_MAX_TOTAL_DURATION_MILLISECONDS=1/0,t._DEFAULT_EASING_MODE="exp-out",t}(),e.Easing=n}(e||(e={})),function(t){var e=function(){function e(){this._eventToProcessingFunction={},this._eventNameToCallbackSet={},this._connected=!1}return e.prototype._hasNoCallbacks=function(){for(var t=Object.keys(this._eventNameToCallbackSet),e=0;e<t.length;e++)if(0!==this._eventNameToCallbackSet[t[e]].size)return!1;return!0},e.prototype._connect=function(){var t=this;this._connected||(Object.keys(this._eventToProcessingFunction).forEach((function(e){var n=t._eventToProcessingFunction[e];document.addEventListener(e,n)})),this._connected=!0)},e.prototype._disconnect=function(){var t=this;this._connected&&this._hasNoCallbacks()&&(Object.keys(this._eventToProcessingFunction).forEach((function(e){var n=t._eventToProcessingFunction[e];document.removeEventListener(e,n)})),this._connected=!1)},e.prototype._addCallbackForEvent=function(e,n){null==this._eventNameToCallbackSet[e]&&(this._eventNameToCallbackSet[e]=new t.Utils.CallbackSet),this._eventNameToCallbackSet[e].add(n),this._connect()},e.prototype._removeCallbackForEvent=function(t,e){null!=this._eventNameToCallbackSet[t]&&this._eventNameToCallbackSet[t].delete(e),this._disconnect()},e.prototype._callCallbacksForEvent=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=this._eventNameToCallbackSet[t];null!=r&&r.callCallbacks.apply(r,e)},e}();t.Dispatcher=e}(e||(e={})),function(t){var e,n;e=t.Dispatchers||(t.Dispatchers={}),n=function(e){function n(r){var i=this;e.call(this),this._translator=t.Utils.ClientToSVGTranslator.getTranslator(r),this._lastMousePosition={x:-1,y:-1};var o=function(t){return i._measureAndDispatch(t,n._MOUSEMOVE_EVENT_NAME,"page")};this._eventToProcessingFunction[n._MOUSEOVER_EVENT_NAME]=o,this._eventToProcessingFunction[n._MOUSEMOVE_EVENT_NAME]=o,this._eventToProcessingFunction[n._MOUSEOUT_EVENT_NAME]=o,this._eventToProcessingFunction[n._MOUSEDOWN_EVENT_NAME]=function(t){return i._measureAndDispatch(t,n._MOUSEDOWN_EVENT_NAME)},this._eventToProcessingFunction[n._MOUSEUP_EVENT_NAME]=function(t){return i._measureAndDispatch(t,n._MOUSEUP_EVENT_NAME,"page")},this._eventToProcessingFunction[n._WHEEL_EVENT_NAME]=function(t){return i._measureAndDispatch(t,n._WHEEL_EVENT_NAME)},this._eventToProcessingFunction[n._DBLCLICK_EVENT_NAME]=function(t){return i._measureAndDispatch(t,n._DBLCLICK_EVENT_NAME)}}return r(n,e),n.getDispatcher=function(e){var r=t.Utils.DOM.boundingSVG(e),i=r[n._DISPATCHER_KEY];return null==i&&(i=new n(r),r[n._DISPATCHER_KEY]=i),i},n.prototype.onMouseMove=function(t){return this._addCallbackForEvent(n._MOUSEMOVE_EVENT_NAME,t),this},n.prototype.offMouseMove=function(t){return this._removeCallbackForEvent(n._MOUSEMOVE_EVENT_NAME,t),this},n.prototype.onMouseDown=function(t){return this._addCallbackForEvent(n._MOUSEDOWN_EVENT_NAME,t),this},n.prototype.offMouseDown=function(t){return this._removeCallbackForEvent(n._MOUSEDOWN_EVENT_NAME,t),this},n.prototype.onMouseUp=function(t){return this._addCallbackForEvent(n._MOUSEUP_EVENT_NAME,t),this},n.prototype.offMouseUp=function(t){return this._removeCallbackForEvent(n._MOUSEUP_EVENT_NAME,t),this},n.prototype.onWheel=function(t){return this._addCallbackForEvent(n._WHEEL_EVENT_NAME,t),this},n.prototype.offWheel=function(t){return this._removeCallbackForEvent(n._WHEEL_EVENT_NAME,t),this},n.prototype.onDblClick=function(t){return this._addCallbackForEvent(n._DBLCLICK_EVENT_NAME,t),this},n.prototype.offDblClick=function(t){return this._removeCallbackForEvent(n._DBLCLICK_EVENT_NAME,t),this},n.prototype._measureAndDispatch=function(t,e,n){if(void 0===n&&(n="element"),"page"!==n&&"element"!==n)throw new Error("Invalid scope '"+n+"', must be 'element' or 'page'");if("page"===n||this.eventInsideSVG(t)){var r=this._translator.computePosition(t.clientX,t.clientY);null!=r&&(this._lastMousePosition=r,this._callCallbacksForEvent(e,this.lastMousePosition(),t))}},n.prototype.eventInsideSVG=function(t){return this._translator.insideSVG(t)},n.prototype.lastMousePosition=function(){return this._lastMousePosition},n._DISPATCHER_KEY="__Plottable_Dispatcher_Mouse",n._MOUSEOVER_EVENT_NAME="mouseover",n._MOUSEMOVE_EVENT_NAME="mousemove",n._MOUSEOUT_EVENT_NAME="mouseout",n._MOUSEDOWN_EVENT_NAME="mousedown",n._MOUSEUP_EVENT_NAME="mouseup",n._WHEEL_EVENT_NAME="wheel",n._DBLCLICK_EVENT_NAME="dblclick",n}(t.Dispatcher),e.Mouse=n}(e||(e={})),function(t){var e,n;e=t.Dispatchers||(t.Dispatchers={}),n=function(e){function n(r){var i=this;e.call(this),this._translator=t.Utils.ClientToSVGTranslator.getTranslator(r),this._eventToProcessingFunction[n._TOUCHSTART_EVENT_NAME]=function(t){return i._measureAndDispatch(t,n._TOUCHSTART_EVENT_NAME,"page")},this._eventToProcessingFunction[n._TOUCHMOVE_EVENT_NAME]=function(t){return i._measureAndDispatch(t,n._TOUCHMOVE_EVENT_NAME,"page")},this._eventToProcessingFunction[n._TOUCHEND_EVENT_NAME]=function(t){return i._measureAndDispatch(t,n._TOUCHEND_EVENT_NAME,"page")},this._eventToProcessingFunction[n._TOUCHCANCEL_EVENT_NAME]=function(t){return i._measureAndDispatch(t,n._TOUCHCANCEL_EVENT_NAME,"page")}}return r(n,e),n.getDispatcher=function(e){var r=t.Utils.DOM.boundingSVG(e),i=r[n._DISPATCHER_KEY];return null==i&&(i=new n(r),r[n._DISPATCHER_KEY]=i),i},n.prototype.onTouchStart=function(t){return this._addCallbackForEvent(n._TOUCHSTART_EVENT_NAME,t),this},n.prototype.offTouchStart=function(t){return this._removeCallbackForEvent(n._TOUCHSTART_EVENT_NAME,t),this},n.prototype.onTouchMove=function(t){return this._addCallbackForEvent(n._TOUCHMOVE_EVENT_NAME,t),this},n.prototype.offTouchMove=function(t){return this._removeCallbackForEvent(n._TOUCHMOVE_EVENT_NAME,t),this},n.prototype.onTouchEnd=function(t){return this._addCallbackForEvent(n._TOUCHEND_EVENT_NAME,t),this},n.prototype.offTouchEnd=function(t){return this._removeCallbackForEvent(n._TOUCHEND_EVENT_NAME,t),this},n.prototype.onTouchCancel=function(t){return this._addCallbackForEvent(n._TOUCHCANCEL_EVENT_NAME,t),this},n.prototype.offTouchCancel=function(t){return this._removeCallbackForEvent(n._TOUCHCANCEL_EVENT_NAME,t),this},n.prototype._measureAndDispatch=function(t,e,n){if(void 0===n&&(n="element"),"page"!==n&&"element"!==n)throw new Error("Invalid scope '"+n+"', must be 'element' or 'page'");if("element"!==n||this.eventInsideSVG(t)){for(var r=t.changedTouches,i={},o=[],a=0;a<r.length;a++){var s=r[a],l=s.identifier,u=this._translator.computePosition(s.clientX,s.clientY);null!=u&&(i[l]=u,o.push(l))}o.length>0&&this._callCallbacksForEvent(e,o,i,t)}},n.prototype.eventInsideSVG=function(t){return this._translator.insideSVG(t)},n._DISPATCHER_KEY="__Plottable_Dispatcher_Touch",n._TOUCHSTART_EVENT_NAME="touchstart",n._TOUCHMOVE_EVENT_NAME="touchmove",n._TOUCHEND_EVENT_NAME="touchend",n._TOUCHCANCEL_EVENT_NAME="touchcancel",n}(t.Dispatcher),e.Touch=n}(e||(e={})),function(t){var e,n;e=t.Dispatchers||(t.Dispatchers={}),n=function(t){function e(){var n=this;t.call(this),this._eventToProcessingFunction[e._KEYDOWN_EVENT_NAME]=function(t){return n._processKeydown(t)},this._eventToProcessingFunction[e._KEYUP_EVENT_NAME]=function(t){return n._processKeyup(t)}}return r(e,t),e.getDispatcher=function(){var t=document[e._DISPATCHER_KEY];return null==t&&(t=new e,document[e._DISPATCHER_KEY]=t),t},e.prototype._processKeydown=function(t){this._callCallbacksForEvent(e._KEYDOWN_EVENT_NAME,t.keyCode,t)},e.prototype._processKeyup=function(t){this._callCallbacksForEvent(e._KEYUP_EVENT_NAME,t.keyCode,t)},e.prototype.onKeyDown=function(t){return this._addCallbackForEvent(e._KEYDOWN_EVENT_NAME,t),this},e.prototype.offKeyDown=function(t){return this._removeCallbackForEvent(e._KEYDOWN_EVENT_NAME,t),this},e.prototype.onKeyUp=function(t){return this._addCallbackForEvent(e._KEYUP_EVENT_NAME,t),this},e.prototype.offKeyUp=function(t){return this._removeCallbackForEvent(e._KEYUP_EVENT_NAME,t),this},e._DISPATCHER_KEY="__Plottable_Dispatcher_Key",e._KEYDOWN_EVENT_NAME="keydown",e._KEYUP_EVENT_NAME="keyup",e}(t.Dispatcher),e.Key=n}(e||(e={})),function(t){var e=function(){function t(){var t=this;this._anchorCallback=function(e){return t._anchor(e)},this._enabled=!0}return t.prototype._anchor=function(t){this._isAnchored=!0},t.prototype._unanchor=function(){this._isAnchored=!1},t.prototype.attachTo=function(t){return this._disconnect(),this._componentAttachedTo=t,this._connect(),this},t.prototype._connect=function(){this.enabled()&&null!=this._componentAttachedTo&&!this._isAnchored&&this._componentAttachedTo.onAnchor(this._anchorCallback)},t.prototype.detachFrom=function(t){return this._disconnect(),this._componentAttachedTo=null,this},t.prototype._disconnect=function(){this._isAnchored&&this._unanchor(),null!=this._componentAttachedTo&&this._componentAttachedTo.offAnchor(this._anchorCallback)},t.prototype.enabled=function(t){return null==t?this._enabled:(this._enabled=t,this._enabled?this._connect():this._disconnect(),this)},t.prototype._translateToComponentSpace=function(t){var e=this._componentAttachedTo.originToSVG();return{x:t.x-e.x,y:t.y-e.y}},t.prototype._isInsideComponent=function(t){return 0<=t.x&&0<=t.y&&t.x<=this._componentAttachedTo.width()&&t.y<=this._componentAttachedTo.height()},t}();t.Interaction=e}(e||(e={})),function(t){var e,n;e=t.Interactions||(t.Interactions={}),n=function(e){function n(){var n=this;e.apply(this,arguments),this._clickedDown=!1,this._onClickCallbacks=new t.Utils.CallbackSet,this._mouseDownCallback=function(t){return n._handleClickDown(t)},this._mouseUpCallback=function(t){return n._handleClickUp(t)},this._touchStartCallback=function(t,e){return n._handleClickDown(e[t[0]])},this._touchEndCallback=function(t,e){return n._handleClickUp(e[t[0]])},this._touchCancelCallback=function(t,e){return n._clickedDown=!1}}return r(n,e),n.prototype._anchor=function(n){e.prototype._anchor.call(this,n),this._mouseDispatcher=t.Dispatchers.Mouse.getDispatcher(n.content().node()),this._mouseDispatcher.onMouseDown(this._mouseDownCallback),this._mouseDispatcher.onMouseUp(this._mouseUpCallback),this._touchDispatcher=t.Dispatchers.Touch.getDispatcher(n.content().node()),this._touchDispatcher.onTouchStart(this._touchStartCallback),this._touchDispatcher.onTouchEnd(this._touchEndCallback),this._touchDispatcher.onTouchCancel(this._touchCancelCallback)},n.prototype._unanchor=function(){e.prototype._unanchor.call(this),this._mouseDispatcher.offMouseDown(this._mouseDownCallback),this._mouseDispatcher.offMouseUp(this._mouseUpCallback),this._mouseDispatcher=null,this._touchDispatcher.offTouchStart(this._touchStartCallback),this._touchDispatcher.offTouchEnd(this._touchEndCallback),this._touchDispatcher.offTouchCancel(this._touchCancelCallback),this._touchDispatcher=null},n.prototype._handleClickDown=function(t){var e=this._translateToComponentSpace(t);this._isInsideComponent(e)&&(this._clickedDown=!0)},n.prototype._handleClickUp=function(t){var e=this._translateToComponentSpace(t);this._clickedDown&&this._isInsideComponent(e)&&this._onClickCallbacks.callCallbacks(e),this._clickedDown=!1},n.prototype.onClick=function(t){return this._onClickCallbacks.add(t),this},n.prototype.offClick=function(t){return this._onClickCallbacks.delete(t),this},n}(t.Interaction),e.Click=n}(e||(e={})),function(t){!function(e){var n;!function(t){t[t.NotClicked=0]="NotClicked",t[t.SingleClicked=1]="SingleClicked",t[t.DoubleClicked=2]="DoubleClicked"}(n||(n={}));var i=function(e){function i(){var r=this;e.apply(this,arguments),this._clickState=n.NotClicked,this._clickedDown=!1,this._onDoubleClickCallbacks=new t.Utils.CallbackSet,this._mouseDownCallback=function(t){return r._handleClickDown(t)},this._mouseUpCallback=function(t){return r._handleClickUp(t)},this._dblClickCallback=function(t){return r._handleDblClick()},this._touchStartCallback=function(t,e){return r._handleClickDown(e[t[0]])},this._touchEndCallback=function(t,e){return r._handleClickUp(e[t[0]])},this._touchCancelCallback=function(t,e){return r._handleClickCancel()}}return r(i,e),i.prototype._anchor=function(n){e.prototype._anchor.call(this,n),this._mouseDispatcher=t.Dispatchers.Mouse.getDispatcher(n.content().node()),this._mouseDispatcher.onMouseDown(this._mouseDownCallback),this._mouseDispatcher.onMouseUp(this._mouseUpCallback),this._mouseDispatcher.onDblClick(this._dblClickCallback),this._touchDispatcher=t.Dispatchers.Touch.getDispatcher(n.content().node()),this._touchDispatcher.onTouchStart(this._touchStartCallback),this._touchDispatcher.onTouchEnd(this._touchEndCallback),this._touchDispatcher.onTouchCancel(this._touchCancelCallback)},i.prototype._unanchor=function(){e.prototype._unanchor.call(this),this._mouseDispatcher.offMouseDown(this._mouseDownCallback),this._mouseDispatcher.offMouseUp(this._mouseUpCallback),this._mouseDispatcher.offDblClick(this._dblClickCallback),this._mouseDispatcher=null,this._touchDispatcher.offTouchStart(this._touchStartCallback),this._touchDispatcher.offTouchEnd(this._touchEndCallback),this._touchDispatcher.offTouchCancel(this._touchCancelCallback),this._touchDispatcher=null},i.prototype._handleClickDown=function(t){var e=this._translateToComponentSpace(t);this._isInsideComponent(e)&&(this._clickState===n.SingleClicked&&i._pointsEqual(e,this._clickedPoint)||(this._clickState=n.NotClicked),this._clickedPoint=e,this._clickedDown=!0)},i.prototype._handleClickUp=function(t){var e=this._translateToComponentSpace(t);this._clickedDown&&i._pointsEqual(e,this._clickedPoint)?this._clickState=this._clickState===n.NotClicked?n.SingleClicked:n.DoubleClicked:this._clickState=n.NotClicked,this._clickedDown=!1},i.prototype._handleDblClick=function(){this._clickState===n.DoubleClicked&&(this._onDoubleClickCallbacks.callCallbacks(this._clickedPoint),this._clickState=n.NotClicked)},i.prototype._handleClickCancel=function(){this._clickState=n.NotClicked,this._clickedDown=!1},i._pointsEqual=function(t,e){return t.x===e.x&&t.y===e.y},i.prototype.onDoubleClick=function(t){return this._onDoubleClickCallbacks.add(t),this},i.prototype.offDoubleClick=function(t){return this._onDoubleClickCallbacks.delete(t),this},i}(t.Interaction);e.DoubleClick=i}(t.Interactions||(t.Interactions={}))}(e||(e={})),function(t){var e,n;e=t.Interactions||(t.Interactions={}),n=function(e){function n(){var n=this;e.apply(this,arguments),this._keyPressCallbacks={},this._keyReleaseCallbacks={},this._mouseMoveCallback=function(t){return!1},this._downedKeys=new t.Utils.Set,this._keyDownCallback=function(t,e){return n._handleKeyDownEvent(t,e)},this._keyUpCallback=function(t){return n._handleKeyUpEvent(t)}}return r(n,e),n.prototype._anchor=function(n){e.prototype._anchor.call(this,n),this._positionDispatcher=t.Dispatchers.Mouse.getDispatcher(this._componentAttachedTo._element.node()),this._positionDispatcher.onMouseMove(this._mouseMoveCallback),this._keyDispatcher=t.Dispatchers.Key.getDispatcher(),this._keyDispatcher.onKeyDown(this._keyDownCallback),this._keyDispatcher.onKeyUp(this._keyUpCallback)},n.prototype._unanchor=function(){e.prototype._unanchor.call(this),this._positionDispatcher.offMouseMove(this._mouseMoveCallback),this._positionDispatcher=null,this._keyDispatcher.offKeyDown(this._keyDownCallback),this._keyDispatcher.offKeyUp(this._keyUpCallback),this._keyDispatcher=null},n.prototype._handleKeyDownEvent=function(t,e){var n=this._translateToComponentSpace(this._positionDispatcher.lastMousePosition());this._isInsideComponent(n)&&!e.repeat&&(this._keyPressCallbacks[t]&&this._keyPressCallbacks[t].callCallbacks(t),this._downedKeys.add(t))},n.prototype._handleKeyUpEvent=function(t){this._downedKeys.has(t)&&this._keyReleaseCallbacks[t]&&this._keyReleaseCallbacks[t].callCallbacks(t),this._downedKeys.delete(t)},n.prototype.onKeyPress=function(e,n){return this._keyPressCallbacks[e]||(this._keyPressCallbacks[e]=new t.Utils.CallbackSet),this._keyPressCallbacks[e].add(n),this},n.prototype.offKeyPress=function(t,e){return this._keyPressCallbacks[t].delete(e),0===this._keyPressCallbacks[t].size&&delete this._keyPressCallbacks[t],this},n.prototype.onKeyRelease=function(e,n){return this._keyReleaseCallbacks[e]||(this._keyReleaseCallbacks[e]=new t.Utils.CallbackSet),this._keyReleaseCallbacks[e].add(n),this},n.prototype.offKeyRelease=function(t,e){return this._keyReleaseCallbacks[t].delete(e),0===this._keyReleaseCallbacks[t].size&&delete this._keyReleaseCallbacks[t],this},n}(t.Interaction),e.Key=n}(e||(e={})),function(t){var e,n;e=t.Interactions||(t.Interactions={}),n=function(e){function n(){var n=this;e.apply(this,arguments),this._overComponent=!1,this._pointerEnterCallbacks=new t.Utils.CallbackSet,this._pointerMoveCallbacks=new t.Utils.CallbackSet,this._pointerExitCallbacks=new t.Utils.CallbackSet,this._mouseMoveCallback=function(t,e){return n._handleMouseEvent(t,e)},this._touchStartCallback=function(t,e,r){return n._handleTouchEvent(e[t[0]],r)}}return r(n,e),n.prototype._anchor=function(n){e.prototype._anchor.call(this,n),this._mouseDispatcher=t.Dispatchers.Mouse.getDispatcher(this._componentAttachedTo.content().node()),this._mouseDispatcher.onMouseMove(this._mouseMoveCallback),this._touchDispatcher=t.Dispatchers.Touch.getDispatcher(this._componentAttachedTo.content().node()),this._touchDispatcher.onTouchStart(this._touchStartCallback)},n.prototype._unanchor=function(){e.prototype._unanchor.call(this),this._mouseDispatcher.offMouseMove(this._mouseMoveCallback),this._mouseDispatcher=null,this._touchDispatcher.offTouchStart(this._touchStartCallback),this._touchDispatcher=null},n.prototype._handleMouseEvent=function(t,e){var n=this._mouseDispatcher.eventInsideSVG(e);this._handlePointerEvent(t,n)},n.prototype._handleTouchEvent=function(t,e){var n=this._touchDispatcher.eventInsideSVG(e);this._handlePointerEvent(t,n)},n.prototype._handlePointerEvent=function(t,e){var n=this._translateToComponentSpace(t),r=this._isInsideComponent(n);r&&e?(this._overComponent||this._pointerEnterCallbacks.callCallbacks(n),this._pointerMoveCallbacks.callCallbacks(n)):this._overComponent&&this._pointerExitCallbacks.callCallbacks(n),this._overComponent=r&&e},n.prototype.onPointerEnter=function(t){return this._pointerEnterCallbacks.add(t),this},n.prototype.offPointerEnter=function(t){return this._pointerEnterCallbacks.delete(t),this},n.prototype.onPointerMove=function(t){return this._pointerMoveCallbacks.add(t),this},n.prototype.offPointerMove=function(t){return this._pointerMoveCallbacks.delete(t),this},n.prototype.onPointerExit=function(t){return this._pointerExitCallbacks.add(t),this},n.prototype.offPointerExit=function(t){return this._pointerExitCallbacks.delete(t),this},n}(t.Interaction),e.Pointer=n}(e||(e={})),function(e){var n,i;n=e.Interactions||(e.Interactions={}),i=function(i){function o(r,o){var a=this;i.call(this),this._wheelCallback=function(t,e){return a._handleWheelEvent(t,e)},this._touchStartCallback=function(t,e,n){return a._handleTouchStart(t,e,n)},this._touchMoveCallback=function(t,e,n){return a._handlePinch(t,e,n)},this._touchEndCallback=function(t,e,n){return a._handleTouchEnd(t,e,n)},this._touchCancelCallback=function(t,e,n){return a._handleTouchEnd(t,e,n)},this._panEndCallbacks=new e.Utils.CallbackSet,this._zoomEndCallbacks=new e.Utils.CallbackSet,this._xScales=new e.Utils.Set,this._yScales=new e.Utils.Set,this._dragInteraction=new n.Drag,this._setupDragInteraction(),this._touchIds=t.map(),this._minDomainExtents=new e.Utils.Map,this._maxDomainExtents=new e.Utils.Map,this._minDomainValues=new e.Utils.Map,this._maxDomainValues=new e.Utils.Map,null!=r&&this.addXScale(r),null!=o&&this.addYScale(o)}return r(o,i),o.prototype._anchor=function(t){i.prototype._anchor.call(this,t),this._dragInteraction.attachTo(t),this._mouseDispatcher=e.Dispatchers.Mouse.getDispatcher(this._componentAttachedTo.content().node()),this._mouseDispatcher.onWheel(this._wheelCallback),this._touchDispatcher=e.Dispatchers.Touch.getDispatcher(this._componentAttachedTo.content().node()),this._touchDispatcher.onTouchStart(this._touchStartCallback),this._touchDispatcher.onTouchMove(this._touchMoveCallback),this._touchDispatcher.onTouchEnd(this._touchEndCallback),this._touchDispatcher.onTouchCancel(this._touchCancelCallback)},o.prototype._unanchor=function(){i.prototype._unanchor.call(this),this._mouseDispatcher.offWheel(this._wheelCallback),this._mouseDispatcher=null,this._touchDispatcher.offTouchStart(this._touchStartCallback),this._touchDispatcher.offTouchMove(this._touchMoveCallback),this._touchDispatcher.offTouchEnd(this._touchEndCallback),this._touchDispatcher.offTouchCancel(this._touchCancelCallback),this._touchDispatcher=null,this._dragInteraction.detachFrom(this._componentAttachedTo)},o.prototype._handleTouchStart=function(t,e,n){for(var r=0;r<t.length&&this._touchIds.size()<2;r++){var i=t[r];this._touchIds.set(i.toString(),this._translateToComponentSpace(e[i]))}},o.prototype._handlePinch=function(t,e,n){var r=this;if(!(this._touchIds.size()<2)){var i=this._touchIds.values();if(this._isInsideComponent(this._translateToComponentSpace(i[0]))&&this._isInsideComponent(this._translateToComponentSpace(i[1]))){var a=o._pointDistance(i[0],i[1]);if(0!==a){t.forEach((function(t){r._touchIds.has(t.toString())&&r._touchIds.set(t.toString(),r._translateToComponentSpace(e[t]))}));var s=this._touchIds.values(),l=o._pointDistance(s[0],s[1]);if(0!==l){var u=a/l,c=s.map((function(t,e){return{x:(t.x-i[e].x)/u,y:(t.y-i[e].y)/u}})),h=o._centerPoint(i[0],i[1]),p=h.x,f=h.y;this.xScales().forEach((function(t){var e=r._constrainedZoom(t,u,p);p=e.centerPoint,u=e.zoomAmount})),this.yScales().forEach((function(t){var e=r._constrainedZoom(t,u,f);f=e.centerPoint,u=e.zoomAmount}));var d=i.map((function(t,e){return{x:c[e].x*u+t.x,y:c[e].y*u+t.y}})),_=p-(d[0].x+d[1].x)/2;this.xScales().forEach((function(t){r._magnifyScale(t,u,p),r._translateScale(t,r._constrainedTranslation(t,_))}));var g=f-(d[0].y+d[1].y)/2;this.yScales().forEach((function(t){r._magnifyScale(t,u,f),r._translateScale(t,r._constrainedTranslation(t,g))}))}}}}},o._centerPoint=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y);return{x:(n+r)/2,y:(Math.max(t.y,e.y)+i)/2}},o._pointDistance=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y);return Math.sqrt(Math.pow(r-n,2)+Math.pow(o-i,2))},o.prototype._handleTouchEnd=function(t,e,n){var r=this;t.forEach((function(t){r._touchIds.remove(t.toString())})),this._touchIds.size()>0&&this._zoomEndCallbacks.callCallbacks()},o.prototype._magnifyScale=function(t,e,n){var r=this;t.domain(t.range().map((function(i){return t.invert(r._zoomAt(i,e,n))})))},o.prototype._translateScale=function(t,e){t.domain(t.range().map((function(n){return t.invert(n+e)})))},o.prototype._handleWheelEvent=function(t,e){var n=this,r=this._translateToComponentSpace(t);if(this._isInsideComponent(r)){e.preventDefault();var i=e.deltaY*(e.deltaMode?o._PIXELS_PER_LINE:1),a=Math.pow(2,.002*i),s=r.x,l=r.y;this.xScales().forEach((function(t){var e=n._constrainedZoom(t,a,s);s=e.centerPoint,a=e.zoomAmount})),this.yScales().forEach((function(t){var e=n._constrainedZoom(t,a,l);l=e.centerPoint,a=e.zoomAmount})),this.xScales().forEach((function(t){n._magnifyScale(t,a,s)})),this.yScales().forEach((function(t){n._magnifyScale(t,a,l)})),this._zoomEndCallbacks.callCallbacks()}},o.prototype._constrainedZoom=function(t,e,n){return e=this._constrainZoomExtents(t,e),this._constrainZoomValues(t,e,n)},o.prototype._constrainZoomExtents=function(t,e){var n=e>1,r=n?this.maxDomainExtent(t):this.minDomainExtent(t);if(null==r)return e;var i=t.domain(),o=Math.abs(i[1]-i[0]);return(n?Math.min:Math.max)(e,r/o)},o.prototype._constrainZoomValues=function(t,e,n){if(e<=1)return{centerPoint:n,zoomAmount:e};var r=this.minDomainValue(t),i=this.maxDomainValue(t);if(null==r&&null==i)return{centerPoint:n,zoomAmount:e};var o=t.domain(),a=o[0],s=o[1];if(null!=i){var l=t.scale(i),u=t.scale(s);(p=this._zoomAt(u,e,n))>l&&(n=this._getZoomCenterForTarget(u,e,l))}if(null!=r){var c=t.scale(r),h=t.scale(a);(f=this._zoomAt(h,e,n))<c&&(n=this._getZoomCenterForTarget(h,e,c))}if(null!=i&&null!=i){l=t.scale(i),u=t.scale(s);var p=this._zoomAt(u,e,n),f=(c=t.scale(r),h=t.scale(a),this._zoomAt(h,e,n));if(p>l||f<c){var d=u-h+c-l;0===d?(n=(u+h)/2,e=1):(n=(u*c-h*l)/d,e=(l-c)/(u-h))}}return{centerPoint:n,zoomAmount:e}},o.prototype._zoomAt=function(t,e,n){return n-(n-t)*e},o.prototype._getZoomCenterForTarget=function(t,e,n){return(t*e-n)/(e-1)},o.prototype._setupDragInteraction=function(){var t,e=this;this._dragInteraction.constrainedToComponent(!1),this._dragInteraction.onDragStart((function(){return t=null})),this._dragInteraction.onDrag((function(n,r){if(!(e._touchIds.size()>=2)){var i=(null==t?n.x:t.x)-r.x;e.xScales().forEach((function(t){e._translateScale(t,e._constrainedTranslation(t,i))}));var o=(null==t?n.y:t.y)-r.y;e.yScales().forEach((function(t){e._translateScale(t,e._constrainedTranslation(t,o))})),t=r}})),this._dragInteraction.onDragEnd((function(){return e._panEndCallbacks.callCallbacks()}))},o.prototype._constrainedTranslation=function(t,e){var n,r=t.domain(),i=r[0],o=r[1];if(e>0){if(null!=(n=this.maxDomainValue(t))){var a=t.scale(o),s=t.scale(n);e=Math.min(a+e,s)-a}}else if(null!=(n=this.minDomainValue(t))){var l=t.scale(i),u=t.scale(n);e=Math.max(l+e,u)-l}return e},o.prototype._nonLinearScaleWithExtents=function(t){return!(null==this.minDomainExtent(t)||null==this.maxDomainExtent(t)||t instanceof e.Scales.Linear||t instanceof e.Scales.Time)},o.prototype.xScales=function(t){var n=this;if(null==t){var r=[];return this._xScales.forEach((function(t){r.push(t)})),r}return this._xScales=new e.Utils.Set,t.forEach((function(t){n.addXScale(t)})),this},o.prototype.yScales=function(t){var n=this;if(null==t){var r=[];return this._yScales.forEach((function(t){r.push(t)})),r}return this._yScales=new e.Utils.Set,t.forEach((function(t){n.addYScale(t)})),this},o.prototype.addXScale=function(t){return this._xScales.add(t),this},o.prototype.removeXScale=function(t){return this._xScales.delete(t),this._minDomainExtents.delete(t),this._maxDomainExtents.delete(t),this._minDomainValues.delete(t),this._maxDomainValues.delete(t),this},o.prototype.addYScale=function(t){return this._yScales.add(t),this},o.prototype.removeYScale=function(t){return this._yScales.delete(t),this._minDomainExtents.delete(t),this._maxDomainExtents.delete(t),this._minDomainValues.delete(t),this._maxDomainValues.delete(t),this},o.prototype.minDomainExtent=function(t,n){if(null==n)return this._minDomainExtents.get(t);if(n.valueOf()<0)throw new Error("extent must be non-negative");var r=this.maxDomainExtent(t);if(null!=r&&r.valueOf()<n.valueOf())throw new Error("minDomainExtent must be smaller than maxDomainExtent for the same Scale");return this._nonLinearScaleWithExtents(t)&&e.Utils.Window.warn("Panning and zooming with extents on a nonlinear scale may have unintended behavior."),this._minDomainExtents.set(t,n),this},o.prototype.maxDomainExtent=function(t,n){if(null==n)return this._maxDomainExtents.get(t);if(n.valueOf()<=0)throw new Error("extent must be positive");var r=this.minDomainExtent(t);if(null!=r&&n.valueOf()<r.valueOf())throw new Error("maxDomainExtent must be larger than minDomainExtent for the same Scale");return this._nonLinearScaleWithExtents(t)&&e.Utils.Window.warn("Panning and zooming with extents on a nonlinear scale may have unintended behavior."),this._maxDomainExtents.set(t,n),this},o.prototype.minDomainValue=function(t,e){if(null==e)return this._minDomainValues.get(t);var n=this.maxDomainValue(t);if(null!=n&&n.valueOf()<=e.valueOf())throw new Error("minDomainValue must be smaller than maxDomainValue for the same Scale");return this._minDomainValues.set(t,e),this},o.prototype.maxDomainValue=function(t,e){if(null==e)return this._maxDomainValues.get(t);var n=this.minDomainValue(t);if(null!=n&&e.valueOf()<=n.valueOf())throw new Error("maxDomainValue must be larger than minDomainValue for the same Scale");return this._maxDomainValues.set(t,e),this},o.prototype.setMinMaxDomainValuesTo=function(t){this._minDomainValues.delete(t),this._maxDomainValues.delete(t);var e=t.domain(),n=e[0],r=e[1];this.minDomainValue(t,n),this.maxDomainValue(t,r)},o.prototype.onPanEnd=function(t){return this._panEndCallbacks.add(t),this},o.prototype.offPanEnd=function(t){return this._panEndCallbacks.delete(t),this},o.prototype.onZoomEnd=function(t){return this._zoomEndCallbacks.add(t),this},o.prototype.offZoomEnd=function(t){return this._zoomEndCallbacks.delete(t),this},o._PIXELS_PER_LINE=120,o}(e.Interaction),n.PanZoom=i}(e||(e={})),function(t){var e,n;e=t.Interactions||(t.Interactions={}),n=function(e){function n(){var n=this;e.apply(this,arguments),this._dragging=!1,this._constrainedToComponent=!0,this._dragStartCallbacks=new t.Utils.CallbackSet,this._dragCallbacks=new t.Utils.CallbackSet,this._dragEndCallbacks=new t.Utils.CallbackSet,this._mouseDownCallback=function(t,e){return n._startDrag(t,e)},this._mouseMoveCallback=function(t,e){return n._doDrag(t,e)},this._mouseUpCallback=function(t,e){return n._endDrag(t,e)},this._touchStartCallback=function(t,e,r){return n._startDrag(e[t[0]],r)},this._touchMoveCallback=function(t,e,r){return n._doDrag(e[t[0]],r)},this._touchEndCallback=function(t,e,r){return n._endDrag(e[t[0]],r)}}return r(n,e),n.prototype._anchor=function(n){e.prototype._anchor.call(this,n),this._mouseDispatcher=t.Dispatchers.Mouse.getDispatcher(this._componentAttachedTo.content().node()),this._mouseDispatcher.onMouseDown(this._mouseDownCallback),this._mouseDispatcher.onMouseMove(this._mouseMoveCallback),this._mouseDispatcher.onMouseUp(this._mouseUpCallback),this._touchDispatcher=t.Dispatchers.Touch.getDispatcher(this._componentAttachedTo.content().node()),this._touchDispatcher.onTouchStart(this._touchStartCallback),this._touchDispatcher.onTouchMove(this._touchMoveCallback),this._touchDispatcher.onTouchEnd(this._touchEndCallback)},n.prototype._unanchor=function(){e.prototype._unanchor.call(this),this._mouseDispatcher.offMouseDown(this._mouseDownCallback),this._mouseDispatcher.offMouseMove(this._mouseMoveCallback),this._mouseDispatcher.offMouseUp(this._mouseUpCallback),this._mouseDispatcher=null,this._touchDispatcher.offTouchStart(this._touchStartCallback),this._touchDispatcher.offTouchMove(this._touchMoveCallback),this._touchDispatcher.offTouchEnd(this._touchEndCallback),this._touchDispatcher=null},n.prototype._translateAndConstrain=function(e){var n=this._translateToComponentSpace(e);return this._constrainedToComponent?{x:t.Utils.Math.clamp(n.x,0,this._componentAttachedTo.width()),y:t.Utils.Math.clamp(n.y,0,this._componentAttachedTo.height())}:n},n.prototype._startDrag=function(t,e){if(!(e instanceof MouseEvent&&0!==e.button)){var n=this._translateToComponentSpace(t);this._isInsideComponent(n)&&(e.preventDefault(),this._dragging=!0,this._dragOrigin=n,this._dragStartCallbacks.callCallbacks(this._dragOrigin))}},n.prototype._doDrag=function(t,e){this._dragging&&this._dragCallbacks.callCallbacks(this._dragOrigin,this._translateAndConstrain(t))},n.prototype._endDrag=function(t,e){e instanceof MouseEvent&&0!==e.button||this._dragging&&(this._dragging=!1,this._dragEndCallbacks.callCallbacks(this._dragOrigin,this._translateAndConstrain(t)))},n.prototype.constrainedToComponent=function(t){return null==t?this._constrainedToComponent:(this._constrainedToComponent=t,this)},n.prototype.onDragStart=function(t){return this._dragStartCallbacks.add(t),this},n.prototype.offDragStart=function(t){return this._dragStartCallbacks.delete(t),this},n.prototype.onDrag=function(t){return this._dragCallbacks.add(t),this},n.prototype.offDrag=function(t){return this._dragCallbacks.delete(t),this},n.prototype.onDragEnd=function(t){return this._dragEndCallbacks.add(t),this},n.prototype.offDragEnd=function(t){return this._dragEndCallbacks.delete(t),this},n}(t.Interaction),e.Drag=n}(e||(e={})),function(t){var e,n;e=t.Components||(t.Components={}),n=function(n){function i(){n.call(this),this._detectionRadius=3,this._resizable=!1,this._movable=!1,this._hasCorners=!0,this.addClass("drag-box-layer"),this._dragInteraction=new t.Interactions.Drag,this._setUpCallbacks(),this._dragInteraction.attachTo(this),this._dragStartCallbacks=new t.Utils.CallbackSet,this._dragCallbacks=new t.Utils.CallbackSet,this._dragEndCallbacks=new t.Utils.CallbackSet}return r(i,n),i.prototype._setUpCallbacks=function(){var t,n,r,i,o=this,a=0,s=1,l=2,u=a,c=function(c){t=o._getResizingEdges(c);var h=o.bounds(),p=h.topLeft.x<=c.x&&c.x<=h.bottomRight.x&&h.topLeft.y<=c.y&&c.y<=h.bottomRight.y;o.boxVisible()&&(t.top||t.bottom||t.left||t.right)?u=s:o.boxVisible()&&o.movable()&&p?u=l:(u=a,o._setBounds({topLeft:c,bottomRight:c}),o._xBoundsMode===e.PropertyMode.VALUE&&null!=o.xScale()&&o._setXExtent([o.xScale().invert(c.x),o.xScale().invert(c.x)]),o._yBoundsMode===e.PropertyMode.VALUE&&null!=o.yScale()&&o._setYExtent([o.yScale().invert(c.y),o.yScale().invert(c.y)]),o.render()),o.boxVisible(!0),h=o.bounds(),n={x:h.topLeft.x,y:h.topLeft.y},r={x:h.bottomRight.x,y:h.bottomRight.y},i=c,o._dragStartCallbacks.callCallbacks(h)},h=function(c,h){switch(u){case a:r.x=h.x,r.y=h.y;break;case s:t.bottom?r.y=h.y:t.top&&(n.y=h.y),t.right?r.x=h.x:t.left&&(n.x=h.x);break;case l:var p=h.x-i.x,f=h.y-i.y;n.x+=p,n.y+=f,r.x+=p,r.y+=f,i=h}o._setBounds({topLeft:n,bottomRight:r}),o._xBoundsMode===e.PropertyMode.VALUE&&null!=o.xScale()&&o._setXExtent([o.xScale().invert(n.x),o.xScale().invert(r.x)]),o._yBoundsMode===e.PropertyMode.VALUE&&null!=o.yScale()&&o._setYExtent([o.yScale().invert(n.y),o.yScale().invert(r.y)]),o.render(),o._dragCallbacks.callCallbacks(o.bounds())},p=function(t,e){u===a&&t.x===e.x&&t.y===e.y&&o.boxVisible(!1),o._dragEndCallbacks.callCallbacks(o.bounds())};this._dragInteraction.onDragStart(c),this._dragInteraction.onDrag(h),this._dragInteraction.onDragEnd(p),this._disconnectInteraction=function(){o._dragInteraction.offDragStart(c),o._dragInteraction.offDrag(h),o._dragInteraction.offDragEnd(p),o._dragInteraction.detachFrom(o)}},i.prototype._setup=function(){var t=this;n.prototype._setup.call(this);var e=function(){return t._box.append("line").style({opacity:0,stroke:"pink","pointer-events":"visibleStroke"})};if(this._detectionEdgeT=e().classed("drag-edge-tb",!0),this._detectionEdgeB=e().classed("drag-edge-tb",!0),this._detectionEdgeL=e().classed("drag-edge-lr",!0),this._detectionEdgeR=e().classed("drag-edge-lr",!0),this._hasCorners){var r=function(){return t._box.append("circle").style({opacity:0,fill:"pink","pointer-events":"visibleFill"})};this._detectionCornerTL=r().classed("drag-corner-tl",!0),this._detectionCornerTR=r().classed("drag-corner-tr",!0),this._detectionCornerBL=r().classed("drag-corner-bl",!0),this._detectionCornerBR=r().classed("drag-corner-br",!0)}},i.prototype._getResizingEdges=function(t){var e={top:!1,bottom:!1,left:!1,right:!1};if(!this.resizable())return e;var n=this.bounds(),r=n.topLeft.y,i=n.bottomRight.y,o=n.topLeft.x,a=n.bottomRight.x,s=this._detectionRadius;return o-s<=t.x&&t.x<=a+s&&(e.top=r-s<=t.y&&t.y<=r+s,e.bottom=i-s<=t.y&&t.y<=i+s),r-s<=t.y&&t.y<=i+s&&(e.left=o-s<=t.x&&t.x<=o+s,e.right=a-s<=t.x&&t.x<=a+s),e},i.prototype.renderImmediately=function(){if(n.prototype.renderImmediately.call(this),this.boxVisible()){var t=this.bounds(),e=t.topLeft.y,r=t.bottomRight.y,i=t.topLeft.x,o=t.bottomRight.x;this._detectionEdgeT.attr({x1:i,y1:e,x2:o,y2:e,"stroke-width":2*this._detectionRadius}),this._detectionEdgeB.attr({x1:i,y1:r,x2:o,y2:r,"stroke-width":2*this._detectionRadius}),this._detectionEdgeL.attr({x1:i,y1:e,x2:i,y2:r,"stroke-width":2*this._detectionRadius}),this._detectionEdgeR.attr({x1:o,y1:e,x2:o,y2:r,"stroke-width":2*this._detectionRadius}),this._hasCorners&&(this._detectionCornerTL.attr({cx:i,cy:e,r:this._detectionRadius}),this._detectionCornerTR.attr({cx:o,cy:e,r:this._detectionRadius}),this._detectionCornerBL.attr({cx:i,cy:r,r:this._detectionRadius}),this._detectionCornerBR.attr({cx:o,cy:r,r:this._detectionRadius}))}return this},i.prototype.detectionRadius=function(t){if(null==t)return this._detectionRadius;if(t<0)throw new Error("detection radius cannot be negative.");return this._detectionRadius=t,this.render(),this},i.prototype.resizable=function(t){return null==t?this._resizable:(this._resizable=t,this._setResizableClasses(t),this)},i.prototype._setResizableClasses=function(t){t&&this.enabled()?(this.addClass("x-resizable"),this.addClass("y-resizable")):(this.removeClass("x-resizable"),this.removeClass("y-resizable"))},i.prototype.movable=function(t){return null==t?this._movable:(this._movable=t,this._setMovableClass(),this)},i.prototype._setMovableClass=function(){this.movable()&&this.enabled()?this.addClass("movable"):this.removeClass("movable")},i.prototype.onDragStart=function(t){return this._dragStartCallbacks.add(t),this},i.prototype.offDragStart=function(t){return this._dragStartCallbacks.delete(t),this},i.prototype.onDrag=function(t){return this._dragCallbacks.add(t),this},i.prototype.offDrag=function(t){return this._dragCallbacks.delete(t),this},i.prototype.onDragEnd=function(t){return this._dragEndCallbacks.add(t),this},i.prototype.offDragEnd=function(t){return this._dragEndCallbacks.delete(t),this},i.prototype.dragInteraction=function(){return this._dragInteraction},i.prototype.enabled=function(t){return null==t?this._dragInteraction.enabled():(this._dragInteraction.enabled(t),this._setResizableClasses(this.resizable()),this._setMovableClass(),this)},i.prototype.destroy=function(){var t=this;n.prototype.destroy.call(this),this._dragStartCallbacks.forEach((function(e){return t._dragCallbacks.delete(e)})),this._dragCallbacks.forEach((function(e){return t._dragCallbacks.delete(e)})),this._dragEndCallbacks.forEach((function(e){return t._dragEndCallbacks.delete(e)})),this._disconnectInteraction()},i.prototype.detach=function(){return this._resetState(),this._dragInteraction.detachFrom(this),n.prototype.detach.call(this),this},i.prototype.anchor=function(t){return this._dragInteraction.attachTo(this),n.prototype.anchor.call(this,t),this},i.prototype._resetState=function(){this.bounds({topLeft:{x:0,y:0},bottomRight:{x:0,y:0}})},i}(e.SelectionBoxLayer),e.DragBoxLayer=n}(e||(e={})),function(t){var e,n;e=t.Components||(t.Components={}),n=function(t){function e(){t.call(this),this.addClass("x-drag-box-layer"),this._hasCorners=!1}return r(e,t),e.prototype.computeLayout=function(e,n,r){return t.prototype.computeLayout.call(this,e,n,r),this._setBounds(this.bounds()),this},e.prototype._setBounds=function(e){t.prototype._setBounds.call(this,{topLeft:{x:e.topLeft.x,y:0},bottomRight:{x:e.bottomRight.x,y:this.height()}})},e.prototype._setResizableClasses=function(t){t&&this.enabled()?this.addClass("x-resizable"):this.removeClass("x-resizable")},e.prototype.yScale=function(e){if(null==e)return t.prototype.yScale.call(this);throw new Error("yScales cannot be set on an XDragBoxLayer")},e.prototype.yExtent=function(e){if(null==e)return t.prototype.yExtent.call(this);throw new Error("XDragBoxLayer has no yExtent")},e}(e.DragBoxLayer),e.XDragBoxLayer=n}(e||(e={})),function(t){var e,n;e=t.Components||(t.Components={}),n=function(t){function e(){t.call(this),this.addClass("y-drag-box-layer"),this._hasCorners=!1}return r(e,t),e.prototype.computeLayout=function(e,n,r){return t.prototype.computeLayout.call(this,e,n,r),this._setBounds(this.bounds()),this},e.prototype._setBounds=function(e){t.prototype._setBounds.call(this,{topLeft:{x:0,y:e.topLeft.y},bottomRight:{x:this.width(),y:e.bottomRight.y}})},e.prototype._setResizableClasses=function(t){t&&this.enabled()?this.addClass("y-resizable"):this.removeClass("y-resizable")},e.prototype.xScale=function(e){if(null==e)return t.prototype.xScale.call(this);throw new Error("xScales cannot be set on an YDragBoxLayer")},e.prototype.xExtent=function(e){if(null==e)return t.prototype.xExtent.call(this);throw new Error("YDragBoxLayer has no xExtent")},e}(e.DragBoxLayer),e.YDragBoxLayer=n}(e||(e={})),e||(e={}),function(t){var e,n;e=t.Components||(t.Components={}),n=function(e){function n(n){var r=this;e.call(this,n),this._detectionRadius=3,this._enabled=!0,this.addClass("drag-line-layer"),this.addClass("enabled"),this._dragInteraction=new t.Interactions.Drag,this._dragInteraction.attachTo(this);var i=!1,o=function(t){var e;e=t,(r._isVertical()&&r.pixelPosition()-r.detectionRadius()<=e.x&&e.x<=r.pixelPosition()+r.detectionRadius()||!r._isVertical()&&r.pixelPosition()-r.detectionRadius()<=e.y&&e.y<=r.pixelPosition()+r.detectionRadius())&&(i=!0,r._dragStartCallbacks.callCallbacks(r))};this._dragInteraction.onDragStart(o);var a=function(t,e){i&&(r._setPixelPositionWithoutChangingMode(r._isVertical()?e.x:e.y),r._dragCallbacks.callCallbacks(r))};this._dragInteraction.onDrag(a);var s=function(t,e){i&&(i=!1,r._dragEndCallbacks.callCallbacks(r))};this._dragInteraction.onDragEnd(s),this._disconnectInteraction=function(){r._dragInteraction.offDragStart(o),r._dragInteraction.offDrag(a),r._dragInteraction.offDragEnd(s),r._dragInteraction.detachFrom(r)},this._dragStartCallbacks=new t.Utils.CallbackSet,this._dragCallbacks=new t.Utils.CallbackSet,this._dragEndCallbacks=new t.Utils.CallbackSet}return r(n,e),n.prototype._setup=function(){e.prototype._setup.call(this),this._detectionEdge=this.content().append("line").style({opacity:0,stroke:"pink","pointer-events":"visibleStroke"}).classed("drag-edge",!0)},n.prototype.renderImmediately=function(){return e.prototype.renderImmediately.call(this),this._detectionEdge.attr({x1:this._isVertical()?this.pixelPosition():0,y1:this._isVertical()?0:this.pixelPosition(),x2:this._isVertical()?this.pixelPosition():this.width(),y2:this._isVertical()?this.height():this.pixelPosition(),"stroke-width":2*this._detectionRadius}),this},n.prototype.detectionRadius=function(t){if(null==t)return this._detectionRadius;if(t<0)throw new Error("detection radius cannot be negative.");return this._detectionRadius=t,this.render(),this},n.prototype.enabled=function(t){return null==t?this._enabled:(this._enabled=t,t?this.addClass("enabled"):this.removeClass("enabled"),this._dragInteraction.enabled(t),this)},n.prototype.onDragStart=function(t){return this._dragStartCallbacks.add(t),this},n.prototype.offDragStart=function(t){return this._dragStartCallbacks.delete(t),this},n.prototype.onDrag=function(t){return this._dragCallbacks.add(t),this},n.prototype.offDrag=function(t){return this._dragCallbacks.delete(t),this},n.prototype.onDragEnd=function(t){return this._dragEndCallbacks.add(t),this},n.prototype.offDragEnd=function(t){return this._dragEndCallbacks.delete(t),this},n.prototype.destroy=function(){var t=this;e.prototype.destroy.call(this),this._dragStartCallbacks.forEach((function(e){return t._dragStartCallbacks.delete(e)})),this._dragCallbacks.forEach((function(e){return t._dragCallbacks.delete(e)})),this._dragEndCallbacks.forEach((function(e){return t._dragEndCallbacks.delete(e)})),this._disconnectInteraction()},n}(e.GuideLineLayer),e.DragLineLayer=n}(e||(e={})),function(t){var e;(function(t){function e(t,e){if(null==t||null==e)return t===e;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}t.arrayEq=e,t.objEq=function(t,n){if(null==t||null==n)return t===n;var r=Object.keys(t).sort(),i=Object.keys(n).sort(),o=r.map((function(e){return t[e]})),a=i.map((function(t){return n[t]}));return e(r,i)&&e(o,a)}})((e=t.Utils||(t.Utils={})).Methods||(e.Methods={}))}(n||(n={})),function(e){var n,r;n=e.Utils||(e.Utils={}),(r=n.DOM||(n.DOM={})).transform=function(e,n,r){var i=t.transform(e.attr("transform"));return null==n?i.translate:(r=null==r?0:r,i.translate[0]=n,i.translate[1]=r,e.attr("transform",i.toString()),e)},r.getBBox=function(t){var e;try{e=t.node().getBBox()}catch(t){e={x:0,y:0,width:0,height:0}}return e}}(n||(n={})),function(e){var n,r;n=e.Utils||(e.Utils={}),r=function(){function e(e,n){void 0===n&&(n=function(t,e){return t===e}),this.cache=t.map(),this.compute=e,this.valueEq=n}return e.prototype.get=function(t){return this.cache.has(t)||this.cache.set(t,this.compute(t)),this.cache.get(t)},e.prototype.clear=function(){return this.cache=t.map(),this},e}(),n.Cache=r}(n||(n={})),function(t){var e,n;e=t.Utils||(t.Utils={}),n=function(){function t(){this.WordDividerRegExp=new RegExp("\\W"),this.WhitespaceRegExp=new RegExp("\\s")}return t.prototype.tokenize=function(t){var e=this;return t.split("").reduce((function(t,n){return t.slice(0,-1).concat(e.shouldCreateNewToken(t[t.length-1],n))}),[""])},t.prototype.shouldCreateNewToken=function(t,e){if(!t)return[e];var n=t[t.length-1];return this.WhitespaceRegExp.test(n)&&this.WhitespaceRegExp.test(e)?[t+e]:this.WhitespaceRegExp.test(n)||this.WhitespaceRegExp.test(e)?[t,e]:this.WordDividerRegExp.test(n)||this.WordDividerRegExp.test(e)?n===e?[t+e]:[t,e]:[t+e]},t}(),e.Tokenizer=n}(n||(n={})),function(t){var e;(function(t){function e(t){return t&&""!==t.trim()}function n(t,n){if(!t)return t;var r=t.split(""),i=n?function(t){return t.split(n).some(e)}:e;return r.reduce((function(t,e){return i(t+e)?t+e:t}),"")}t.combineWhitespace=function(t){return t.replace(/\s+/g," ")},t.isNotEmptyString=e,t.trimStart=n,t.trimEnd=function(t,e){if(!t)return t;var r=t.split("");return r.reverse(),(r=n(r.join(""),e).split("")).reverse(),r.join("")}})((e=t.Utils||(t.Utils={})).StringMethods||(e.StringMethods={}))}(n||(n={})),function(e){var n,r;n=e.Animators||(e.Animators={}),r=function(){function e(){this.duration(e.DEFAULT_DURATION_MILLISECONDS),this.delay(0),this.easing(e.DEFAULT_EASING),this.moveX(0),this.moveY(0)}return e.prototype.animate=function(e){var n=t.transform("");return n.translate=[this.moveX(),this.moveY()],e.attr("transform",n.toString()),n.translate=[0,0],this._animate(e,{transform:n.toString()})},e.prototype._animate=function(t,e){return t.transition().ease(this.easing()).duration(this.duration()).delay(this.delay()).attr(e)},e.prototype.duration=function(t){return null==t?this._duration:(this._duration=t,this)},e.prototype.moveX=function(t){return null==t?this._moveX:(this._moveX=t,this)},e.prototype.moveY=function(t){return null==t?this._moveY:(this._moveY=t,this)},e.prototype.delay=function(t){return null==t?this._delay:(this._delay=t,this)},e.prototype.easing=function(t){return null==t?this._easing:(this._easing=t,this)},e.DEFAULT_DURATION_MILLISECONDS=300,e.DEFAULT_EASING="exp-out",e}(),n.BaseAnimator=r}(n||(n={})),r=this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r},function(t){var e,n;e=t.Animators||(t.Animators={}),n=function(e){function n(){this.direction("bottom"),e.call(this)}return r(n,e),n.prototype.direction=function(t){if(null==t)return this._direction;if(-1===n.SupportedDirections.indexOf(t))throw new Error("unsupported direction - "+t);return this._direction=t,this},n.prototype.animate=function(n){var r=t.Utils.DOM.getBBox(n),i=n.select(".clip-rect");switch(i.attr("width",0),i.attr("height",0),this._direction){case"top":i.attr("y",r.y+r.height),i.attr("x",r.x),i.attr("width",r.width);break;case"bottom":i.attr("y",r.y),i.attr("x",r.x),i.attr("width",r.width);break;case"left":i.attr("y",r.y),i.attr("x",r.x),i.attr("height",r.height);break;case"right":i.attr("y",r.y),i.attr("x",r.x+r.width),i.attr("height",r.height)}return this._animate(i,r),e.prototype.animate.call(this,n)},n.SupportedDirections=["top","bottom","left","right"],n}(e.BaseAnimator),e.UnveilAnimator=n}(n||(n={})),r=this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r},function(t){var e,n;e=t.Animators||(t.Animators={}),n=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.animate=function(e){var n=e.select(".text-area");return n.attr("opacity",0),this._animate(n,{opacity:1}),t.prototype.animate.call(this,e)},e}(e.BaseAnimator),e.OpacityAnimator=n}(n||(n={})),function(t){var e,n;e=t.Wrappers||(t.Wrappers={}),n=function(){function e(){this.maxLines(1/0),this.textTrimming("ellipsis"),this.allowBreakingWords(!0),this._tokenizer=new t.Utils.Tokenizer,this._breakingCharacter="-"}return e.prototype.maxLines=function(t){return null==t?this._maxLines:(this._maxLines=t,this)},e.prototype.textTrimming=function(t){if(null==t)return this._textTrimming;if("ellipsis"!==t&&"none"!==t)throw new Error(t+" - unsupported text trimming option.");return this._textTrimming=t,this},e.prototype.allowBreakingWords=function(t){return null==t?this._allowBreakingWords:(this._allowBreakingWords=t,this)},e.prototype.wrap=function(t,e,n,r){var i=this;void 0===r&&(r=1/0);var o={wrapping:{originalText:t,wrappedText:"",noLines:0,noBrokeWords:0,truncatedText:""},currentLine:"",availableWidth:n,availableLines:Math.min(Math.floor(r/e.measure().height),this._maxLines),canFitText:!0},a=t.split("\n");return a.reduce((function(t,n,r){return i.breakLineToFitWidth(t,n,r!==a.length-1,e)}),o).wrapping},e.prototype.breakLineToFitWidth=function(e,n,r,i){var o=this;e.canFitText||""===e.wrapping.truncatedText||(e.wrapping.truncatedText+="\n"),e=this._tokenizer.tokenize(n).reduce((function(t,e){return o.wrapNextToken(e,t,i)}),e);var a=t.Utils.StringMethods.trimEnd(e.currentLine);if(e.wrapping.noLines+=+(""!==a),e.wrapping.noLines===e.availableLines&&"none"!==this._textTrimming&&r){var s=this.addEllipsis(a,e.availableWidth,i);e.wrapping.wrappedText+=s.wrappedToken,e.wrapping.truncatedText+=s.remainingToken,e.canFitText=!1}else e.wrapping.wrappedText+=a;return e.currentLine="\n",e},e.prototype.canFitToken=function(t,e,n){var r=this,i=this._allowBreakingWords?t.split("").map((function(e,n){return n!==t.length-1?e+r._breakingCharacter:e})):[t];return n.measure(t).width<=e||i.every((function(t){return n.measure(t).width<=e}))},e.prototype.addEllipsis=function(e,n,r){if("none"===this._textTrimming)return{wrappedToken:e,remainingToken:""};var i=e.substring(0).trim(),o=r.measure(i).width,a=r.measure("...").width,s=e.length>0&&"\n"===e[0]?"\n":"";if(n<=a){var l=a/3,u=Math.floor(n/l);return{wrappedToken:s+"...".substr(0,u),remainingToken:e}}for(;o+a>n;)i=t.Utils.StringMethods.trimEnd(i.substr(0,i.length-1)),o=r.measure(i).width;return{wrappedToken:s+i+"...",remainingToken:t.Utils.StringMethods.trimEnd(e.substring(i.length),"-").trim()}},e.prototype.wrapNextToken=function(e,n,r){if(!n.canFitText||n.availableLines===n.wrapping.noLines||!this.canFitToken(e,n.availableWidth,r))return this.finishWrapping(e,n,r);for(var i=e;i;){var o=this.breakTokenToFitInWidth(i,n.currentLine,n.availableWidth,r);if(n.currentLine=o.line,null!=(i=o.remainingToken)){if(n.wrapping.noBrokeWords+=+o.breakWord,++n.wrapping.noLines,n.availableLines===n.wrapping.noLines){var a=this.addEllipsis(n.currentLine,n.availableWidth,r);return n.wrapping.wrappedText+=a.wrappedToken,n.wrapping.truncatedText+=a.remainingToken+i,n.currentLine="\n",n}n.wrapping.wrappedText+=t.Utils.StringMethods.trimEnd(n.currentLine),n.currentLine="\n"}}return n},e.prototype.finishWrapping=function(t,e,n){if(e.canFitText&&e.availableLines!==e.wrapping.noLines&&this._allowBreakingWords&&"none"!==this._textTrimming){var r=this.addEllipsis(e.currentLine+t,e.availableWidth,n);e.wrapping.wrappedText+=r.wrappedToken,e.wrapping.truncatedText+=r.remainingToken,e.wrapping.noBrokeWords+=+(r.remainingToken.length<t.length),e.wrapping.noLines+=+(r.wrappedToken.length>0),e.currentLine=""}else e.wrapping.truncatedText+=t;return e.canFitText=!1,e},e.prototype.breakTokenToFitInWidth=function(t,e,n,r,i){if(void 0===i&&(i=this._breakingCharacter),r.measure(e+t).width<=n)return{remainingToken:null,line:e+t,breakWord:!1};if(""===t.trim())return{remainingToken:"",line:e,breakWord:!1};if(!this._allowBreakingWords)return{remainingToken:t,line:e,breakWord:!1};for(var o=0;o<t.length&&r.measure(e+t.substring(0,o+1)+i).width<=n;)++o;var a="";return o>0&&(a=i),{remainingToken:t.substring(o),line:e+t.substring(0,o)+a,breakWord:o>0}},e}(),e.Wrapper=n}(n||(n={})),r=this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r},function(t){var e,n;e=t.Wrappers||(t.Wrappers={}),n=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.wrap=function(n,r,i,o){var a=this;if(void 0===o&&(o=1/0),n.split("\n").length>1)throw new Error("SingleLineWrapper is designed to work only on single line");var s=function(e){return t.prototype.wrap.call(a,n,r,e,o)},l=s(i);if(l.noLines<2)return l;for(var u=0,c=i,h=0;h<e.NO_WRAP_ITERATIONS&&c>u;++h){var p=(c+u)/2,f=s(p);this.areSameResults(l,f)?(c=p,l=f):u=p}return l},e.prototype.areSameResults=function(t,e){return t.noLines===e.noLines&&t.truncatedText===e.truncatedText},e.NO_WRAP_ITERATIONS=5,e}(e.Wrapper),e.SingleLineWrapper=n}(n||(n={})),function(e){var n,r;n=e.Writers||(e.Writers={}),r=function(){function n(t,e){this._writerID=n.nextID++,this._elementID=0,this.measurer(t),e&&this.wrapper(e),this.addTitleElement(!1)}return n.prototype.measurer=function(t){return this._measurer=t,this},n.prototype.wrapper=function(t){return this._wrapper=t,this},n.prototype.addTitleElement=function(t){return this._addTitleElement=t,this},n.prototype.writeLine=function(t,r,i,o,a){var s=r.append("text");s.text(t);var l=i*n.XOffsetFactor[o],u=n.AnchorConverter[o];s.attr("text-anchor",u).classed("text-line",!0),e.Utils.DOM.transform(s,l,a).attr("y","-0.25em")},n.prototype.writeText=function(t,e,r,i,o,a){var s=this,l=t.split("\n"),u=this._measurer.measure().height,c=n.YOffsetFactor[a]*(i-l.length*u);l.forEach((function(t,n){s.writeLine(t,e,r,o,(n+1)*u+c)}))},n.prototype.write=function(e,r,i,o){if(-1===n.SupportedRotation.indexOf(o.textRotation))throw new Error("unsupported rotation - "+o.textRotation);var a=Math.abs(Math.abs(o.textRotation)-90)>45,s=a?r:i,l=a?i:r,u=o.selection.append("g").classed("text-container",!0);this._addTitleElement&&u.append("title").text(e);var c=u.append("g").classed("text-area",!0),h=this._wrapper?this._wrapper.wrap(e,this._measurer,s,l).wrappedText:e;this.writeText(h,c,s,l,o.xAlign,o.yAlign);var p=t.transform(""),f=t.transform("");switch(p.rotate=o.textRotation,o.textRotation){case 90:p.translate=[r,0],f.rotate=-90,f.translate=[0,200];break;case-90:p.translate=[0,i],f.rotate=90,f.translate=[r,0];break;case 180:p.translate=[r,i],f.translate=[r,i],f.rotate=180}c.attr("transform",p.toString()),this.addClipPath(u,f),o.animator&&o.animator.animate(u)},n.prototype.addClipPath=function(t,n){var r=this._elementID++,i=/MSIE [5-9]/.test(navigator.userAgent)?"":document.location.href;i=i.split("#")[0];var o="clipPath"+this._writerID+"_"+r;t.select(".text-area").attr("clip-path",'url("'+i+"#"+o+'")');var a=t.append("clipPath").attr("id",o),s=e.Utils.DOM.getBBox(t.select(".text-area"));a.append("rect").classed("clip-rect",!0).attr({x:s.x,y:s.y,width:s.width,height:s.height})},n.nextID=0,n.SupportedRotation=[-90,0,180,90],n.AnchorConverter={left:"start",center:"middle",right:"end"},n.XOffsetFactor={left:0,center:.5,right:1},n.YOffsetFactor={top:0,center:.5,bottom:1},n}(),n.Writer=r}(n||(n={})),function(t){var e,n;e=t.Measurers||(t.Measurers={}),n=function(){function e(t,e){this.textMeasurer=this.getTextMeasurer(t,e)}return e.prototype.checkSelectionIsText=function(t){return"text"===t[0][0].tagName||!t.select("text").empty()},e.prototype.getTextMeasurer=function(t,e){var n=this;if(this.checkSelectionIsText(t)){var r,i=t.node().parentNode;return r="text"===t[0][0].tagName?t:t.select("text"),t.remove(),function(e){i.appendChild(t.node());var o=n.measureBBox(r,e);return t.remove(),o}}var o=t.append("text");return e&&o.classed(e,!0),o.remove(),function(e){t.node().appendChild(o.node());var r=n.measureBBox(o,e);return o.remove(),r}},e.prototype.measureBBox=function(e,n){e.text(n);var r=t.Utils.DOM.getBBox(e);return{width:r.width,height:r.height}},e.prototype.measure=function(t){return void 0===t&&(t=e.HEIGHT_TEXT),this.textMeasurer(t)},e.HEIGHT_TEXT="bqpdl",e}(),e.AbstractMeasurer=n}(n||(n={})),r=this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r},function(e){var n,i;n=e.Measurers||(e.Measurers={}),i=function(e){function i(t,n,r){void 0===n&&(n=null),void 0===r&&(r=!1),e.call(this,t,n),this.useGuards=r}return r(i,e),i.prototype._addGuards=function(t){return n.AbstractMeasurer.HEIGHT_TEXT+t+n.AbstractMeasurer.HEIGHT_TEXT},i.prototype.getGuardWidth=function(){return null==this.guardWidth&&(this.guardWidth=e.prototype.measure.call(this).width),this.guardWidth},i.prototype._measureLine=function(t){var n=this.useGuards?this._addGuards(t):t,r=e.prototype.measure.call(this,n);return r.width-=this.useGuards?2*this.getGuardWidth():0,r},i.prototype.measure=function(e){var r=this;if(void 0===e&&(e=n.AbstractMeasurer.HEIGHT_TEXT),""===e.trim())return{width:0,height:0};var i=e.trim().split("\n").map((function(t){return r._measureLine(t)}));return{width:t.max(i,(function(t){return t.width})),height:t.sum(i,(function(t){return t.height}))}},i}(n.AbstractMeasurer),n.Measurer=i}(n||(n={})),r=this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r},function(e){var n,i;n=e.Measurers||(e.Measurers={}),i=function(e){function n(){e.apply(this,arguments)}return r(n,e),n.prototype._measureCharacter=function(t){return e.prototype._measureLine.call(this,t)},n.prototype._measureLine=function(e){var n=this,r=e.split("").map((function(t){return n._measureCharacter(t)}));return{width:t.sum(r,(function(t){return t.width})),height:t.max(r,(function(t){return t.height}))}},n}(n.Measurer),n.CharacterMeasurer=i}(n||(n={})),r=this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r},function(t){var e,n;e=t.Measurers||(t.Measurers={}),n=function(e){function n(n,r){var i=this;e.call(this,n,r),this.cache=new t.Utils.Cache((function(t){return i._measureCharacterNotFromCache(t)}),t.Utils.Methods.objEq)}return r(n,e),n.prototype._measureCharacterNotFromCache=function(t){return e.prototype._measureCharacter.call(this,t)},n.prototype._measureCharacter=function(t){return this.cache.get(t)},n.prototype.reset=function(){this.cache.clear()},n}(e.CharacterMeasurer),e.CacheCharacterMeasurer=n}(n||(n={})),e}(t)}.apply(e,r))||(t.exports=i)},379:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GeneralLibrary=void 0;var r=n(110),i=function(){function t(){}return t.prototype.ExtractPlottableLib=function(){return r.PlottableLibrary},t.prototype.consolePrint=function(t){console.log(t)},t}();e.GeneralLibrary=i},110:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PlottableLibrary=void 0;var r=n(18),i=function(){function t(){}return t.prototype.plotLine=function(t,e){var n=this.buildXYScale(),i=n[0],o=n[1],a=new r.Axes.Numeric(i,"bottom"),s=new r.Axes.Numeric(o,"left"),l=new r.Plots.Line;l.x((function(t){return t.x}),i),l.y((function(t){return t.y}),o);var u=new r.Components.TitleLabel("Circle"),c=new r.Components.AxisLabel("X Axis"),h=new r.Components.AxisLabel("Y Axis",270);l.addDataset(new r.Dataset(t));var p=new r.Components.Group([l]),f=new r.Components.Table([[null,null,u],[h,s,p],[null,null,a],[null,null,c]]),d=new r.Interactions.Click;return d.onClick((function(t){l.selections().attr("stroke","#888888")})),d.attachTo(l),f.renderTo(e),l},t.prototype.plotScatter=function(t,e){var n=this.buildXYScale(),i=n[0],o=n[1],a=(new r.Plots.Scatter).addDataset(new r.Dataset(t)).x((function(t){return t.x}),i).y((function(t){return t.y}),o).size((function(){return 100*Math.random()})).attr("fill-opacity",.4);return a.renderTo(e),a},t.prototype.buildXYScale=function(){return[new r.Scales.Linear,new r.Scales.Linear]},t}();e.PlottableLibrary=i}},e={};return function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}(379)})();